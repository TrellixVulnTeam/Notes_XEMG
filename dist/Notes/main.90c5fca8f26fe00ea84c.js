(self.webpackChunknotes=self.webpackChunknotes||[]).push([[179],{8255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=8255,t.exports=e},3018:(t,e,n)=>{"use strict";n.d(e,{deG:()=>tn,tb:()=>iu,AFp:()=>Xa,ip1:()=>Ja,CZH:()=>Ya,hGG:()=>Ju,z2F:()=>qu,sBO:()=>na,Sil:()=>gu,_Vd:()=>Io,EJc:()=>au,SBq:()=>Do,qLn:()=>pr,vpe:()=>Oa,gxx:()=>Qi,tBr:()=>bn,XFs:()=>N,OlP:()=>Xe,zs3:()=>cs,ZZ4:()=>Zo,aQg:()=>Jo,soG:()=>ou,YKP:()=>fa,v3s:()=>Gu,h0i:()=>ha,PXZ:()=>Fu,R0b:()=>vu,FiY:()=>wn,Lbi:()=>ru,g9A:()=>nu,Qsj:()=>Po,FYo:()=>Oo,JOm:()=>yr,Tiy:()=>Lo,q3G:()=>ur,tp0:()=>Sn,EAV:()=>$u,Rgc:()=>aa,dDg:()=>Cu,DyG:()=>en,q4F:()=>Mo,GfV:()=>Fo,s_b:()=>pa,ifc:()=>M,eFA:()=>Mu,G48:()=>Ru,Gpc:()=>g,X6Q:()=>Pu,_c5:()=>Zu,VLi:()=>xu,c2e:()=>su,zSh:()=>Wi,wAp:()=>ho,vHH:()=>v,EiD:()=>or,mCW:()=>Gn,qzn:()=>On,JVY:()=>Rn,pB0:()=>Vn,eBb:()=>Fn,L6k:()=>Ln,LAX:()=>Mn,cg1:()=>uo,Tjo:()=>Qu,kL8:()=>co,yhl:()=>Pn,dqk:()=>B,sIi:()=>_s,CqO:()=>Ps,QGY:()=>Ns,F4k:()=>Os,RDi:()=>It,AaK:()=>f,z3N:()=>Nn,qOj:()=>hs,TTD:()=>bt,_Bn:()=>Eo,xp6:()=>ti,uIk:()=>Ss,Tol:()=>Hs,ekj:()=>zs,Suo:()=>$a,Xpm:()=>X,lG2:()=>ot,Yz7:()=>S,cJS:()=>E,oAB:()=>rt,Yjl:()=>at,Y36:()=>Ts,_UZ:()=>ks,qZA:()=>xs,TgZ:()=>As,EpF:()=>Ds,n5z:()=>Qe,Ikx:()=>io,LFG:()=>yn,$8M:()=>We,NdJ:()=>Rs,CRH:()=>Ka,oxw:()=>Ms,ALo:()=>ka,xi3:()=>Da,Q6J:()=>Cs,iGM:()=>za,CHM:()=>Gt,LSH:()=>cr,kYT:()=>it,YNc:()=>Es,_uU:()=>eo,Oqu:()=>no,Gf:()=>Ha});var r=n(9765),i=n(5319),s=n(7574),o=n(6682),a=n(2441),u=n(1307);function c(){return new r.xQ}function l(t){for(let e in t)if(t[e]===l)return e;throw Error("Could not find renamed property on target object.")}function h(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function f(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(f).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function d(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const p=l({__forward_ref__:l});function g(t){return t.__forward_ref__=g,t.toString=function(){return f(this())},t}function m(t){return y(t)?t():t}function y(t){return"function"==typeof t&&t.hasOwnProperty(p)&&t.__forward_ref__===g}class v extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function _(t){return"string"==typeof t?t:null==t?"":String(t)}function b(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():_(t)}function w(t,e){const n=e?` in ${e}`:"";throw new v("201",`No provider for ${b(t)} found${n}`)}function S(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function E(t){return{providers:t.providers||[],imports:t.imports||[]}}function T(t){return C(t,A)||C(t,k)}function C(t,e){return t.hasOwnProperty(e)?t[e]:null}function I(t){return t&&(t.hasOwnProperty(x)||t.hasOwnProperty(D))?t[x]:null}const A=l({"\u0275prov":l}),x=l({"\u0275inj":l}),k=l({ngInjectableDef:l}),D=l({ngInjectorDef:l});var N=(()=>((N=N||{})[N.Default=0]="Default",N[N.Host=1]="Host",N[N.Self=2]="Self",N[N.SkipSelf=4]="SkipSelf",N[N.Optional=8]="Optional",N))();let O;function P(t){const e=O;return O=t,e}function R(t,e,n){const r=T(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&N.Optional?null:void 0!==e?e:void w(f(t),"Injector")}function L(t){return{toString:t}.toString()}var F=(()=>((F=F||{})[F.OnPush=0]="OnPush",F[F.Default=1]="Default",F))(),M=(()=>((M=M||{})[M.Emulated=0]="Emulated",M[M.None=2]="None",M[M.ShadowDom=3]="ShadowDom",M))();const V="undefined"!=typeof globalThis&&globalThis,j="undefined"!=typeof window&&window,U="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,q="undefined"!=typeof global&&global,B=V||q||j||U,G={},z=[],H=l({"\u0275cmp":l}),$=l({"\u0275dir":l}),K=l({"\u0275pipe":l}),Q=l({"\u0275mod":l}),Z=l({"\u0275loc":l}),W=l({"\u0275fac":l}),J=l({__NG_ELEMENT_ID__:l});let Y=0;function X(t){return L(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===F.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||z,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||M.Emulated,id:"c",styles:t.styles||z,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,s=t.pipes;return n.id+=Y++,n.inputs=st(t.inputs,e),n.outputs=st(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(tt):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(et):null,n})}function tt(t){return ut(t)||function(t){return t[$]||null}(t)}function et(t){return function(t){return t[K]||null}(t)}const nt={};function rt(t){return L(()=>{const e={type:t.type,bootstrap:t.bootstrap||z,declarations:t.declarations||z,imports:t.imports||z,exports:t.exports||z,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(nt[t.id]=t.type),e})}function it(t,e){return L(()=>{const n=ct(t,!0);n.declarations=e.declarations||z,n.imports=e.imports||z,n.exports=e.exports||z})}function st(t,e){if(null==t)return G;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}const ot=X;function at(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ut(t){return t[H]||null}function ct(t,e){const n=t[Q]||null;if(!n&&!0===e)throw new Error(`Type ${f(t)} does not have '\u0275mod' property.`);return n}const lt=20,ht=10;function ft(t){return Array.isArray(t)&&"object"==typeof t[1]}function dt(t){return Array.isArray(t)&&!0===t[1]}function pt(t){return 0!=(8&t.flags)}function gt(t){return 2==(2&t.flags)}function mt(t){return 1==(1&t.flags)}function yt(t){return null!==t.template}function vt(t,e){return t.hasOwnProperty(W)?t[W]:null}class _t{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function bt(){return wt}function wt(t){return t.type.prototype.ngOnChanges&&(t.setInput=Et),St}function St(){const t=Tt(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===G)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Et(t,e,n,r){const i=Tt(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:G,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],u=o[a];s[a]=new _t(u&&u.currentValue,e,o===G),t[r]=e}function Tt(t){return t.__ngSimpleChanges__||null}let Ct;function It(t){Ct=t}function At(t){return!!t.listen}bt.ngInherit=!0;const xt={createRenderer:(t,e)=>void 0!==Ct?Ct:"undefined"!=typeof document?document:void 0};function kt(t){for(;Array.isArray(t);)t=t[0];return t}function Dt(t,e){return kt(e[t])}function Nt(t,e){return kt(e[t.index])}function Ot(t,e){return t.data[e]}function Pt(t,e){const n=e[t];return ft(n)?n:n[0]}function Rt(t){return 4==(4&t[2])}function Lt(t){return 128==(128&t[2])}function Ft(t,e){return null==e?null:t[e]}function Mt(t){t[18]=0}function Vt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const jt={lFrame:oe(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ut(){return jt.bindingsEnabled}function qt(){return jt.lFrame.lView}function Bt(){return jt.lFrame.tView}function Gt(t){return jt.lFrame.contextLView=t,t[8]}function zt(){let t=Ht();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ht(){return jt.lFrame.currentTNode}function $t(t,e){const n=jt.lFrame;n.currentTNode=t,n.isParent=e}function Kt(){return jt.lFrame.isParent}function Qt(){return jt.isInCheckNoChangesMode}function Zt(t){jt.isInCheckNoChangesMode=t}function Wt(){return jt.lFrame.bindingIndex++}function Jt(t){const e=jt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Yt(t,e){const n=jt.lFrame;n.bindingIndex=n.bindingRootIndex=t,Xt(e)}function Xt(t){jt.lFrame.currentDirectiveIndex=t}function te(){return jt.lFrame.currentQueryIndex}function ee(t){jt.lFrame.currentQueryIndex=t}function ne(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function re(t,e,n){if(n&N.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&N.Host||(r=ne(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=jt.lFrame=se();return r.currentTNode=e,r.lView=t,!0}function ie(t){const e=se(),n=t[1];jt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function se(){const t=jt.lFrame,e=null===t?null:t.child;return null===e?oe(t):e}function oe(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ae(){const t=jt.lFrame;return jt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ue=ae;function ce(){const t=ae();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function le(){return jt.lFrame.selectedIndex}function he(t){jt.lFrame.selectedIndex=t}function fe(){const t=jt.lFrame;return Ot(t.tView,t.selectedIndex)}function de(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),s&&(t.viewHooks||(t.viewHooks=[])).push(-n,s),o&&((t.viewHooks||(t.viewHooks=[])).push(n,o),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,o)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function pe(t,e,n){ye(t,e,3,n)}function ge(t,e,n,r){(3&t[2])===n&&ye(t,e,n,r)}function me(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function ye(t,e,n,r){const i=null!=r?r:-1,s=e.length-1;let o=0;for(let a=void 0!==r?65535&t[18]:0;a<s;a++)if("number"==typeof e[a+1]){if(o=e[a],null!=r&&o>=r)break}else e[a]<0&&(t[18]+=65536),(o<i||-1==i)&&(ve(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function ve(t,e,n,r){const i=n[r]<0,s=n[r+1],o=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}const _e=-1;class be{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function we(t,e,n){const r=At(t);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,o):e.setAttributeNS(o,a,u)}else{const o=s,a=n[++i];Ee(o)?r&&t.setProperty(e,o,a):r?t.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function Se(t){return 3===t||4===t||6===t}function Ee(t){return 64===t.charCodeAt(0)}function Te(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ce(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ce(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const n=t[s++];if("number"==typeof n){if(n===e){o=-1;break}if(n>e){o=s-1;break}}}for(;s<t.length;){const e=t[s];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function Ie(t){return t!==_e}function Ae(t){return 32767&t}function xe(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let ke=!0;function De(t){const e=ke;return ke=t,e}let Ne=0;function Oe(t,e){const n=Re(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Pe(r.data,t),Pe(e,null),Pe(r.blueprint,null));const i=Le(t,e),s=t.injectorIndex;if(Ie(i)){const t=Ae(i),n=xe(i,e),r=n[1].data;for(let i=0;i<8;i++)e[s+i]=n[t+i]|r[t+i]}return e[s+8]=i,s}function Pe(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Re(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Le(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return _e;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return _e}function Fe(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(J)&&(r=n[J]),null==r&&(r=n[J]=Ne++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Me(t,e,n){if(n&N.Optional)return t;w(e,"NodeInjector")}function Ve(t,e,n,r){if(n&N.Optional&&void 0===r&&(r=null),0==(n&(N.Self|N.Host))){const i=t[9],s=P(void 0);try{return i?i.get(e,r,n&N.Optional):R(e,r,n&N.Optional)}finally{P(s)}}return Me(r,e,n)}function je(t,e,n,r=N.Default,i){if(null!==t){const s=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(J)?t[J]:void 0;return"number"==typeof e?e>=0?255&e:qe:e}(n);if("function"==typeof s){if(!re(e,t,r))return r&N.Host?Me(i,n,r):Ve(e,n,r,i);try{const t=s(r);if(null!=t||r&N.Optional)return t;w(n)}finally{ue()}}else if("number"==typeof s){let i=null,o=Re(t,e),a=_e,u=r&N.Host?e[16][6]:null;for((-1===o||r&N.SkipSelf)&&(a=-1===o?Le(t,e):e[o+8],a!==_e&&$e(r,!1)?(i=e[1],o=Ae(a),e=xe(a,e)):o=-1);-1!==o;){const t=e[1];if(He(s,o,t.data)){const t=Be(o,e,n,i,r,u);if(t!==Ue)return t}a=e[o+8],a!==_e&&$e(r,e[1].data[o+8]===u)&&He(s,o,e)?(i=t,o=Ae(a),e=xe(a,e)):o=-1}}}return Ve(e,n,r,i)}const Ue={};function qe(){return new Ke(zt(),qt())}function Be(t,e,n,r,i,s){const o=e[1],a=o.data[t+8],u=Ge(a,o,n,null==r?gt(a)&&ke:r!=o&&0!=(3&a.type),i&N.Host&&s===a);return null!==u?ze(e,o,u,a):Ue}function Ge(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,c=s>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=o[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=o[u];if(t&&yt(t)&&t.type===n)return u}return null}function ze(t,e,n,r){let i=t[n];const s=e.data;if(i instanceof be){const o=i;o.resolving&&function(t,e){throw new v("200",`Circular dependency in DI detected for ${t}`)}(b(s[n]));const a=De(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?P(o.injectImpl):null;re(t,r,N.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const r=wt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==u&&P(u),De(a),o.resolving=!1,ue()}}return i}function He(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function $e(t,e){return!(t&N.Self||t&N.Host&&e)}class Ke{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return je(this._tNode,this._lView,t,void 0,e)}}function Qe(t){return L(()=>{const e=t.prototype.constructor,n=e[W]||Ze(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[W]||Ze(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Ze(t){return y(t)?()=>{const e=Ze(m(t));return e&&e()}:vt(t)}function We(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Se(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(zt(),t)}const Je="__parameters__";function Ye(t,e,n){return L(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Je)?t[Je]:Object.defineProperty(t,Je,{value:[]})[Je];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Xe{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=S({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const tn=new Xe("AnalyzeForEntryComponents"),en=Function;function nn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),nn(r,e)):e!==t&&e.push(r)}return e}function rn(t,e){t.forEach(t=>Array.isArray(t)?rn(t,e):e(t))}function sn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function on(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function an(t,e,n){let r=cn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function un(t,e){const n=cn(t,e);if(n>=0)return t[1|n]}function cn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=t[n<<1];if(e===s)return n<<1;s>e?i=n:r=n+1}return~(i<<1)}(t,e)}const ln={},hn=/\n/gm,fn="__source",dn=l({provide:String,useValue:l});let pn;function gn(t){const e=pn;return pn=t,e}function mn(t,e=N.Default){if(void 0===pn)throw new Error("inject() must be called from an injection context");return null===pn?R(t,void 0,e):pn.get(t,e&N.Optional?null:void 0,e)}function yn(t,e=N.Default){return(O||mn)(m(t),e)}function vn(t){const e=[];for(let n=0;n<t.length;n++){const r=m(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=N.Default;for(let e=0;e<r.length;e++){const i=r[e],s=i.__NG_DI_FLAG__;"number"==typeof s?-1===s?t=i.token:n|=s:t=i}e.push(yn(t,n))}else e.push(yn(r))}return e}function _n(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const bn=_n(Ye("Inject",t=>({token:t})),-1),wn=_n(Ye("Optional"),8),Sn=_n(Ye("SkipSelf"),4);let En;function Tn(t){var e;return(null===(e=function(){if(void 0===En&&(En=null,B.trustedTypes))try{En=B.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return En}())||void 0===e?void 0:e.createHTML(t))||t}class Cn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class In extends Cn{getTypeName(){return"HTML"}}class An extends Cn{getTypeName(){return"Style"}}class xn extends Cn{getTypeName(){return"Script"}}class kn extends Cn{getTypeName(){return"URL"}}class Dn extends Cn{getTypeName(){return"ResourceURL"}}function Nn(t){return t instanceof Cn?t.changingThisBreaksApplicationSecurity:t}function On(t,e){const n=Pn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Pn(t){return t instanceof Cn&&t.getTypeName()||null}function Rn(t){return new In(t)}function Ln(t){return new An(t)}function Fn(t){return new xn(t)}function Mn(t){return new kn(t)}function Vn(t){return new Dn(t)}class jn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Tn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Un{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Tn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Tn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const qn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Bn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Gn(t){return(t=String(t)).match(qn)||t.match(Bn)?t:"unsafe:"+t}function zn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Hn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const $n=zn("area,br,col,hr,img,wbr"),Kn=zn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Qn=zn("rp,rt"),Zn=Hn(Qn,Kn),Wn=Hn($n,Hn(Kn,zn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Hn(Qn,zn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Zn),Jn=zn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Yn=zn("srcset"),Xn=Hn(Jn,Yn,zn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),zn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),tr=zn("script,style,template");class er{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Wn.hasOwnProperty(e))return this.sanitizedSomething=!0,!tr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,s=e.toLowerCase();if(!Xn.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let o=t.value;Jn[s]&&(o=Gn(o)),Yn[s]&&(r=o,o=(r=String(r)).split(",").map(t=>Gn(t.trim())).join(", ")),this.buf.push(" ",e,'="',ir(o),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Wn.hasOwnProperty(e)&&!$n.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(ir(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const nr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rr=/([^\#-~ |!])/g;function ir(t){return t.replace(/&/g,"&amp;").replace(nr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(rr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let sr;function or(t,e){let n=null;try{sr=sr||function(t){const e=new Un(t);return function(){try{return!!(new window.DOMParser).parseFromString(Tn(""),"text/html")}catch(t){return!1}}()?new jn(e):e}(t);let r=e?String(e):"";n=sr.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=sr.getInertBodyElement(r)}while(r!==s);return Tn((new er).sanitizeChildren(ar(n)||n))}finally{if(n){const t=ar(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function ar(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var ur=(()=>((ur=ur||{})[ur.NONE=0]="NONE",ur[ur.HTML=1]="HTML",ur[ur.STYLE=2]="STYLE",ur[ur.SCRIPT=3]="SCRIPT",ur[ur.URL=4]="URL",ur[ur.RESOURCE_URL=5]="RESOURCE_URL",ur))();function cr(t){const e=function(){const t=qt();return t&&t[12]}();return e?e.sanitize(ur.URL,t)||"":On(t,"URL")?Nn(t):Gn(_(t))}function lr(t,e){t.__ngContext__=e}function hr(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function fr(t){return t.ngOriginalError}function dr(t,...e){t.error(...e)}class pr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||dr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?function(t){return t.ngDebugContext}(t)||this._findContext(fr(t)):null}_findOriginalError(t){let e=fr(t);for(;e&&fr(e);)e=fr(e);return e}}const gr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(B))();function mr(t){return t instanceof Function?t():t}var yr=(()=>((yr=yr||{})[yr.Important=1]="Important",yr[yr.DashCase=2]="DashCase",yr))();function vr(t,e){return(void 0)(t,e)}function _r(t){const e=t[3];return dt(e)?e[3]:e}function br(t){return Sr(t[13])}function wr(t){return Sr(t[4])}function Sr(t){for(;null!==t&&!dt(t);)t=t[4];return t}function Er(t,e,n,r,i){if(null!=r){let s,o=!1;dt(r)?s=r:ft(r)&&(o=!0,r=r[0]);const a=kt(r);0===t&&null!==n?null==i?Dr(e,n,a):kr(e,n,a,i||null,!0):1===t&&null!==n?kr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Or(t,e);r&&function(t,e,n,r){At(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function(t,e,n,r,i){const s=n[7];s!==kt(n)&&Er(e,t,r,s,i);for(let o=ht;o<n.length;o++){const i=n[o];Vr(i[1],i,t,e,r,s)}}(e,t,s,n,i)}}function Tr(t,e,n){return At(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Cr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Vt(i,-1)),n.splice(r,1)}function Ir(t,e){if(t.length<=ht)return;const n=ht+e,r=t[n];if(r){const s=r[17];null!==s&&s!==t&&Cr(s,r),e>0&&(t[n-1][4]=r[4]);const o=on(t,ht+e);Vr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Ar(t,e){if(!(256&e[2])){const n=e[11];At(n)&&n.destroyNode&&Vr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return xr(t[1],t);for(;e;){let n=null;if(ft(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ft(e)&&xr(e[1],e),e=e[3];null===e&&(e=t),ft(e)&&xr(e[1],e),n=e&&e[4]}e=n}}(e)}}function xr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof be)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const t=n[s+1],o="function"==typeof t?t(e):kt(e[t]),a=r[i=n[s+2]],u=n[s+3];"boolean"==typeof u?o.removeEventListener(n[s],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),s+=2}else{const t=r[i=n[s+1]];n[s].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&At(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&dt(e[3])){n!==e[3]&&Cr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function kr(t,e,n,r,i){At(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Dr(t,e,n){At(t)?t.appendChild(e,n):e.appendChild(n)}function Nr(t,e,n,r,i){null!==r?kr(t,e,n,r,i):Dr(t,e,n)}function Or(t,e){return At(t)?t.parentNode(e):e.parentNode}function Pr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===M.None||e===M.Emulated)return null}return Nt(r,n)}(t,e.parent,n)}(t,r,e),s=e[11],o=function(t,e,n){return function(t,e,n){return 40&t.type?Nt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Nr(s,i,n[a],o,!1);else Nr(s,i,n,o,!1)}function Rr(t,e){if(null!==e){const n=e.type;if(3&n)return Nt(e,t);if(4&n)return Fr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Rr(t,n);{const n=t[e.index];return dt(n)?Fr(-1,n):kt(n)}}if(32&n)return vr(e,t)()||kt(t[e.index]);{const n=Lr(t,e);return null!==n?Array.isArray(n)?n[0]:Rr(_r(t[16]),n):Rr(t,e.next)}}return null}function Lr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Fr(t,e){const n=ht+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Rr(t,r)}return e[7]}function Mr(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&lr(kt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Mr(t,e,n.child,r,i,s,!1),Er(e,t,i,a,s);else if(32&u){const o=vr(n,r);let u;for(;u=o();)Er(e,t,i,u,s);Er(e,t,i,a,s)}else 16&u?jr(t,e,r,n,i,s):Er(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Vr(t,e,n,r,i,s){Mr(n,r,t.firstChild,e,i,s,!1)}function jr(t,e,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Er(e,t,i,a[u],s);else Mr(t,e,a,o[3],i,s,!0)}function Ur(t,e,n){At(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function qr(t,e,n){At(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Br(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Gr="ng-template";function zr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Br(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Hr(t){return 4===t.type&&t.value!==Gr}function $r(t,e,n){return e===(4!==t.type||n?t.value:Gr)}function Kr(t,e,n){let r=4;const i=t.attrs||[],s=function(t){for(let e=0;e<t.length;e++)if(Se(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!$r(t,u,n)||""===u&&1===e.length){if(Qr(r))return!1;o=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!zr(t.attrs,c,n)){if(Qr(r))return!1;o=!0}continue}const l=Zr(8&r?"class":u,i,Hr(t),n);if(-1===l){if(Qr(r))return!1;o=!0;continue}if(""!==c){let t;t=l>s?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Br(e,c,0)||2&r&&c!==t){if(Qr(r))return!1;o=!0}}}}else{if(!o&&!Qr(r)&&!Qr(u))return!1;if(o&&Qr(u))continue;o=!1,r=u|1&r}}return Qr(r)||o}function Qr(t){return 0==(1&t)}function Zr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Wr(t,e,n=!1){for(let r=0;r<e.length;r++)if(Kr(t,e[r],n))return!0;return!1}function Jr(t,e){return t?":not("+e.trim()+")":e}function Yr(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const e=t[++n];i+="["+o+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||Qr(o)||(e+=Jr(s,i),i=""),r=o,s=s||!Qr(r);n++}return""!==i&&(e+=Jr(s,i)),e}const Xr={};function ti(t){ei(Bt(),qt(),le()+t,Qt())}function ei(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&pe(e,r,n)}else{const r=t.preOrderHooks;null!==r&&ge(e,r,0,n)}he(n)}function ni(t,e){return t<<17|e<<2}function ri(t){return t>>17&32767}function ii(t){return 2|t}function si(t){return(131068&t)>>2}function oi(t,e){return-131069&t|e<<2}function ai(t){return 1|t}function ui(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=t.data[s];ee(i),n.contentQueries(2,e[s],s)}}}function ci(t,e,n,r,i,s,o,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Mt(l),l[3]=l[15]=t,l[8]=n,l[10]=o||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=s,l[16]=2==e.type?t[16]:l,l}function li(t,e,n,r,i){let s=t.data[e];if(null===s)s=function(t,e,n,r,i){const s=Ht(),o=Kt(),a=t.data[e]=function(t,e,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}(t,e,n,r,i),jt.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const t=function(){const t=jt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===t?-1:t.injectorIndex}return $t(s,!0),s}function hi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function fi(t,e,n){ie(e);try{const r=t.viewQuery;null!==r&&qi(1,r,n);const i=t.template;null!==i&&gi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&ui(t,e),t.staticViewQueries&&qi(2,t.viewQuery,n);const s=t.components;null!==s&&function(t,e){for(let n=0;n<e.length;n++)Fi(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,ce()}}function di(t,e,n,r){const i=e[2];if(256==(256&i))return;ie(e);const s=Qt();try{Mt(e),jt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&gi(t,e,n,2,r);const o=3==(3&i);if(!s)if(o){const n=t.preOrderCheckHooks;null!==n&&pe(e,n,null)}else{const n=t.preOrderHooks;null!==n&&ge(e,n,0,null),me(e,0)}if(function(t){for(let e=br(t);null!==e;e=wr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Vt(r,1),n[2]|=1024}}}(e),function(t){for(let e=br(t);null!==e;e=wr(e))for(let t=ht;t<e.length;t++){const n=e[t],r=n[1];Lt(n)&&di(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&ui(t,e),!s)if(o){const n=t.contentCheckHooks;null!==n&&pe(e,n)}else{const n=t.contentHooks;null!==n&&ge(e,n,1),me(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)he(~r);else{const i=r,s=n[++t],o=n[++t];Yt(s,i),o(2,e[i])}}}finally{he(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Ri(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&qi(2,u,r),!s)if(o){const n=t.viewCheckHooks;null!==n&&pe(e,n)}else{const n=t.viewHooks;null!==n&&ge(e,n,2),me(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Vt(e[3],-1))}finally{ce()}}function pi(t,e,n,r){const i=e[10],s=!Qt(),o=Rt(e);try{s&&!o&&i.begin&&i.begin(),o&&fi(t,e,r),di(t,e,n,r)}finally{s&&!o&&i.end&&i.end()}}function gi(t,e,n,r,i){const s=le(),o=2&r;try{he(-1),o&&e.length>lt&&ei(t,e,lt,Qt()),n(r,i)}finally{he(s)}}function mi(t,e,n){Ut()&&(function(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||Oe(n,e),lr(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const r=t.data[a],s=yt(r);s&&Di(e,n,r);const u=ze(e,t,a,n);lr(u,e),null!==o&&Ni(0,a-i,u,r,0,o),s&&(Pt(n.index,e)[8]=u)}}(t,e,n,Nt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=jt.lFrame.currentDirectiveIndex;try{he(s);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Xt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Ci(r,i)}}finally{he(-1),Xt(o)}}(t,e,n))}function yi(t,e,n=Nt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function vi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=_i(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function _i(t,e,n,r,i,s,o,a,u,c){const l=lt+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Xr);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function bi(t,e,n,r){const i=Gi(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&zi(t).push(r,i.length-1))}function wi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Si(t,e,n,r,i,s,o,a){const u=Nt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?($i(t,n,c,r,i),gt(e)&&function(t,e){const n=Pt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=o?o(i,e.value||"",r):i,At(s)?s.setProperty(u,r,i):Ee(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Ei(t,e,n,r){let i=!1;if(Ut()){const s=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];Wr(n,o.selectors,!1)&&(i||(i=[]),Fe(Oe(n,e),t,o.type),yt(o)?(Ii(t,n),i.unshift(o)):i.push(o))}return i}(t,e,n),o=null===r?null:{"":-1};if(null!==s){i=!0,xi(n,t.data.length,s.length);for(let t=0;t<s.length;t++){const e=s[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=hi(t,e,s.length,null);for(let i=0;i<s.length;i++){const c=s[i];n.mergedAttrs=Te(n.mergedAttrs,c.hostAttrs),ki(t,n,e,u,c),Ai(u,c,o),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,s=[];let o=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Hr(e)?null:Oi(n,i);s.push(c),o=wi(n,u,o),a=wi(t.outputs,u,a)}null!==o&&(o.hasOwnProperty("class")&&(e.flags|=16),o.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=o,e.outputs=a}(t,n)}o&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new v("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,o)}return n.mergedAttrs=Te(n.mergedAttrs,n.attrs),i}function Ti(t,e,n,r,i,s){const o=s.hostBindings;if(o){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const s=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(r,i,o)}}function Ci(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ii(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Ai(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;yt(e)&&(n[""]=t)}}function xi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ki(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=vt(i.type)),o=new be(s,yt(i),null);t.blueprint[r]=o,n[r]=o,Ti(t,e,0,r,hi(t,n,i.hostVars,Xr),i)}function Di(t,e,n){const r=Nt(e,t),i=vi(n),s=t[10],o=Mi(t,ci(t,i,null,n.onPush?64:16,r,e,s,s.createRenderer(r,n),null,null));t[e.index]=o}function Ni(t,e,n,r,i,s){const o=s[e];if(null!==o){const t=r.setInput;for(let e=0;e<o.length;){const i=o[e++],s=o[e++],a=o[e++];null!==t?r.setInput(n,a,i,s):n[s]=a}}}function Oi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Pi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Ri(t,e){const n=Pt(e,t);if(Lt(n)){const t=n[1];80&n[2]?di(t,n,t.template,n[8]):n[5]>0&&Li(n)}}function Li(t){for(let n=br(t);null!==n;n=wr(n))for(let t=ht;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];di(t,e,t.template,e[8])}else e[5]>0&&Li(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Pt(e[n],t);Lt(r)&&r[5]>0&&Li(r)}}function Fi(t,e){const n=Pt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),fi(r,n,n[8])}function Mi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Vi(t){for(;t;){t[2]|=64;const e=_r(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function ji(t,e,n){const r=e[10];r.begin&&r.begin();try{di(t,e,t.template,n)}catch(i){throw Hi(e,i),i}finally{r.end&&r.end()}}function Ui(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=hr(n),i=r[1];pi(i,r,i.template,n)}}(t[8])}function qi(t,e,n){ee(0),e(t,n)}const Bi=(()=>Promise.resolve(null))();function Gi(t){return t[7]||(t[7]=[])}function zi(t){return t.cleanup||(t.cleanup=[])}function Hi(t,e){const n=t[9],r=n?n.get(pr,null):null;r&&r.handleError(e)}function $i(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],u=e[o],c=t.data[o];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Ki(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const t=e[o];"number"==typeof t?s=t:1==s?i=d(i,t):2==s&&(r=d(r,t+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Qi=new Xe("INJECTOR",-1);class Zi{get(t,e=ln){if(e===ln){const e=new Error(`NullInjectorError: No provider for ${f(t)}!`);throw e.name="NullInjectorError",e}return e}}const Wi=new Xe("Set Injector scope."),Ji={},Yi={};let Xi;function ts(){return void 0===Xi&&(Xi=new Zi),Xi}function es(t,e=null,n=null,r){return new ns(t,n,e||ts(),r)}class ns{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&rn(e,n=>this.processProvider(n,t,e)),rn([t],t=>this.processInjectorType(t,[],i)),this.records.set(Qi,ss(void 0,this));const s=this.records.get(Wi);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof t?null:f(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=ln,n=N.Default){this.assertNotDestroyed();const r=gn(this),i=P(void 0);try{if(!(n&N.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(s=t)||"object"==typeof s&&s instanceof Xe)&&T(t);e=n&&this.injectableDefInScope(n)?ss(rs(t),Ji):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&N.Self?ts():this.parent).get(t,e=n&N.Optional&&e===ln?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(f(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[fn]&&i.unshift(e[fn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=f(e);if(Array.isArray(e))i=e.map(f).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):f(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(hn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{P(i),gn(r)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(f(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=m(t)))return!1;let r=I(t);const i=null==r&&t.ngModule||void 0,s=void 0===i?t:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=I(i)),null==r)return!1;if(null!=r.imports&&!o){let t;n.push(s);try{rn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];rn(r,t=>this.processProvider(t,n,r||z))}}this.injectorDefTypes.add(s);const a=vt(s)||(()=>new s);this.records.set(s,ss(a,Ji));const u=r.providers;if(null!=u&&!o){const e=t;rn(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=as(t=m(t))?t:m(t&&t.provide);const i=function(t,e,n){return os(t)?ss(void 0,t.useValue):ss(is(t),Ji)}(t);if(as(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=ss(void 0,Ji,!0),e.factory=()=>vn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Ji&&(e.value=Yi,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=m(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function rs(t){const e=T(t),n=null!==e?e.factory:vt(t);if(null!==n)return n;if(t instanceof Xe)throw new Error(`Token ${f(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${f(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[A]||t[k]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function is(t,e,n){let r;if(as(t)){const e=m(t);return vt(e)||rs(e)}if(os(t))r=()=>m(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...vn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>yn(m(t.useExisting));else{const e=m(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return vt(e)||rs(e);r=()=>new e(...vn(t.deps))}var i;return r}function ss(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function os(t){return null!==t&&"object"==typeof t&&dn in t}function as(t){return"function"==typeof t}const us=function(t,e,n){return function(t,e=null,n=null,r){const i=es(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};class cs{static create(t,e){return Array.isArray(t)?us(t,e,""):us(t.providers,t.parent,t.name||"")}}function ls(t,e){de(hr(t)[1],zt())}function hs(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(yt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=fs(t.inputs),e.declaredInputs=fs(t.declaredInputs),e.outputs=fs(t.outputs);const n=i.hostBindings;n&&gs(t,n);const s=i.viewQuery,o=i.contentQueries;if(s&&ds(t,s),o&&ps(t,o),h(t.inputs,i.inputs),h(t.declaredInputs,i.declaredInputs),h(t.outputs,i.outputs),yt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===hs&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Te(i.hostAttrs,n=Te(n,i.hostAttrs))}}(r)}function fs(t){return t===G?{}:t===z?[]:t}function ds(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function ps(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function gs(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}cs.THROW_IF_NOT_FOUND=ln,cs.NULL=new Zi,cs.\u0275prov=S({token:cs,providedIn:"any",factory:()=>yn(Qi)}),cs.__NG_ELEMENT_ID__=-1;let ms=null;function ys(){if(!ms){const t=B.Symbol;if(t&&t.iterator)ms=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(ms=n)}}}return ms}class vs{constructor(t){this.wrapped=t}static wrap(t){return new vs(t)}static unwrap(t){return vs.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof vs}}function _s(t){return!!bs(t)&&(Array.isArray(t)||!(t instanceof Map)&&ys()in t)}function bs(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ws(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Ss(t,e,n,r){const i=qt();return ws(i,Wt(),e)&&(Bt(),function(t,e,n,r,i,s){const o=Nt(t,e);!function(t,e,n,r,i,s,o){if(null==s)At(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==o?_(s):o(s,r||"",i);At(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],o,s,t.value,n,r,i)}(fe(),i,t,e,n,r)),Ss}function Es(t,e,n,r,i,s,o,a){const u=qt(),c=Bt(),l=t+lt,h=c.firstCreatePass?function(t,e,n,r,i,s,o,a,u){const c=e.consts,l=li(e,t,4,o||null,Ft(c,a));Ei(e,n,l,Ft(c,u)),de(e,l);const h=l.tViews=_i(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,s,o):c.data[l];$t(h,!1);const f=u[11].createComment("");Pr(c,u,f,h),lr(f,u),Mi(u,u[l]=Pi(f,u,f,h)),mt(h)&&mi(c,u,h),null!=o&&yi(u,h,a)}function Ts(t,e=N.Default){const n=qt();return null===n?yn(t,e):je(zt(),n,m(t),e)}function Cs(t,e,n){const r=qt();return ws(r,Wt(),e)&&Si(Bt(),fe(),r,t,e,r[11],n,!1),Cs}function Is(t,e,n,r,i){const s=i?"class":"style";$i(t,n,e.inputs[s],s,r)}function As(t,e,n,r){const i=qt(),s=Bt(),o=lt+t,a=i[11],u=i[o]=Tr(a,e,jt.lFrame.currentNamespace),c=s.firstCreatePass?function(t,e,n,r,i,s,o){const a=e.consts,u=li(e,t,2,i,Ft(a,s));return Ei(e,n,u,Ft(a,o)),null!==u.attrs&&Ki(u,u.attrs,!1),null!==u.mergedAttrs&&Ki(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,0,e,n,r):s.data[o];$t(c,!0);const l=c.mergedAttrs;null!==l&&we(a,u,l);const h=c.classes;null!==h&&qr(a,u,h);const f=c.styles;null!==f&&Ur(a,u,f),64!=(64&c.flags)&&Pr(s,i,u,c),0===jt.lFrame.elementDepthCount&&lr(u,i),jt.lFrame.elementDepthCount++,mt(c)&&(mi(s,i,c),function(t,e,n){if(pt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(s,c,i)),null!==r&&yi(i,c)}function xs(){let t=zt();Kt()?jt.lFrame.isParent=!1:(t=t.parent,$t(t,!1));const e=t;jt.lFrame.elementDepthCount--;const n=Bt();n.firstCreatePass&&(de(n,t),pt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Is(n,e,qt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Is(n,e,qt(),e.stylesWithoutHost,!1)}function ks(t,e,n,r){As(t,e,n,r),xs()}function Ds(){return qt()}function Ns(t){return!!t&&"function"==typeof t.then}function Os(t){return!!t&&"function"==typeof t.subscribe}const Ps=Os;function Rs(t,e,n,r){const i=qt(),s=Bt(),o=zt();return function(t,e,n,r,i,s,o,a){const u=mt(r),c=t.firstCreatePass&&zi(t),l=Gi(e);let h=!0;if(3&r.type||a){const f=Nt(r,e),d=a?a(f):f,p=l.length,g=a?t=>a(kt(t[r.index])):r.index;if(At(n)){let o=null;if(!a&&u&&(o=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const t=i[s];if(t===n&&i[s+1]===r){const t=e[7],n=i[s+2];return t.length>n?t[n]:null}"string"==typeof t&&(s+=2)}return null}(t,e,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=Fs(r,e,0,s,!1);const t=n.listen(d,i,s);l.push(s,t),c&&c.push(i,g,p,p+1)}}else s=Fs(r,e,0,s,!0),d.addEventListener(i,s,o),l.push(s),c&&c.push(i,g,p,o)}else s=Fs(r,e,0,s,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(s),o=l.length;l.push(s,t),c&&c.push(i,r.index,o,-(o+1))}}}(s,i,i[11],o,t,e,!!n,r),Rs}function Ls(t,e,n,r){try{return!1!==n(r)}catch(i){return Hi(t,i),!1}}function Fs(t,e,n,r,i){return function n(s){if(s===Function)return r;const o=2&t.flags?Pt(t.index,e):e;0==(32&e[2])&&Vi(o);let a=Ls(e,0,r,s),u=n.__ngNextListenerFn__;for(;u;)a=Ls(e,0,u,s)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function Ms(t=1){return function(t){return(jt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,jt.lFrame.contextLView))[8]}(t)}function Vs(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?ri(s):si(s),u=!1;for(;0!==a&&(!1===u||o);){const n=t[a+1];js(t[a],e)&&(u=!0,t[a+1]=r?ai(n):ii(n)),a=r?ri(n):si(n)}u&&(t[n+1]=r?ii(s):ai(s))}function js(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&cn(t,e)>=0}const Us={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function qs(t){return t.substring(Us.key,Us.keyEnd)}function Bs(t,e){const n=Us.textEnd;return n===e?-1:(e=Us.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Us.key=e,n),Gs(t,e,n))}function Gs(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function zs(t,e){return function(t,e,n,r){const i=qt(),s=Bt(),o=Jt(2);s.firstUpdatePass&&Qs(s,t,o,true),e!==Xr&&ws(i,o,e)&&Js(s,s.data[le()],i,i[11],t,i[o+1]=function(t,e){return null==t||"object"==typeof t&&(t=f(Nn(t))),t}(e),true,o)}(t,e),zs}function Hs(t){!function(t,e,n,r){const i=Bt(),s=Jt(2);i.firstUpdatePass&&Qs(i,null,s,r);const o=qt();if(n!==Xr&&ws(o,s,n)){const a=i.data[le()];if(to(a,r)&&!Ks(i,s)){let t=a.classesWithoutHost;null!==t&&(n=d(t,n||"")),Is(i,a,o,n,r)}else!function(t,e,n,r,i,s,o,a){i===Xr&&(i=z);let u=0,c=0,l=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;null!==l||null!==h;){const o=u<i.length?i[u+1]:void 0,f=c<s.length?s[c+1]:void 0;let d,p=null;l===h?(u+=2,c+=2,o!==f&&(p=h,d=f)):null===h||null!==l&&l<h?(u+=2,p=l):(c+=2,p=h,d=f),null!==p&&Js(t,e,n,r,p,d,true,a),l=u<i.length?i[u]:null,h=c<s.length?s[c]:null}}(i,a,o,o[11],o[s+1],o[s+1]=function(t,e,n){if(null==n||""===n)return z;const r=[],i=Nn(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(t,e,n),0,s)}}(an,$s,t,!0)}function $s(t,e){for(let n=function(t){return function(t){Us.key=0,Us.keyEnd=0,Us.value=0,Us.valueEnd=0,Us.textEnd=t.length}(t),Bs(t,Gs(t,0,Us.textEnd))}(e);n>=0;n=Bs(e,n))an(t,qs(e),!0)}function Ks(t,e){return e>=t.expandoStartIndex}function Qs(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[le()],o=Ks(t,n);to(s,r)&&null===e&&!o&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=jt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Ws(n=Zs(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=Zs(i,t,e,n,r),null===s){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==si(r))return t[ri(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=Zs(null,t,e,n[1],r),n=Ws(n,e.attrs,r),function(t,e,n,r){t[ri(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else s=function(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Ws(r,t[s].hostAttrs,n);return Ws(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ri(o),u=si(o);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||cn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=ri(t[a+1]);t[r+1]=ni(e,a),0!==e&&(t[e+1]=oi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=ni(a,0),0!==a&&(t[a+1]=oi(t[a+1],r)),a=r;else t[r+1]=ni(u,0),0===a?a=r:t[u+1]=oi(t[u+1],r),u=r;l&&(t[r+1]=ii(t[r+1])),Vs(t,c,r,!0),Vs(t,c,r,!1),function(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&cn(s,e)>=0&&(n[r+1]=ai(n[r+1]))}(e,c,t,r,s),o=ni(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}function Zs(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=Ws(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Ws(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),an(t,o,!!n||e[++s]))}return void 0===t?null:t}function Js(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Xs(1==(1&c)?Ys(u,e,n,i,si(c),o):void 0)||(Xs(s)||2==(2&c)&&(s=Ys(u,null,n,i,a,o)),function(t,e,n,r,i){const s=At(t);if(e)i?s?t.addClass(n,r):n.classList.add(r):s?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:yr.DashCase;if(null==i)s?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const o="string"==typeof i&&i.endsWith("!important");o&&(i=i.slice(0,-10),e|=yr.Important),s?t.setStyle(n,r,i,e):n.style.setProperty(r,i,o?"important":"")}}}(r,o,Dt(le(),n),i,s))}function Ys(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const e=t[i],s=Array.isArray(e),u=s?e[1]:e,c=null===u;let l=n[i+1];l===Xr&&(l=c?z:void 0);let h=c?un(l,r):u===r?l:void 0;if(s&&!Xs(h)&&(h=un(e,r)),Xs(h)&&(a=h,o))return a;const f=t[i+1];i=o?ri(f):si(f)}if(null!==e){let t=s?e.residualClasses:e.residualStyles;null!=t&&(a=un(t,r))}return a}function Xs(t){return void 0!==t}function to(t,e){return 0!=(t.flags&(e?16:32))}function eo(t,e=""){const n=qt(),r=Bt(),i=t+lt,s=r.firstCreatePass?li(r,i,1,e,null):r.data[i],o=n[i]=function(t,e){return At(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Pr(r,n,o,s),$t(s,!1)}function no(t){return ro("",t,""),no}function ro(t,e,n){const r=qt(),i=function(t,e,n,r){return ws(t,Wt(),n)?e+_(n)+r:Xr}(r,t,e,n);return i!==Xr&&function(t,e,n){const r=Dt(e,t);!function(t,e,n){At(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,le(),i),ro}function io(t,e,n){const r=qt();return ws(r,Wt(),e)&&Si(Bt(),fe(),r,t,e,r[11],n,!0),io}const so=void 0;var oo=["en",[["a","p"],["AM","PM"],so],[["AM","PM"],so,so],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],so,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],so,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",so,"{1} 'at' {0}",so],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ao={};function uo(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=lo(e);if(n)return n;const r=e.split("-")[0];if(n=lo(r),n)return n;if("en"===r)return oo;throw new Error(`Missing locale data for the locale "${t}".`)}function co(t){return uo(t)[ho.PluralCase]}function lo(t){return t in ao||(ao[t]=B.ng&&B.ng.common&&B.ng.common.locales&&B.ng.common.locales[t]),ao[t]}var ho=(()=>((ho=ho||{})[ho.LocaleId=0]="LocaleId",ho[ho.DayPeriodsFormat=1]="DayPeriodsFormat",ho[ho.DayPeriodsStandalone=2]="DayPeriodsStandalone",ho[ho.DaysFormat=3]="DaysFormat",ho[ho.DaysStandalone=4]="DaysStandalone",ho[ho.MonthsFormat=5]="MonthsFormat",ho[ho.MonthsStandalone=6]="MonthsStandalone",ho[ho.Eras=7]="Eras",ho[ho.FirstDayOfWeek=8]="FirstDayOfWeek",ho[ho.WeekendRange=9]="WeekendRange",ho[ho.DateFormat=10]="DateFormat",ho[ho.TimeFormat=11]="TimeFormat",ho[ho.DateTimeFormat=12]="DateTimeFormat",ho[ho.NumberSymbols=13]="NumberSymbols",ho[ho.NumberFormats=14]="NumberFormats",ho[ho.CurrencyCode=15]="CurrencyCode",ho[ho.CurrencySymbol=16]="CurrencySymbol",ho[ho.CurrencyName=17]="CurrencyName",ho[ho.Currencies=18]="Currencies",ho[ho.Directionality=19]="Directionality",ho[ho.PluralCase=20]="PluralCase",ho[ho.ExtraData=21]="ExtraData",ho))();const fo="en-US";let po=fo;function go(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(po=t.toLowerCase().replace(/_/g,"-"))}function mo(t,e,n,r,i){if(t=m(t),Array.isArray(t))for(let s=0;s<t.length;s++)mo(t[s],e,n,r,i);else{const s=Bt(),o=qt();let a=as(t)?t:m(t.provide),u=is(t);const c=zt(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(as(t)||!t.multi){const r=new be(u,i,Ts),d=_o(a,e,i?l:l+f,h);-1===d?(Fe(Oe(c,o),s,a),yo(s,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),o.push(r)):(n[d]=r,o[d]=r)}else{const d=_o(a,e,l+f,h),p=_o(a,e,l,l+f),g=d>=0&&n[d],m=p>=0&&n[p];if(i&&!m||!i&&!g){Fe(Oe(c,o),s,a);const l=function(t,e,n,r,i){const s=new be(t,n,Ts);return s.multi=[],s.index=e,s.componentProviders=0,vo(s,i,r&&!n),s}(i?wo:bo,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),yo(s,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),o.push(l)}else yo(s,t,d>-1?d:p,vo(n[i?p:d],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function yo(t,e,n,r){const i=as(e);if(i||e.useClass){const s=(e.useClass||e).prototype.ngOnDestroy;if(s){const o=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=o.indexOf(n);-1===t?o.push(n,[r,s]):o[t+1].push(r,s)}else o.push(n,s)}}}function vo(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function _o(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function bo(t,e,n,r){return So(this.multi,[])}function wo(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=ze(n,n[1],this.providerFactory.index,r);s=e.slice(0,t),So(i,s);for(let n=t;n<e.length;n++)s.push(e[n])}else s=[],So(i,s);return s}function So(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Eo(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Bt();if(r.firstCreatePass){const i=yt(t);mo(n,r.data,r.blueprint,i,!0),mo(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class To{}class Co{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${f(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}class Io{}function Ao(...t){}function xo(t,e){return new Do(Nt(t,e))}Io.NULL=new Co;const ko=function(){return xo(zt(),qt())};let Do=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=ko,t})();function No(t){return t instanceof Do?t.nativeElement:t}class Oo{}let Po=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ro(),t})();const Ro=function(){const t=qt(),e=Pt(zt().index,t);return function(t){return t[11]}(ft(e)?e:t)};let Lo=(()=>{class t{}return t.\u0275prov=S({token:t,providedIn:"root",factory:()=>null}),t})();class Fo{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Mo=new Fo("12.1.3");class Vo{constructor(){}supports(t){return _s(t)}create(t){return new Uo(t)}}const jo=(t,e)=>e;class Uo{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||jo}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const s=!n||e&&e.currentIndex<zo(n,r,i)?e:n,o=zo(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(e=e._next,null==s.previousIndex)r++;else{i||(i=[]);const t=o-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;e<=s&&s<t&&(i[n]=r+1)}i[s.previousIndex]=e-t}}o!==a&&t(s,o,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!_s(t))throw new Error(`Error trying to diff '${f(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),s=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[ys()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),s=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new qo(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Go),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Go),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class qo{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Bo{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Go{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Bo,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function zo(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Ho{constructor(){}supports(t){return t instanceof Map||bs(t)}create(){return new $o}}class $o{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||bs(t)))throw new Error(`Error trying to diff '${f(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Ko(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Ko{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Qo(){return new Zo([new Vo])}let Zo=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Qo()),deps:[[t,new Sn,new wn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=S({token:t,providedIn:"root",factory:Qo}),t})();function Wo(){return new Jo([new Ho])}let Jo=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Wo()),deps:[[t,new Sn,new wn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=S({token:t,providedIn:"root",factory:Wo}),t})();function Yo(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(kt(s)),dt(s))for(let t=ht;t<s.length;t++){const e=s[t],n=e[1].firstChild;null!==n&&Yo(e[1],e,n,r)}const o=n.type;if(8&o)Yo(t,e,n.child,r);else if(32&o){const t=vr(n,e);let i;for(;i=t();)r.push(i)}else if(16&o){const t=Lr(e,n);if(Array.isArray(t))r.push(...t);else{const n=_r(e[16]);Yo(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Xo{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Yo(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(dt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Ir(t,n),on(e,n))}this._attachedToViewContainer=!1}Ar(this._lView[1],this._lView)}onDestroy(t){bi(this._lView[1],this._lView,null,t)}markForCheck(){Vi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ji(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Zt(!0);try{ji(t,e,n)}finally{Zt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Vr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class ta extends Xo{constructor(t){super(t),this._view=t}detectChanges(){Ui(this._view)}checkNoChanges(){!function(t){Zt(!0);try{Ui(t)}finally{Zt(!1)}}(this._view)}get context(){return null}}const ea=function(t){return function(t,e,n){if(gt(t)&&!n){const n=Pt(t.index,e);return new Xo(n,n)}return 47&t.type?new Xo(e[16],e):null}(zt(),qt(),16==(16&t))};let na=(()=>{class t{}return t.__NG_ELEMENT_ID__=ea,t})();const ra=[new Ho],ia=new Zo([new Vo]),sa=new Jo(ra),oa=function(){return la(zt(),qt())};let aa=(()=>{class t{}return t.__NG_ELEMENT_ID__=oa,t})();const ua=aa,ca=class extends ua{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=ci(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),fi(e,n,t),new Xo(n)}};function la(t,e){return 4&t.type?new ca(e,t,xo(t,e)):null}class ha{}class fa{}const da=function(){return _a(zt(),qt())};let pa=(()=>{class t{}return t.__NG_ELEMENT_ID__=da,t})();const ga=pa,ma=class extends ga{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return xo(this._hostTNode,this._hostLView)}get injector(){return new Ke(this._hostTNode,this._hostLView)}get parentInjector(){const t=Le(this._hostTNode,this._hostLView);if(Ie(t)){const e=xe(t,this._hostLView),n=Ae(t);return new Ke(e[1].data[n+8],e)}return new Ke(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=ya(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ht}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const s=n||this.parentInjector;if(!i&&null==t.ngModule&&s){const t=s.get(ha,null);t&&(i=t)}const o=t.create(s,r,void 0,i);return this.insert(o.hostView,e),o}insert(t,e){const n=t._lView,r=n[1];if(dt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new ma(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),s=this._lContainer;!function(t,e,n,r){const i=ht+r,s=n.length;r>0&&(n[i-1][4]=e),r<s-ht?(e[4]=n[i],sn(n,ht+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,s,i);const o=Fr(i,s),a=n[11],u=Or(a,s[7]);return null!==u&&function(t,e,n,r,i,s){r[0]=i,r[6]=e,Vr(t,r,n,1,i,s)}(r,s[6],a,n,u,o),t.attachToViewContainerRef(),sn(va(s),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=ya(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Ir(this._lContainer,e);n&&(on(va(this._lContainer),e),Ar(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Ir(this._lContainer,e);return n&&null!=on(va(this._lContainer),e)?new Xo(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function ya(t){return t[8]}function va(t){return t[8]||(t[8]=[])}function _a(t,e){let n;const r=e[t.index];if(dt(r))n=r;else{let i;if(8&t.type)i=kt(r);else{const n=e[11];i=n.createComment("");const r=Nt(t,e);kr(n,Or(n,r),i,function(t,e){return At(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Pi(r,e,i,t),Mi(e,n)}return new ma(n,t,e)}const ba={};class wa extends Io{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ut(t);return new Ta(e,this.ngModule)}}function Sa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Ea=new Xe("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>gr});class Ta extends To{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Yr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Sa(this.componentDef.inputs)}get outputs(){return Sa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const s=t.get(n,ba,i);return s!==ba||r===ba?s:e.get(n,r,i)}}}(t,r.injector):t,s=i.get(Oo,xt),o=i.get(Lo,null),a=s.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(At(t))return t.selectRootElement(e,n===M.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Tr(s.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:gr,clean:Bi,playerHandler:null,flags:0},f=_i(0,null,null,1,0,null,null,null,null,null),d=ci(null,f,h,l,null,null,s,a,o,i);let p,g;ie(d);try{const t=function(t,e,n,r,i,s){const o=n[1];n[20]=t;const a=li(o,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Ki(a,u,!0),null!==t&&(we(i,t,u),null!==a.classes&&qr(i,t,a.classes),null!==a.styles&&Ur(i,t,a.styles)));const c=r.createRenderer(t,e),l=ci(n,vi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return o.firstCreatePass&&(Fe(Oe(a,n),o,e.type),Ii(o,a),xi(a,n.length,1)),Mi(n,l),n[20]=l}(c,this.componentDef,d,s,a);if(c)if(n)we(a,c,["ng-version",Mo.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Qr(i))break;i=s}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&we(a,c,t),e&&e.length>0&&qr(a,c,e.join(" "))}if(g=Ot(f,lt),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const s=n[1],o=function(t,e,n){const r=zt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),ki(t,r,e,hi(t,e,1,null),n));const i=ze(e,t,r.directiveStart,r);lr(i,e);const s=Nt(r,e);return s&&lr(s,e),i}(s,n,e);if(r.components.push(o),t[8]=o,i&&i.forEach(t=>t(o,e)),e.contentQueries){const t=zt();e.contentQueries(1,o,t.directiveStart)}const a=zt();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(he(a.index),Ti(n[1],a,0,a.directiveStart,a.directiveEnd,e),Ci(e,o)),o}(t,this.componentDef,d,h,[ls]),fi(f,d,null)}finally{ce()}return new Ca(this.componentType,p,xo(g,d),d,g)}}class Ca extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new ta(r),this.componentType=t}get injector(){return new Ke(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Ia=new Map;class Aa extends ha{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new wa(this);const n=ct(t),r=t[Z]||null;r&&go(r),this._bootstrapComponents=mr(n.bootstrap),this._r3Injector=es(t,e,[{provide:ha,useValue:this},{provide:Io,useValue:this.componentFactoryResolver}],f(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=cs.THROW_IF_NOT_FOUND,n=N.Default){return t===cs||t===ha||t===Qi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class xa extends fa{constructor(t){super(),this.moduleType=t,null!==ct(t)&&function(t){const e=new Set;!function t(n){const r=ct(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${f(e)} vs ${f(e.name)}`)}(i,Ia.get(i),n),Ia.set(i,n));const s=mr(r.imports);for(const o of s)e.has(o)||(e.add(o),t(o))}(t)}(t)}create(t){return new Aa(this.moduleType,t)}}function ka(t,e){const n=Bt();let r;const i=t+lt;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new v("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=vt(r.type)),o=P(Ts);try{const t=De(!1),e=s();return De(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,qt(),i,e),e}finally{P(o)}}function Da(t,e,n,r){const i=t+lt,s=qt(),o=function(t,e){return t[e]}(s,i);return function(t,e){return vs.isWrapped(e)&&(e=vs.unwrap(e),t[jt.lFrame.bindingIndex]=Xr),e}(s,function(t,e){return t[1].data[e].pure}(s,i)?function(t,e,n,r,i,s,o){const a=e+n;return function(t,e,n,r){const i=ws(t,e,n);return ws(t,e+1,r)||i}(t,a,i,s)?function(t,e,n){return t[e]=n}(t,a+2,o?r.call(o,i,s):r(i,s)):function(t,e){const n=t[e];return n===Xr?void 0:n}(t,a+2)}(s,function(){const t=jt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,o.transform,n,r,o):o.transform(n,r))}function Na(t){return e=>{setTimeout(t,void 0,e)}}const Oa=class extends r.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,s,o;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(s=e.error)||void 0===s?void 0:s.bind(e),c=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}this.__isAsync&&(u=Na(u),a&&(a=Na(a)),c&&(c=Na(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.w&&t.add(l),l}};function Pa(){return this._results[ys()]()}class Ra{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=ys(),n=Ra.prototype;n[e]||(n[e]=Pa)}get changes(){return this._changes||(this._changes=new Oa)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=nn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class La{constructor(t){this.queryList=t,this.matches=null}clone(){return new La(this.queryList)}setDirty(){this.queryList.setDirty()}}class Fa{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Fa(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Wa(t,e).matches&&this.queries[e].setDirty()}}class Ma{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Va{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Va(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class ja{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new ja(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Ua(e,i)),this.matchTNodeWithReadOption(t,e,Ge(e,t,i,!1,!1))}else n===aa?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ge(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Do||r===pa||r===aa&&4&e.type)this.addMatch(e.index,-2);else{const n=Ge(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Ua(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function qa(t,e,n,r){return-1===n?function(t,e){return 11&t.type?xo(t,e):4&t.type?la(t,e):null}(e,t):-2===n?function(t,e,n){return n===Do?xo(e,t):n===aa?la(e,t):n===pa?_a(e,t):void 0}(t,e,r):ze(t,t[1],n,e)}function Ba(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,s=n.matches,o=[];for(let t=0;t<s.length;t+=2){const i=s[t];o.push(i<0?null:qa(e,r[i],s[t+1],n.metadata.read))}i.matches=o}return i.matches}function Ga(t,e,n,r){const i=t.queries.getByIndex(n),s=i.matches;if(null!==s){const o=Ba(t,e,i,n);for(let t=0;t<s.length;t+=2){const n=s[t];if(n>0)r.push(o[t/2]);else{const i=s[t+1],o=e[-n];for(let t=ht;t<o.length;t++){const e=o[t];e[17]===e[3]&&Ga(e[1],e,i,r)}if(null!==o[9]){const t=o[9];for(let e=0;e<t.length;e++){const n=t[e];Ga(n[1],n,i,r)}}}}}return r}function za(t){const e=qt(),n=Bt(),r=te();ee(r+1);const i=Wa(n,r);if(t.dirty&&Rt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const s=i.crossesNgTemplate?Ga(n,e,r,[]):Ba(n,e,i,r);t.reset(s,No),t.notifyOnChanges()}return!0}return!1}function Ha(t,e,n){const r=Bt();r.firstCreatePass&&(Za(r,new Ma(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),Qa(r,qt(),e)}function $a(t,e,n,r){const i=Bt();if(i.firstCreatePass){const s=zt();Za(i,new Ma(e,n,r),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}Qa(i,qt(),n)}function Ka(){return t=qt(),e=te(),t[19].queries[e].queryList;var t,e}function Qa(t,e,n){const r=new Ra(4==(4&n));bi(t,e,r,r.destroy),null===e[19]&&(e[19]=new Fa),e[19].queries.push(new La(r))}function Za(t,e,n){null===t.queries&&(t.queries=new Va),t.queries.track(new ja(e,n))}function Wa(t,e){return t.queries.getByIndex(e)}const Ja=new Xe("Application Initializer");let Ya=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Ao,this.reject=Ao,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(Ns(e))t.push(e);else if(Ps(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(yn(Ja,8))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();const Xa=new Xe("AppId"),tu={provide:Xa,useFactory:function(){return`${eu()}${eu()}${eu()}`},deps:[]};function eu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const nu=new Xe("Platform Initializer"),ru=new Xe("Platform ID"),iu=new Xe("appBootstrapListener");let su=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();const ou=new Xe("LocaleId"),au=new Xe("DefaultCurrencyCode");class uu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const cu=function(t){return new xa(t)},lu=cu,hu=function(t){return Promise.resolve(cu(t))},fu=function(t){const e=cu(t),n=mr(ct(t).declarations).reduce((t,e)=>{const n=ut(e);return n&&t.push(new Ta(n)),t},[]);return new uu(e,n)},du=fu,pu=function(t){return Promise.resolve(fu(t))};let gu=(()=>{class t{constructor(){this.compileModuleSync=lu,this.compileModuleAsync=hu,this.compileModuleAndAllComponentsSync=du,this.compileModuleAndAllComponentsAsync=pu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();const mu=(()=>Promise.resolve(0))();function yu(t){"undefined"==typeof Zone?mu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class vu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Oa(!1),this.onMicrotaskEmpty=new Oa(!1),this.onStable=new Oa(!1),this.onError=new Oa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=B.requestAnimationFrame,e=B.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(B,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,wu(t),t.isCheckStableRunning=!0,bu(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),wu(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return Su(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),Eu(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return Su(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Eu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,wu(t),bu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!vu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(vu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,t,_u,Ao,Ao);try{return i.runTask(s,e,n)}finally{i.cancelTask(s)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const _u={};function bu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function wu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Su(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Eu(t){t._nesting--,bu(t)}class Tu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Oa,this.onMicrotaskEmpty=new Oa,this.onStable=new Oa,this.onError=new Oa}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Cu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{vu.assertNotInAngularZone(),yu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())yu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(yn(vu))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})(),Iu=(()=>{class t{constructor(){this._applications=new Map,Du.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Du.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();class Au{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function xu(t){Du=t}let ku,Du=new Au,Nu=!0,Ou=!1;function Pu(){return Ou=!0,Nu}function Ru(){if(Ou)throw new Error("Cannot enable prod mode after platform setup.");Nu=!1}const Lu=new Xe("AllowMultipleToken");class Fu{constructor(t,e){this.name=t,this.token=e}}function Mu(t,e,n=[]){const r=`Platform: ${e}`,i=new Xe(r);return(e=[])=>{let s=Vu();if(!s||s.injector.get(Lu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Wi,useValue:"platform"});!function(t){if(ku&&!ku.destroyed&&!ku.injector.get(Lu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ku=t.get(ju);const e=t.get(nu,null);e&&e.forEach(t=>t())}(cs.create({providers:t,name:r}))}return function(t){const e=Vu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Vu(){return ku&&!ku.destroyed?ku:null}let ju=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Tu:("zone.js"===t?void 0:t)||new vu({enableLongStackTrace:Pu(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:vu,useValue:n}];return n.run(()=>{const e=cs.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),s=i.injector.get(pr,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{s.handleError(t)}});i.onDestroy(()=>{Bu(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Ns(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(s,n,()=>{const t=i.injector.get(Ya);return t.runInitializers(),t.donePromise.then(()=>(go(i.injector.get(ou,fo)||fo),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Uu({},e);return function(t,e,n){const r=new xa(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(qu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${f(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(yn(cs))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();function Uu(t,e){return Array.isArray(e)?e.reduce(Uu,t):Object.assign(Object.assign({},t),e)}let qu=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new s.y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),h=new s.y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{vu.assertNotInAngularZone(),yu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{vu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=(0,o.T)(l,h.pipe(t=>{return(0,u.x)()((e=c,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,a.N);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof To?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ha),i=n.create(cs.NULL,[],e||n.selector,r),s=i.location.nativeElement,o=i.injector.get(Cu,null),a=o&&i.injector.get(Iu);return o&&a&&a.registerApplication(s,o),i.onDestroy(()=>{this.detachView(i.hostView),Bu(this.components,i),a&&a.unregisterApplication(s)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Bu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(iu,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(yn(vu),yn(cs),yn(pr),yn(Io),yn(Ya))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();function Bu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Gu{}class zu{}const Hu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let $u=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Hu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n(8255)(e).then(t=>t[r]).then(t=>Ku(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Ku(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(yn(gu),yn(zu,8))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();function Ku(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Qu=function(t){return null},Zu=Mu(null,"core",[{provide:ru,useValue:"unknown"},{provide:ju,deps:[cs]},{provide:Iu,deps:[]},{provide:su,deps:[]}]),Wu=[{provide:qu,useClass:qu,deps:[vu,cs,pr,Io,Ya]},{provide:Ea,deps:[vu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Ya,useClass:Ya,deps:[[new wn,Ja]]},{provide:gu,useClass:gu,deps:[]},tu,{provide:Zo,useFactory:function(){return ia},deps:[]},{provide:Jo,useFactory:function(){return sa},deps:[]},{provide:ou,useFactory:function(t){return go(t=t||"undefined"!=typeof $localize&&$localize.locale||fo),t},deps:[[new bn(ou),new wn,new Sn]]},{provide:au,useValue:"USD"}];let Ju=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(yn(qu))},t.\u0275mod=rt({type:t}),t.\u0275inj=E({providers:Wu}),t})()},57:(t,e,n)=>{"use strict";n.d(e,{hO:()=>I,xv:()=>_,Dh:()=>v,HU:()=>d,GT:()=>y,sI:()=>T,on:()=>w,ss:()=>p,pX:()=>m,yq:()=>S});var r=n(7771),i=n(3637),s=n(3342),o=n(3101),a=n(309),u=n(3018),c=n(2329);function l(){}t=n.hmd(t);class h{constructor(t,e=r.N){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe((0,s.b)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.z))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe((0,o.R)(t.outsideAngular),(0,a.QV)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{var i;if(t[s])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(s,t[s]),t[s];if(g.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(t=>{const e=t&&t[s];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>o[e],apply:(t,e,n)=>o.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(s,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.OlP("angularfire2.app.options"),_=new u.OlP("angularfire2.app.nameOrConfig"),b=new u.GfV("6.1.5");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const s=c.Z.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.Z.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(s.options)&&E("error",`${s.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(o){}return s}const S=()=>{E("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},E=(t,...e)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[t](...e)};function T(e,n,r,i,s){const[o,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(o){try{s.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&E("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return o}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...s]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const C={provide:class{},useFactory:w,deps:[v,u.R0b,[new u.FiY,_]]};let I=(()=>{class t{constructor(t){c.Z.registerVersion("angularfire",b.full,t.toString()),c.Z.registerVersion("angular",u.q4F.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:_,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(u.Lbi))},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({providers:[C]}),t})()},9759:(t,e,n)=>{"use strict";n.d(e,{Z:()=>w});var r,i,s=n(4762),o=n(4685),a=n(6034),u=n(300),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new o.LL("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Yd("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,o.p$)(t),this.container=new a.H0(e.name),this._addComponent(new a.wA("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=f),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var s=i;void 0===s.name&&(s.name=f);var a=s.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if((0,o.r3)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,s,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),u=e.match(/\s|\//);if(o||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}s(new a.wA(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.7.0",INTERNAL:{registerComponent:s,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!(0,o.r3)(e,t=t||f))throw l.create("no-app",{appName:t});return e[t]}function s(s){var a=s.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===s.type?r[a]:null;if(n.set(a,s),"PUBLIC"===s.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==s.serviceProps&&(0,o.ZB)(u,s.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,s.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(s);return"PUBLIC"===s.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=(0,s.pi)((0,s.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,o.ZB)(e,t)},createSubscribe:o.ne,ErrorFactory:o.LL,deepExtend:o.ZB}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if((0,o.jU)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var _=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,o.UG)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),_.apply(void 0,t)};var b=m;!function(t,e){t.INTERNAL.registerComponent(new a.wA("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.28",void 0),t.registerVersion("fire-js","")}(b);const w=b},6034:(t,e,n)=>{"use strict";n.d(e,{wA:()=>s,H0:()=>u});var r=n(4762),i=n(4685),s=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),o="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(s){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:o})}catch(h){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var a=(0,r.CR)(s.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=o),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var t;return(0,r.Jh)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),(0,r.CR)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=o),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,s=void 0===i?{}:i,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:s});try{for(var u=(0,r.XA)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.CR)(c.value,2),h=l[1];o===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(f){e={error:f}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var s=this.instances.get(r);return s&&t(s,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,s=this.onInitCallbacks.get(e);if(s)try{for(var o=(0,r.XA)(s),a=o.next();!a.done;a=o.next()){var u=a.value;try{u(t,e)}catch(c){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===o?void 0:e),options:i}),this.instances.set(n,s),this.invokeOnInitCallbacks(s,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(a){}return s||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=o),this.component?this.component.multipleInstances?t:o:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},300:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var i;n.d(e,{in:()=>o,Yd:()=>h,Ub:()=>f,Am:()=>d});var s=[],o=(()=>(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={})),o))(),a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var s=(new Date).toISOString(),o=c[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,r(["["+s+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){s.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=s;r<i.length;r++)n(i[r])}},4685:(t,e,n)=>{"use strict";n.d(e,{BH:()=>a,LL:()=>b,r3:()=>E,Sg:()=>u,ne:()=>T,p$:()=>s,ZB:()=>o,m9:()=>A,z$:()=>c,jU:()=>f,ru:()=>d,d:()=>g,w1:()=>m,uI:()=>l,UG:()=>h,b$:()=>p,G6:()=>v,Mn:()=>y});var r=n(4762),i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,o||(l=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){var o=((7&i)<<18|(63&(s=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(o>>10)),e[r++]=String.fromCharCode(56320+(1023&o))}else{s=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==o||null==a||null==u)throw Error();r.push(s<<2|o>>4),64!==a&&(r.push(o<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function s(t){return o(void 0,t)}function o(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=o(t[n],e[n]));return t}var a=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function u(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[i.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),i.encodeString(JSON.stringify(a),!1),""].join(".")}function c(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function l(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(c())}function h(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function f(){return"object"==typeof self&&self.self===self}function d(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function p(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function g(){return c().indexOf("Electron/")>=0}function m(){var t=c();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function y(){return c().indexOf("MSAppHost/")>=0}function v(){return!h()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var _=function(t){function e(n,r,i){var s=t.call(this,r)||this;return s.code=n,s.customData=i,s.name="FirebaseError",Object.setPrototypeOf(s,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,b.prototype.create),s}return(0,r.ZT)(e,t),e}(Error),b=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,s=this.errors[t],o=s?w(s,r):"Error",a=this.serviceName+": "+o+" ("+i+").",u=new _(i,a,r);return u},t}();function w(t,e){return t.replace(S,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var S=/\{\$([^}]+)}/g;function E(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function T(t,e){var n=new C(t,e);return n.subscribe.bind(n)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,s,o=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),s=1518500249):(i=a^u^c,s=1859775393):r<60?(i=a&u|c&(a|u),s=2400959708):(i=a^u^c,s=3395469782);var h=(o<<5|o>>>27)+i+l+s+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=o,o=h}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,s=this.inbuf_;r<e;){if(0===s)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[s]=t.charCodeAt(r),++r,++s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<e;)if(i[s]=t[r],++r,++s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();var C=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=I),void 0===r.error&&(r.error=I),void 0===r.complete&&(r.complete=I);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),s},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function I(){}function A(t){return t&&t._delegate?t._delegate:t}},2329:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r.Z});var r=n(9759),i="8.8.0";r.Z.registerVersion("firebase",i,"app"),r.Z.SDK_VERSION=i},7574:(t,e,n)=>{"use strict";n.d(e,{y:()=>c});var r=n(7393),i=n(9181),s=n(6490),o=n(6554),a=n(4487),u=n(2494);let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:o}=this,a=function(t,e,n){if(t){if(t instanceof r.L)return t;if(t[i.b])return t[i.b]()}return t||e||n?new r.L(t,e,n):new r.L(s.c)}(t,e,n);if(a.add(o?o.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.v.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.L?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[o.L](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},6490:(t,e,n)=>{"use strict";n.d(e,{c:()=>s});var r=n(2494),i=n(4449);const s={closed:!0,next(t){},error(t){if(r.v.useDeprecatedSynchronousErrorHandling)throw t;(0,i.z)(t)},complete(){}}},9765:(t,e,n)=>{"use strict";n.d(e,{Yc:()=>c,xQ:()=>l});var r=n(7574),i=n(7393),s=n(5319),o=n(7971),a=n(8858),u=n(9181);class c extends i.L{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new o.N;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new o.N;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new o.N;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new o.N;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new o.N;return this.hasError?(t.error(this.thrownError),s.w.EMPTY):this.isStopped?(t.complete(),s.w.EMPTY):(this.observers.push(t),new a.W(this,t))}asObservable(){const t=new r.y;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):s.w.EMPTY}}},8858:(t,e,n)=>{"use strict";n.d(e,{W:()=>i});var r=n(5319);class i extends r.w{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},7393:(t,e,n)=>{"use strict";n.d(e,{L:()=>c});var r=n(9105),i=n(6490),s=n(5319),o=n(9181),a=n(2494),u=n(4449);class c extends s.w{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!t){this.destination=i.c;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[o.b](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,s){let o;super(),this._parentSubscriber=t;let a=this;(0,r.m)(e)?o=e:e&&(o=e.next,n=e.error,s=e.complete,e!==i.c&&(a=Object.create(e),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=s}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):(0,u.z)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;(0,u.z)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(t,e,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},5319:(t,e,n)=>{"use strict";n.d(e,{w:()=>a});var r=n(9796),i=n(1555),s=n(9105);const o=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();class a{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:n,_unsubscribe:u,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof a)e.remove(this);else if(null!==e)for(let r=0;r<e.length;++r)e[r].remove(this);if((0,s.m)(u)){n&&(this._unsubscribe=void 0);try{u.call(this)}catch(h){t=h instanceof o?c(h.errors):[h]}}if((0,r.k)(l)){let e=-1,n=l.length;for(;++e<n;){const n=l[e];if((0,i.K)(n))try{n.unsubscribe()}catch(h){t=t||[],h instanceof o?t=t.concat(c(h.errors)):t.push(h)}}}if(t)throw new o(t)}add(t){let e=t;if(!t)return a.EMPTY;switch(typeof t){case"function":e=new a(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof a)){const t=e;e=new a,e._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:n}=e;if(null===n)e._parentOrParents=this;else if(n instanceof a){if(n===this)return e;e._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return e;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[e]:r.push(e),e}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var u;function c(t){return t.reduce((t,e)=>t.concat(e instanceof o?e.errors:e),[])}a.EMPTY=((u=new a).closed=!0,u)},2494:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},5345:(t,e,n)=>{"use strict";n.d(e,{IY:()=>o,Ds:()=>a,ft:()=>u});var r=n(7393),i=n(7574),s=n(7444);class o extends r.L{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.y)return t.subscribe(e);let n;try{n=(0,s.s)(t)(e)}catch(r){e.error(r)}return n}},2441:(t,e,n)=>{"use strict";n.d(e,{c:()=>a,N:()=>u});var r=n(9765),i=n(7574),s=n(5319),o=n(1307);class a extends i.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.w,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.w.EMPTY)),t}refCount(){return(0,o.x)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.Yc{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},9193:(t,e,n)=>{"use strict";n.d(e,{E:()=>i,c:()=>s});var r=n(7574);const i=new r.y(t=>t.complete());function s(t){return t?function(t){return new r.y(e=>t.schedule(()=>e.complete()))}(t):i}},4402:(t,e,n)=>{"use strict";n.d(e,{D:()=>h});var r=n(7574),i=n(7444),s=n(5319),o=n(6554),a=n(4087),u=n(377),c=n(4072),l=n(9489);function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[o.L]}(t))return function(t,e){return new r.y(n=>{const r=new s.w;return r.add(e.schedule(()=>{const i=t[o.L]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if((0,c.t)(t))return function(t,e){return new r.y(n=>{const r=new s.w;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if((0,l.z)(t))return(0,a.r)(t,e);if(function(t){return t&&"function"==typeof t[u.hZ]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new s.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.hZ](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.y?t:new r.y((0,i.s)(t))}},6693:(t,e,n)=>{"use strict";n.d(e,{n:()=>o});var r=n(7574),i=n(5015),s=n(4087);function o(t,e){return e?(0,s.r)(t,e):new r.y((0,i.V)(t))}},6682:(t,e,n)=>{"use strict";n.d(e,{T:()=>a});var r=n(7574),i=n(4869),s=n(3282),o=n(6693);function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return(0,i.K)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.y?t[0]:(0,s.J)(e)((0,o.n)(t,n))}},5917:(t,e,n)=>{"use strict";n.d(e,{of:()=>o});var r=n(4869),i=n(6693),s=n(4087);function o(...t){let e=t[t.length-1];return(0,r.K)(e)?(t.pop(),(0,s.r)(t,e)):(0,i.n)(t)}},8002:(t,e,n)=>{"use strict";n.d(e,{U:()=>i});var r=n(7393);function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(t,e))}}class s{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new o(t,this.project,this.thisArg))}}class o extends r.L{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},3282:(t,e,n)=>{"use strict";n.d(e,{J:()=>s});var r=n(9773),i=n(4487);function s(t=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,t)}},9773:(t,e,n)=>{"use strict";n.d(e,{zg:()=>o});var r=n(8002),i=n(4402),s=n(5345);function o(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?s=>s.pipe(o((n,s)=>(0,i.D)(t(n,s)).pipe((0,r.U)((t,r)=>e(n,t,s,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends s.Ds{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new s.IY(this),n=this.destination;n.add(e);const r=(0,s.ft)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(t,e,n)=>{"use strict";n.d(e,{ht:()=>l,QV:()=>u});var r=n(7393),i=n(9193),s=n(5917),o=n(7574);class a{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return(0,s.of)(this.value);case"E":return t=this.error,new o.y(e=>e.error(t));case"C":return(0,i.c)()}var t;throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new a("N",t):a.undefinedValueNotification}static createError(t){return new a("E",void 0,t)}static createComplete(){return a.completeNotification}}function u(t,e=0){return function(n){return n.lift(new c(t,e))}}a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",void 0);class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.L{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},1307:(t,e,n)=>{"use strict";n.d(e,{x:()=>i});var r=n(7393);function i(){return function(t){return t.lift(new s(t))}}class s{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new o(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class o extends r.L{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},3101:(t,e,n)=>{"use strict";n.d(e,{R:()=>p});var r=n(7574);let i=1;const s=Promise.resolve(),o={};function a(t){return t in o&&(delete o[t],!0)}const u={setImmediate(t){const e=i++;return o[e]=!0,s.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n(6465),l=n(6102);const h=new class extends l.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}(class extends c.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}});var f=n(9796);class d extends r.y{constructor(t,e=0,n=h){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,((0,f.k)(r=e)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=h)}static create(t,e=0,n=h){return new d(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(d.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function p(t,e=0){return function(n){return n.lift(new g(t,e))}}class g{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new d(e,this.delay,this.scheduler).subscribe(t)}}},3342:(t,e,n)=>{"use strict";n.d(e,{b:()=>o});var r=n(7393);function i(){}var s=n(9105);function o(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.L{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,(0,s.m)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},4087:(t,e,n)=>{"use strict";n.d(e,{r:()=>s});var r=n(7574),i=n(5319);function s(t,e){return new r.y(n=>{const r=new i.w;let s=0;return r.add(e.schedule(function(){s!==t.length?(n.next(t[s++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},6465:(t,e,n)=>{"use strict";n.d(e,{o:()=>s});var r=n(5319);class i extends r.w{constructor(t,e){super()}schedule(t,e=0){return this}}class s extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},6102:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},3637:(t,e,n)=>{"use strict";n.d(e,{z:()=>i});var r=n(6465);const i=new(n(6102).v)(r.o)},7771:(t,e,n)=>{"use strict";n.d(e,{c:()=>o,N:()=>s});var r=n(6465),i=n(6102);const s=new class extends i.v{}(class extends r.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}),o=s},377:(t,e,n)=>{"use strict";n.d(e,{hZ:()=>r});const r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(t,e,n)=>{"use strict";n.d(e,{L:()=>r});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(t,e,n)=>{"use strict";n.d(e,{b:()=>r});const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(t,e,n)=>{"use strict";n.d(e,{N:()=>r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},4449:(t,e,n)=>{"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,{z:()=>r})},4487:(t,e,n)=>{"use strict";function r(t){return t}n.d(e,{y:()=>r})},9796:(t,e,n)=>{"use strict";n.d(e,{k:()=>r});const r=Array.isArray||(t=>t&&"number"==typeof t.length)},9489:(t,e,n)=>{"use strict";n.d(e,{z:()=>r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},9105:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}n.d(e,{m:()=>r})},1555:(t,e,n)=>{"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,{K:()=>r})},4072:(t,e,n)=>{"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,{t:()=>r})},4869:(t,e,n)=>{"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,{K:()=>r})},7444:(t,e,n)=>{"use strict";n.d(e,{s:()=>l});var r=n(5015),i=n(4449),s=n(377),o=n(6554),a=n(9489),u=n(4072),c=n(1555);const l=t=>{if(t&&"function"==typeof t[o.L])return l=t,t=>{const e=l[o.L]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((0,a.z)(t))return(0,r.V)(t);if((0,u.t)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.z),t);if(t&&"function"==typeof t[s.hZ])return e=t,t=>{const n=e[s.hZ]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=(0,c.K)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},5015:(t,e,n)=>{"use strict";n.d(e,{V:()=>r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},5321:(t,e,n)=>{"use strict";var r=n(3018);let i=null;function s(){return i}const o=new r.OlP("DocumentToken");let a=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return(0,r.LFG)(l)}const c=new r.OlP("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(t){const e=s().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=s().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=(0,r.Yz7)({factory:f,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function f(){return new l((0,r.LFG)(o))}function d(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=(0,r.LFG)(o).location;return new _((0,r.LFG)(a),e&&e.origin||"")}const v=new r.OlP("appBaseHref");let _=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return d(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),b=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=d(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(E(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,E(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(m),r.LFG(a))},t.normalizeQueryParams=g,t.joinWithSlash=d,t.stripTrailingSlash=p,t.\u0275prov=(0,r.Yz7)({factory:S,token:t,providedIn:"root"}),t})();function S(){return new w((0,r.LFG)(m),(0,r.LFG)(a))}function E(t){return t.replace(/\/index.html$/,"")}var T=(()=>((T=T||{})[T.Zero=0]="Zero",T[T.One=1]="One",T[T.Two=2]="Two",T[T.Few=3]="Few",T[T.Many=4]="Many",T[T.Other=5]="Other",T))(),C=(()=>((C=C||{})[C.Format=0]="Format",C[C.Standalone=1]="Standalone",C))(),I=(()=>((I=I||{})[I.Narrow=0]="Narrow",I[I.Abbreviated=1]="Abbreviated",I[I.Wide=2]="Wide",I[I.Short=3]="Short",I))(),A=(()=>((A=A||{})[A.Short=0]="Short",A[A.Medium=1]="Medium",A[A.Long=2]="Long",A[A.Full=3]="Full",A))(),x=(()=>((x=x||{})[x.Decimal=0]="Decimal",x[x.Group=1]="Group",x[x.List=2]="List",x[x.PercentSign=3]="PercentSign",x[x.PlusSign=4]="PlusSign",x[x.MinusSign=5]="MinusSign",x[x.Exponential=6]="Exponential",x[x.SuperscriptingExponent=7]="SuperscriptingExponent",x[x.PerMille=8]="PerMille",x[x[1/0]=9]="Infinity",x[x.NaN=10]="NaN",x[x.TimeSeparator=11]="TimeSeparator",x[x.CurrencyDecimal=12]="CurrencyDecimal",x[x.CurrencyGroup=13]="CurrencyGroup",x))();function k(t,e){return L((0,r.cg1)(t)[r.wAp.DateFormat],e)}function D(t,e){return L((0,r.cg1)(t)[r.wAp.TimeFormat],e)}function N(t,e){return L((0,r.cg1)(t)[r.wAp.DateTimeFormat],e)}function O(t,e){const n=(0,r.cg1)(t),i=n[r.wAp.NumberSymbols][e];if(void 0===i){if(e===x.CurrencyDecimal)return n[r.wAp.NumberSymbols][x.Decimal];if(e===x.CurrencyGroup)return n[r.wAp.NumberSymbols][x.Group]}return i}const P=r.kL8;function R(t){if(!t[r.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[r.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function L(t,e){for(let n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function F(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const M=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,V={},j=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var U=(()=>((U=U||{})[U.Short=0]="Short",U[U.ShortGMT=1]="ShortGMT",U[U.Long=2]="Long",U[U.Extended=3]="Extended",U))(),q=(()=>((q=q||{})[q.FullYear=0]="FullYear",q[q.Month=1]="Month",q[q.Date=2]="Date",q[q.Hours=3]="Hours",q[q.Minutes=4]="Minutes",q[q.Seconds=5]="Seconds",q[q.FractionalSeconds=6]="FractionalSeconds",q[q.Day=7]="Day",q))(),B=(()=>((B=B||{})[B.DayPeriods=0]="DayPeriods",B[B.Days=1]="Days",B[B.Months=2]="Months",B[B.Eras=3]="Eras",B))();function G(t,e,n,r){let i=function(t){if(nt(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[e,n=1,r=1]=t.split("-").map(t=>+t);return z(e,n-1,r)}const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);let n;if(n=t.match(M))return function(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),c=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return s.call(e,o,a,u,c),e}(n)}const e=new Date(t);if(!nt(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=H(n,e)||e;let s,o=[];for(;e;){if(s=j.exec(e),!s){o.push(e);break}{o=o.concat(s.slice(1));const t=o.pop();if(!t)break;e=t}}let a=i.getTimezoneOffset();r&&(a=et(r,a),i=function(t,e,n){const r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(et(e,r)-r))}(i,r));let u="";return o.forEach(t=>{const e=function(t){if(tt[t])return tt[t];let e;switch(t){case"G":case"GG":case"GGG":e=Z(B.Eras,I.Abbreviated);break;case"GGGG":e=Z(B.Eras,I.Wide);break;case"GGGGG":e=Z(B.Eras,I.Narrow);break;case"y":e=Q(q.FullYear,1,0,!1,!0);break;case"yy":e=Q(q.FullYear,2,0,!0,!0);break;case"yyy":e=Q(q.FullYear,3,0,!1,!0);break;case"yyyy":e=Q(q.FullYear,4,0,!1,!0);break;case"Y":e=X(1);break;case"YY":e=X(2,!0);break;case"YYY":e=X(3);break;case"YYYY":e=X(4);break;case"M":case"L":e=Q(q.Month,1,1);break;case"MM":case"LL":e=Q(q.Month,2,1);break;case"MMM":e=Z(B.Months,I.Abbreviated);break;case"MMMM":e=Z(B.Months,I.Wide);break;case"MMMMM":e=Z(B.Months,I.Narrow);break;case"LLL":e=Z(B.Months,I.Abbreviated,C.Standalone);break;case"LLLL":e=Z(B.Months,I.Wide,C.Standalone);break;case"LLLLL":e=Z(B.Months,I.Narrow,C.Standalone);break;case"w":e=Y(1);break;case"ww":e=Y(2);break;case"W":e=Y(1,!0);break;case"d":e=Q(q.Date,1);break;case"dd":e=Q(q.Date,2);break;case"c":case"cc":e=Q(q.Day,1);break;case"ccc":e=Z(B.Days,I.Abbreviated,C.Standalone);break;case"cccc":e=Z(B.Days,I.Wide,C.Standalone);break;case"ccccc":e=Z(B.Days,I.Narrow,C.Standalone);break;case"cccccc":e=Z(B.Days,I.Short,C.Standalone);break;case"E":case"EE":case"EEE":e=Z(B.Days,I.Abbreviated);break;case"EEEE":e=Z(B.Days,I.Wide);break;case"EEEEE":e=Z(B.Days,I.Narrow);break;case"EEEEEE":e=Z(B.Days,I.Short);break;case"a":case"aa":case"aaa":e=Z(B.DayPeriods,I.Abbreviated);break;case"aaaa":e=Z(B.DayPeriods,I.Wide);break;case"aaaaa":e=Z(B.DayPeriods,I.Narrow);break;case"b":case"bb":case"bbb":e=Z(B.DayPeriods,I.Abbreviated,C.Standalone,!0);break;case"bbbb":e=Z(B.DayPeriods,I.Wide,C.Standalone,!0);break;case"bbbbb":e=Z(B.DayPeriods,I.Narrow,C.Standalone,!0);break;case"B":case"BB":case"BBB":e=Z(B.DayPeriods,I.Abbreviated,C.Format,!0);break;case"BBBB":e=Z(B.DayPeriods,I.Wide,C.Format,!0);break;case"BBBBB":e=Z(B.DayPeriods,I.Narrow,C.Format,!0);break;case"h":e=Q(q.Hours,1,-12);break;case"hh":e=Q(q.Hours,2,-12);break;case"H":e=Q(q.Hours,1);break;case"HH":e=Q(q.Hours,2);break;case"m":e=Q(q.Minutes,1);break;case"mm":e=Q(q.Minutes,2);break;case"s":e=Q(q.Seconds,1);break;case"ss":e=Q(q.Seconds,2);break;case"S":e=Q(q.FractionalSeconds,1);break;case"SS":e=Q(q.FractionalSeconds,2);break;case"SSS":e=Q(q.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=W(U.Short);break;case"ZZZZZ":e=W(U.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=W(U.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=W(U.Long);break;default:return null}return tt[t]=e,e}(t);u+=e?e(i,n,a):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function z(t,e,n){const r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function H(t,e){const n=function(t){return(0,r.cg1)(t)[r.wAp.LocaleId]}(t);if(V[n]=V[n]||{},V[n][e])return V[n][e];let i="";switch(e){case"shortDate":i=k(t,A.Short);break;case"mediumDate":i=k(t,A.Medium);break;case"longDate":i=k(t,A.Long);break;case"fullDate":i=k(t,A.Full);break;case"shortTime":i=D(t,A.Short);break;case"mediumTime":i=D(t,A.Medium);break;case"longTime":i=D(t,A.Long);break;case"fullTime":i=D(t,A.Full);break;case"short":const e=H(t,"shortTime"),n=H(t,"shortDate");i=$(N(t,A.Short),[e,n]);break;case"medium":const r=H(t,"mediumTime"),s=H(t,"mediumDate");i=$(N(t,A.Medium),[r,s]);break;case"long":const o=H(t,"longTime"),a=H(t,"longDate");i=$(N(t,A.Long),[o,a]);break;case"full":const u=H(t,"fullTime"),c=H(t,"fullDate");i=$(N(t,A.Full),[u,c])}return i&&(V[n][e]=i),i}function $(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(t,n){return null!=e&&n in e?e[n]:t})),t}function K(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.substr(o.length-e)),s+o}function Q(t,e,n=0,r=!1,i=!1){return function(s,o){let a=function(t,e){switch(t){case q.FullYear:return e.getFullYear();case q.Month:return e.getMonth();case q.Date:return e.getDate();case q.Hours:return e.getHours();case q.Minutes:return e.getMinutes();case q.Seconds:return e.getSeconds();case q.FractionalSeconds:return e.getMilliseconds();case q.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,s);if((n>0||a>-n)&&(a+=n),t===q.Hours)0===a&&-12===n&&(a=12);else if(t===q.FractionalSeconds)return u=e,K(a,3).substr(0,u);var u;const c=O(o,x.MinusSign);return K(a,e,c,r,i)}}function Z(t,e,n=C.Format,i=!1){return function(s,o){return function(t,e,n,i,s,o){switch(n){case B.Months:return function(t,e,n){const i=(0,r.cg1)(t),s=L([i[r.wAp.MonthsFormat],i[r.wAp.MonthsStandalone]],e);return L(s,n)}(e,s,i)[t.getMonth()];case B.Days:return function(t,e,n){const i=(0,r.cg1)(t),s=L([i[r.wAp.DaysFormat],i[r.wAp.DaysStandalone]],e);return L(s,n)}(e,s,i)[t.getDay()];case B.DayPeriods:const a=t.getHours(),u=t.getMinutes();if(o){const t=function(t){const e=(0,r.cg1)(t);return R(e),(e[r.wAp.ExtraData][2]||[]).map(t=>"string"==typeof t?F(t):[F(t[0]),F(t[1])])}(e),n=function(t,e,n){const i=(0,r.cg1)(t);R(i);const s=L([i[r.wAp.ExtraData][0],i[r.wAp.ExtraData][1]],e)||[];return L(s,n)||[]}(e,s,i),o=t.findIndex(t=>{if(Array.isArray(t)){const[e,n]=t,r=a>=e.hours&&u>=e.minutes,i=a<n.hours||a===n.hours&&u<n.minutes;if(e.hours<n.hours){if(r&&i)return!0}else if(r||i)return!0}else if(t.hours===a&&t.minutes===u)return!0;return!1});if(-1!==o)return n[o]}return function(t,e,n){const i=(0,r.cg1)(t),s=L([i[r.wAp.DayPeriodsFormat],i[r.wAp.DayPeriodsStandalone]],e);return L(s,n)}(e,s,i)[a<12?0:1];case B.Eras:return function(t,e){return L((0,r.cg1)(t)[r.wAp.Eras],e)}(e,i)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(s,o,t,e,n,i)}}function W(t){return function(e,n,r){const i=-1*r,s=O(n,x.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case U.Short:return(i>=0?"+":"")+K(o,2,s)+K(Math.abs(i%60),2,s);case U.ShortGMT:return"GMT"+(i>=0?"+":"")+K(o,1,s);case U.Long:return"GMT"+(i>=0?"+":"")+K(o,2,s)+":"+K(Math.abs(i%60),2,s);case U.Extended:return 0===r?"Z":(i>=0?"+":"")+K(o,2,s)+":"+K(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}function J(t){return z(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}function Y(t,e=!1){return function(n,r){let i;if(e){const t=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,e=n.getDate();i=1+Math.floor((e+t)/7)}else{const t=J(n),e=function(t){const e=z(t,0,1).getDay();return z(t,0,1+(e<=4?4:11)-e)}(t.getFullYear()),r=t.getTime()-e.getTime();i=1+Math.round(r/6048e5)}return K(i,t,O(r,x.MinusSign))}}function X(t,e=!1){return function(n,r){return K(J(n).getFullYear(),t,O(r,x.MinusSign),e)}}const tt={};function et(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function nt(t){return t instanceof Date&&!isNaN(t.valueOf())}class rt{}let it=(()=>{class t extends rt{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(P(e||this.locale)(t)){case T.Zero:return"zero";case T.One:return"one";case T.Two:return"two";case T.Few:return"few";case T.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.soG))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class st{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ot=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(sv){throw new Error(`Cannot find a differ supporting object '${e}' of type '${t=e,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new st(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new at(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const s=new at(t,i);e.push(s)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class at{constructor(t,e){this.record=t,this.view=e}}let ut=(()=>{class t{constructor(t){this.locale=t}transform(e,n="mediumDate",i,s){if(null==e||""===e||e!=e)return null;try{return G(e,n,s||this.locale,i)}catch(o){throw function(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,r.AaK)(t)}'`)}(t,o.message)}}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.soG,16))},t.\u0275pipe=r.Yjl({name:"date",type:t,pure:!0}),t})(),ct=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:rt,useClass:it}]}),t})(),lt=(()=>{class t{}return t.\u0275prov=(0,r.Yz7)({token:t,providedIn:"root",factory:()=>new ht((0,r.LFG)(o),window)}),t})();class ht{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=ft(this.window.history)||ft(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(sv){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(sv){return!1}}}function ft(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class dt extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new dt,i||(i=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(gt=gt||document.querySelector("base"),gt?gt.getAttribute("href"):null);return null==e?null:function(t){pt=pt||document.createElement("a"),pt.setAttribute("href",t);const e=pt.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){gt=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let pt,gt=null;const mt=new r.OlP("TRANSITION_ID"),yt=[{provide:r.ip1,useFactory:function(t,e,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[mt,o,r.zs3],multi:!0}];class vt{static init(){(0,r.VLi)(new vt)}addToWindow(t){r.dqk.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(t=>{const e=r.dqk.getAllAngularTestabilities();let n=e.length,i=!1;const s=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(s)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let _t=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const bt=new r.OlP("EventManagerPlugins");let wt=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(bt),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class St{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Et=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Tt=(()=>{class t extends Et{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(Ct),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ct))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function Ct(t){s().remove(t)}const It={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},At=/%COMP%/g;function xt(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?xt(t,i,n):(i=i.replace(At,t),n.push(i))}return n}function kt(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Dt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Nt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new Ot(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.ifc.ShadowDom:return new Pt(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=xt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(wt),r.LFG(Tt),r.LFG(r.AFp))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class Nt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(It[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=It[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=It[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.JOm.DashCase|r.JOm.Important)?t.style.setProperty(e,n,i&r.JOm.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,kt(n)):this.eventManager.addEventListener(t,e,kt(n))}}class Ot extends Nt{constructor(t,e,n,r){super(t),this.component=n;const i=xt(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(At,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(At,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Pt extends Nt{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=xt(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const t=document.createElement("style");t.textContent=i[s],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Rt=(()=>{class t extends St{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Lt=["alt","control","meta","shift"],Ft={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Mt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Vt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let jt=(()=>{class t extends St{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let s="";if(Lt.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),s+=t+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Mt.hasOwnProperty(e)&&(e=Mt[e]))}return Ft[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Lt.forEach(r=>{r!=n&&(0,Vt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Ut=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){dt.makeCurrent(),vt.init()},multi:!0},{provide:o,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),qt=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:bt,useClass:Rt,multi:!0,deps:[o,r.R0b,r.Lbi]},{provide:bt,useClass:jt,multi:!0,deps:[o]},[],{provide:Dt,useClass:Dt,deps:[wt,Tt,r.AFp]},{provide:r.FYo,useExisting:Dt},{provide:Et,useExisting:Tt},{provide:Tt,useClass:Tt,deps:[o]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:wt,useClass:wt,deps:[bt,r.R0b]},{provide:class{},useClass:_t,deps:[]},[]];let Bt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.AFp,useValue:e.appId},{provide:mt,useExisting:r.AFp},yt]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(t,12))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:qt,imports:[ct,r.hGG]}),t})();"undefined"!=typeof window&&window;var Gt=n(57);const zt={apiKey:"AIzaSyCmjJceAZRfUkyNSC4cST9wKBGWreTgiHU",authDomain:"notes-app-22361.firebaseapp.com",databaseURL:"https://notes-app-22361-default-rtdb.firebaseio.com",projectId:"notes-app-22361",storageBucket:"notes-app-22361.appspot.com",messagingSenderId:"962575260598",appId:"1:962575260598:web:cab8d6026afd4a99b23f17",measurementId:"G-QTS4GFV3K4"};var Ht=n(4402),$t=n(5917),Kt=n(9765),Qt=n(7971);class Zt extends Kt.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Qt.N;return this._value}next(t){super.next(this._value=t)}}var Wt=n(4869),Jt=n(9796),Yt=n(7393);class Xt extends Yt.L{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class te extends Yt.L{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var ee=n(7444),ne=n(7574);function re(t,e,n,r,i=new te(t,n,r)){if(!i.closed)return e instanceof ne.y?e.subscribe(i):(0,ee.s)(e)(i)}var ie=n(6693);const se={};class oe{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new ae(t,this.resultSelector))}}class ae extends Xt{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(se),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(re(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===se?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const ue=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var ce=n(3282);function le(...t){return(0,ce.J)(1)((0,$t.of)(...t))}var he=n(9193);function fe(t){return new ne.y(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?(0,Ht.D)(n):(0,he.c)()).subscribe(e)})}var de=n(2441),pe=n(8002),ge=n(5345);function me(t,e){return"function"==typeof e?n=>n.pipe(me((n,r)=>(0,Ht.D)(t(n,r)).pipe((0,pe.U)((t,i)=>e(n,t,r,i))))):e=>e.lift(new ye(t))}class ye{constructor(t){this.project=t}call(t,e){return e.subscribe(new ve(t,this.project))}}class ve extends ge.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new ge.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,ge.ft)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const _e=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function be(t){return e=>0===t?(0,he.c)():e.lift(new we(t))}class we{constructor(t){if(this.total=t,this.total<0)throw new _e}call(t,e){return e.subscribe(new Se(t,this.total))}}class Se extends Yt.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Ee(...t){const e=t[t.length-1];return(0,Wt.K)(e)?(t.pop(),n=>le(t,n,e)):e=>le(t,e)}function Te(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Ce(t,e,n))}}class Ce{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Ie(t,this.accumulator,this.seed,this.hasSeed))}}class Ie extends Yt.L{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Ae(t,e){return function(n){return n.lift(new xe(t,e))}}class xe{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new ke(t,this.predicate,this.thisArg))}}class ke extends Yt.L{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function De(t){return function(e){const n=new Ne(t),r=e.lift(n);return n.caught=r}}class Ne{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Oe(t,this.selector,this.caught))}}class Oe extends ge.Ds{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new ge.IY(this);this.add(r);const i=(0,ge.ft)(n,r);i!==r&&this.add(i)}}}var Pe=n(9773);function Re(t,e){return(0,Pe.zg)(t,e,1)}function Le(t){return function(e){return 0===t?(0,he.c)():e.lift(new Fe(t))}}class Fe{constructor(t){if(this.total=t,this.total<0)throw new _e}call(t,e){return e.subscribe(new Me(t,this.total))}}class Me extends Yt.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Ve(t=qe){return e=>e.lift(new je(t))}class je{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Ue(t,this.errorFactory))}}class Ue extends Yt.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(w_){t=w_}this.destination.error(t)}}}function qe(){return new ue}function Be(t=null){return e=>e.lift(new Ge(t))}class Ge{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new ze(t,this.defaultValue))}}class ze extends Yt.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var He=n(4487);function $e(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Ae((e,n)=>t(e,n,r)):He.y,be(1),n?Be(e):Ve(()=>new ue))}var Ke=n(3342),Qe=n(1307),Ze=n(5319);class We{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Je(t,this.callback))}}class Je extends Yt.L{constructor(t,e){super(t),this.add(new Ze.w(e))}}class Ye{constructor(t,e){this.id=t,this.url=e}}class Xe extends Ye{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class tn extends Ye{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class en extends Ye{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class nn extends Ye{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class rn extends Ye{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sn extends Ye{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class on extends Ye{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class an extends Ye{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class un extends Ye{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cn{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ln{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class hn{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fn{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dn{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pn{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gn{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const mn="primary";class yn{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function vn(t){return new yn(t)}function _n(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function bn(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const e=r[s],n=t[s];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function wn(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Sn(t[i],e[i]))return!1;return!0}function Sn(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function En(t){return Array.prototype.concat.apply([],t)}function Tn(t){return t.length>0?t[t.length-1]:null}function Cn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function In(t){return(0,r.CqO)(t)?t:(0,r.QGY)(t)?(0,Ht.D)(Promise.resolve(t)):(0,$t.of)(t)}const An={exact:function t(e,n,r){if(!Fn(e.segments,n.segments))return!1;if(!On(e.segments,n.segments,r))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i],r))return!1}return!0},subset:Dn},xn={exact:function(t,e){return wn(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Sn(t[n],e[n]))},ignored:()=>!0};function kn(t,e,n){return An[n.paths](t.root,e.root,n.matrixParams)&&xn[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function Dn(t,e,n){return Nn(t,e,e.segments,n)}function Nn(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!!Fn(i,n)&&!e.hasChildren()&&!!On(i,n,r)}if(t.segments.length===n.length){if(!Fn(t.segments,n))return!1;if(!On(t.segments,n,r))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Dn(t.children[n],e.children[n],r))return!1}return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!Fn(t.segments,i)&&!!On(t.segments,i,r)&&!!t.children.primary&&Nn(t.children.primary,e,s,r)}}function On(t,e,n){return e.every((e,r)=>xn[n](t[r].parameters,e.parameters))}class Pn{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vn(this.queryParams)),this._queryParamMap}toString(){return jn.serialize(this)}}class Rn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Cn(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Un(this)}}class Ln{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=vn(this.parameters)),this._parameterMap}toString(){return Kn(this)}}function Fn(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class Mn{}class Vn{parse(t){const e=new Yn(t);return new Pn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${qn(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Gn(e)}=${Gn(t)}`).join("&"):`${Gn(e)}=${Gn(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const jn=new Vn;function Un(t){return t.segments.map(t=>Kn(t)).join("/")}function qn(t,e){if(!t.hasChildren())return Un(t);if(e){const e=t.children.primary?qn(t.children.primary,!1):"",n=[];return Cn(t.children,(t,e)=>{e!==mn&&n.push(`${e}:${qn(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return Cn(t.children,(t,r)=>{r===mn&&(n=n.concat(e(t,r)))}),Cn(t.children,(t,r)=>{r!==mn&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===mn?[qn(t.children.primary,!1)]:[`${n}:${qn(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${Un(t)}/${e[0]}`:`${Un(t)}/(${e.join("//")})`}}function Bn(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Gn(t){return Bn(t).replace(/%3B/gi,";")}function zn(t){return Bn(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Hn(t){return decodeURIComponent(t)}function $n(t){return Hn(t.replace(/\+/g,"%20"))}function Kn(t){return`${zn(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${zn(t)}=${zn(e[t])}`).join("")}`;var e}const Qn=/^[^\/()?;=#]+/;function Zn(t){const e=t.match(Qn);return e?e[0]:""}const Wn=/^[^=?&#]+/,Jn=/^[^?&#]+/;class Yn{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Rn([],{}):new Rn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Rn(t,e)),n}parseSegment(){const t=Zn(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Ln(Hn(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Zn(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Zn(this.remaining);t&&(n=t,this.capture(n))}t[Hn(e)]=Hn(n)}parseQueryParam(t){const e=function(t){const e=t.match(Wn);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Jn);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=$n(e),i=$n(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Zn(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=mn);const s=this.parseChildren();e[i]=1===Object.keys(s).length?s.primary:new Rn([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Xn{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=tr(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=tr(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=er(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return er(t,this._root).map(t=>t.value)}}function tr(t,e){if(t===e.value)return e;for(const n of e.children){const e=tr(t,n);if(e)return e}return null}function er(t,e){if(t===e.value)return[e];for(const n of e.children){const r=er(t,n);if(r.length)return r.unshift(e),r}return[]}class nr{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function rr(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class ir extends Xn{constructor(t,e){super(t),this.snapshot=e,lr(this,t)}toString(){return this.snapshot.toString()}}function sr(t,e){const n=function(t,e){const n=new ur([],{},{},"",{},mn,e,null,t.root,-1,{});return new cr("",new nr(n,[]))}(t,e),r=new Zt([new Ln("",{})]),i=new Zt({}),s=new Zt({}),o=new Zt({}),a=new Zt(""),u=new or(r,i,o,a,s,mn,e,n.root);return u.snapshot=n.root,new ir(new nr(u,[]),n)}class or{constructor(t,e,n,r,i,s,o,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pe.U)(t=>vn(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pe.U)(t=>vn(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ar(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class ur{constructor(t,e,n,r,i,s,o,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=vn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class cr extends Xn{constructor(t,e){super(e),this.url=t,lr(this,e)}toString(){return hr(this._root)}}function lr(t,e){e.value._routerState=t,e.children.forEach(e=>lr(t,e))}function hr(t){const e=t.children.length>0?` { ${t.children.map(hr).join(", ")} } `:"";return`${t.value}${e}`}function fr(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,wn(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),wn(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!wn(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),wn(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function dr(t,e){return wn(t.params,e.params)&&function(t,e){return Fn(t,e)&&t.every((t,n)=>wn(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||dr(t.parent,e.parent))}function pr(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return pr(t,e,r);return pr(t,e)})}(t,e,n);return new nr(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return gr(e,t),t}}const n=new or(new Zt((r=e.value).url),new Zt(r.params),new Zt(r.queryParams),new Zt(r.fragment),new Zt(r.data),r.outlet,r.component,r),i=e.children.map(e=>pr(t,e));return new nr(n,i)}var r}function gr(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)gr(t.children[n],e.children[n])}function mr(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function yr(t){return"object"==typeof t&&null!=t&&t.outlets}function vr(t,e,n,r,i){let s={};return r&&Cn(r,(t,e)=>{s[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Pn(n.root===t?e:_r(n.root,t,e),s,i)}function _r(t,e,n){const r={};return Cn(t.children,(t,i)=>{r[i]=t===e?n:_r(t,e,n)}),new Rn(t.segments,r)}class br{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&mr(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(yr);if(r&&r!==Tn(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class wr{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Sr(t,e,n){if(t||(t=new Rn([],{})),0===t.segments.length&&t.hasChildren())return Er(t,e,n);const r=function(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const e=t.segments[i],o=n[r];if(yr(o))break;const a=`${o}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Ar(a,u,e))return s;r+=2}else{if(!Ar(a,{},e))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Rn(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Rn(t.segments.slice(r.pathIndex),t.children),Er(e,0,i)}return r.match&&0===i.length?new Rn(t.segments,{}):r.match&&!t.hasChildren()?Tr(t,e,n):r.match?Er(t,0,i):Tr(t,e,n)}function Er(t,e,n){if(0===n.length)return new Rn(t.segments,{});{const r=function(t){return yr(t[0])?t[0].outlets:{[mn]:t}}(n),i={};return Cn(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Sr(t.children[r],e,n))}),Cn(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Rn(t.segments,i)}}function Tr(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(yr(s)){const t=Cr(s.outlets);return new Rn(r,t)}if(0===i&&mr(n[0])){r.push(new Ln(t.segments[e].path,Ir(n[0]))),i++;continue}const o=yr(s)?s.outlets.primary:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&mr(a)?(r.push(new Ln(o,Ir(a))),i+=2):(r.push(new Ln(o,{})),i++)}return new Rn(r,{})}function Cr(t){const e={};return Cn(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Tr(new Rn([],{}),0,t))}),e}function Ir(t){const e={};return Cn(t,(t,n)=>e[n]=`${t}`),e}function Ar(t,e,n){return t==n.path&&wn(e,n.parameters)}class xr{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),fr(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=rr(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Cn(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=rr(t);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=rr(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new pn(t.value.snapshot))}),t.children.length&&this.forwardEvent(new fn(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(fr(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),kr(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function kr(t){fr(t.value),t.children.forEach(kr)}class Dr{constructor(t,e){this.routes=t,this.module=e}}function Nr(t){return"function"==typeof t}function Or(t){return t instanceof Pn}const Pr=Symbol("INITIAL_VALUE");function Rr(){return me(t=>function(...t){let e,n;return(0,Wt.K)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&(0,Jt.k)(t[0])&&(t=t[0]),(0,ie.n)(t,n).lift(new oe(e))}(t.map(t=>t.pipe(be(1),Ee(Pr)))).pipe(Te((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Pr)return t;if(r===Pr&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Or(r))return r}return t},t)},Pr),Ae(t=>t!==Pr),(0,pe.U)(t=>Or(t)?t:!0===t),be(1)))}let Lr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r._UZ(0,"router-outlet")},directives:function(){return[ki]},encapsulation:2}),t})();function Fr(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Mr(r,Vr(e,r))}}function Mr(t,e){t.children&&Fr(t.children,e)}function Vr(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function jr(t){const e=t.children&&t.children.map(jr),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==mn&&(n.component=Lr),n}function Ur(t){return t.outlet||mn}function qr(t,e){const n=t.filter(t=>Ur(t)===e);return n.push(...t.filter(t=>Ur(t)!==e)),n}const Br={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Gr(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Br):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||bn)(n,t,e);if(!i)return Object.assign({},Br);const s={};Cn(i.posParams,(t,e)=>{s[e]=t.path});const o=i.consumed.length>0?Object.assign(Object.assign({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function zr(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>Hr(t,e,n)&&Ur(n)!==mn)}(t,n,r)){const i=new Rn(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&Ur(s)!==mn){const n=new Rn([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Ur(s)]=n}return i}(t,e,r,new Rn(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Hr(t,e,n))}(t,n,r)){const s=new Rn(t.segments,function(t,e,n,r,i,s){const o={};for(const a of r)if(Hr(t,n,a)&&!i[Ur(a)]){const n=new Rn([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===s?t.segments.length:e.length,o[Ur(a)]=n}return Object.assign(Object.assign({},i),o)}(t,e,n,r,t.children,i));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const s=new Rn(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function Hr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function $r(t,e,n,r){return!!(Ur(t)===r||r!==mn&&Hr(e,n,t))&&("**"===t.path||Gr(e,t,n).matched)}function Kr(t,e,n){return 0===e.length&&!t.children[n]}class Qr{constructor(t){this.segmentGroup=t||null}}class Zr{constructor(t){this.urlTree=t}}function Wr(t){return new ne.y(e=>e.error(new Qr(t)))}function Jr(t){return new ne.y(e=>e.error(new Zr(t)))}function Yr(t){return new ne.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Xr{constructor(t,e,n,i,s){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(r.h0i)}apply(){const t=zr(this.urlTree.root,[],[],this.config).segmentGroup,e=new Rn(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,mn).pipe((0,pe.U)(t=>this.createUrlTree(ti(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(De(t=>{if(t instanceof Zr)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Qr)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,mn).pipe((0,pe.U)(e=>this.createUrlTree(ti(e),t.queryParams,t.fragment))).pipe(De(t=>{if(t instanceof Qr)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Rn([],{[mn]:t}):t;return new Pn(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe((0,pe.U)(t=>new Rn([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,Ht.D)(r).pipe(Re(r=>{const i=n.children[r],s=qr(e,r);return this.expandSegmentGroup(t,s,i,r).pipe((0,pe.U)(t=>({segment:t,outlet:r})))}),Te((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Ae((e,n)=>t(e,n,r)):He.y,Le(1),n?Be(e):Ve(()=>new ue))}())}expandSegment(t,e,n,r,i,s){return(0,Ht.D)(n).pipe(Re(o=>this.expandSegmentAgainstRoute(t,e,n,o,r,i,s).pipe(De(t=>{if(t instanceof Qr)return(0,$t.of)(null);throw t}))),$e(t=>!!t),De((t,n)=>{if(t instanceof ue||"EmptyError"===t.name){if(Kr(e,r,i))return(0,$t.of)(new Rn([],{}));throw new Qr(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,s,o){return $r(r,e,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s):Wr(e):Wr(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Jr(i):this.lineralizeSegments(n,i).pipe((0,Pe.zg)(n=>{const i=new Rn(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Gr(e,r,i);if(!o)return Wr(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Jr(l):this.lineralizeSegments(r,l).pipe((0,Pe.zg)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),s,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,$t.of)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe((0,pe.U)(t=>(n._loadedConfig=t,new Rn(r,{})))):(0,$t.of)(new Rn(r,{}));const{matched:s,consumedSegments:o,lastChild:a}=Gr(e,n,r);if(!s)return Wr(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe((0,Pe.zg)(t=>{const r=t.module,s=t.routes,{segmentGroup:a,slicedSegments:c}=zr(e,o,u,s),l=new Rn(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,s,l).pipe((0,pe.U)(t=>new Rn(o,t)));if(0===s.length&&0===c.length)return(0,$t.of)(new Rn(o,{}));const h=Ur(n)===i;return this.expandSegment(r,l,s,c,h?mn:i,!0).pipe((0,pe.U)(t=>new Rn(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?(0,$t.of)(new Dr(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,$t.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe((0,Pe.zg)(n=>n?this.configLoader.load(t.injector,e).pipe((0,pe.U)(t=>(e._loadedConfig=t,t))):function(t){return new ne.y(e=>e.error(_n(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):(0,$t.of)(new Dr([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return(0,$t.of)(!0);const i=r.map(r=>{const i=t.get(r);let s;if(function(t){return t&&Nr(t.canLoad)}(i))s=i.canLoad(e,n);else{if(!Nr(i))throw new Error("Invalid CanLoad guard");s=i(e,n)}return In(s)});return(0,$t.of)(i).pipe(Rr(),(0,Ke.b)(t=>{if(!Or(t))return;const e=_n(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(0,pe.U)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,$t.of)(n);if(r.numberOfChildren>1||!r.children.primary)return Yr(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Pn(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Cn(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let s={};return Cn(e.children,(e,i)=>{s[i]=this.createSegmentGroup(t,e,n,r)}),new Rn(i,s)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function ti(t){const e={};for(const n of Object.keys(t.children)){const r=ti(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Rn(t.segments.concat(e.segments),e.children)}return t}(new Rn(t.segments,e))}class ei{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class ni{constructor(t,e){this.component=t,this.route=e}}function ri(t,e,n){const r=t._root;return si(r,e?e._root:null,n,[r.value])}function ii(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function si(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=rr(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Fn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Fn(t.url,e.url)||!wn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!dr(t,e)||!wn(t.queryParams,e.queryParams);case"paramsChange":default:return!dr(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new ei(r)):(s.data=o.data,s._resolvedData=o._resolvedData),si(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ni(a.outlet.component,o))}else o&&oi(e,a,i),i.canActivateChecks.push(new ei(r)),si(t,null,s.component?a?a.children:null:n,r,i)}(t,s[t.value.outlet],n,r.concat([t.value]),i),delete s[t.value.outlet]}),Cn(s,(t,e)=>oi(t,n.getContext(e),i)),i}function oi(t,e,n){const r=rr(t),i=t.value;Cn(r,(t,r)=>{oi(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new ni(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class ai{}function ui(t){return new ne.y(e=>e.error(t))}class ci{constructor(t,e,n,r,i,s){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){const t=zr(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,mn);if(null===e)return null;const n=new ur([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},mn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new nr(n,e),i=new cr(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=ar(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],s=qr(t,i),o=this.processSegmentGroup(s,r,i);if(null===o)return null;n.push(...o)}const r=hi(n);return r.sort((t,e)=>t.value.outlet===mn?-1:e.value.outlet===mn?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return Kr(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!$r(t,e,n,r))return null;let i,s=[],o=[];if("**"===t.path){const r=n.length>0?Tn(n).parameters:{};i=new ur(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,pi(t),Ur(t),t.component,t,fi(e),di(e)+n.length,gi(t))}else{const r=Gr(e,t,n);if(!r.matched)return null;s=r.consumedSegments,o=n.slice(r.lastChild),i=new ur(s,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,pi(t),Ur(t),t.component,t,fi(e),di(e)+s.length,gi(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=zr(e,s,o,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new nr(i,t)]}if(0===a.length&&0===c.length)return[new nr(i,[])];const l=Ur(t)===r,h=this.processSegment(a,u,c,l?mn:r);return null===h?null:[new nr(i,h)]}}function li(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function hi(t){const e=[],n=new Set;for(const r of t){if(!li(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=hi(r.children);e.push(new nr(r.value,t))}return e.filter(t=>!n.has(t))}function fi(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function di(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function pi(t){return t.data||{}}function gi(t){return t.resolve||{}}function mi(t){return me(e=>{const n=t(e);return n?(0,Ht.D)(n).pipe((0,pe.U)(()=>e)):(0,$t.of)(e)})}class yi extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const vi=new r.OlP("ROUTES");class _i{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe((0,pe.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new Dr(En(i.injector.get(vi,void 0,r.XFs.Self|r.XFs.Optional)).map(jr),i)}),De(t=>{throw e._loader$=void 0,t}));return e._loader$=new de.c(n,()=>new Kt.xQ).pipe((0,Qe.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,Ht.D)(this.loader.load(t)):In(t()).pipe((0,Pe.zg)(t=>t instanceof r.YKP?(0,$t.of)(t):(0,Ht.D)(this.compiler.compileModuleAsync(t))))}}class bi{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new wi,this.attachRef=null}}class wi{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new bi,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Si{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Ei(t){throw t}function Ti(t,e,n){return e.parse("/")}function Ci(t,e){return(0,$t.of)(null)}const Ii={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ai={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let xi=(()=>{class t{constructor(t,e,n,i,s,o,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Kt.xQ,this.errorHandler=Ei,this.malformedUriErrorHandler=Ti,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ci,afterPreactivation:Ci},this.urlHandlingStrategy=new Si,this.routeReuseStrategy=new yi,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(r.h0i),this.console=s.get(r.c2e);const c=s.get(r.R0b);this.isNgZoneEnabled=c instanceof r.R0b&&r.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Pn(new Rn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new _i(o,a,t=>this.triggerEvent(new cn(t)),t=>this.triggerEvent(new ln(t))),this.routerState=sr(this.currentUrlTree,this.rootComponentType),this.transitions=new Zt({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const e=this.events;return t.pipe(Ae(t=>0!==t.id),(0,pe.U)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),me(t=>{let n=!1,r=!1;return(0,$t.of)(t).pipe((0,Ke.b)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),me(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return(0,$t.of)(t).pipe(me(t=>{const n=this.transitions.getValue();return e.next(new Xe(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?he.E:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,o=this.config,me(t=>function(t,e,n,r,i){return new Xr(t,e,n,r,i).apply()}(r,i,s,t.extractedUrl,o).pipe((0,pe.U)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),(0,Ke.b)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return(0,Pe.zg)(s=>function(t,e,n,r,i="emptyOnly",s="legacy"){try{const o=new ci(t,e,n,r,i,s).recognize();return null===o?ui(new ai):(0,$t.of)(o)}catch(w_){return ui(w_)}}(t,e,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe((0,pe.U)(t=>Object.assign(Object.assign({},s),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ke.b)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,t),this.browserUrlTree=t.urlAfterRedirects);const n=new rn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,s,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:o}=t,a=new Xe(n,this.serializeUrl(r),i,s);e.next(a);const u=sr(r,this.rootComponentType).snapshot;return(0,$t.of)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),he.E}),mi(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,Ke.b)(t=>{const e=new sn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(0,pe.U)(t=>Object.assign(Object.assign({},t),{guards:ri(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return(0,Pe.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?(0,$t.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return(0,Ht.D)(t).pipe((0,Pe.zg)(t=>function(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,$t.of)(!0);const o=s.map(s=>{const o=ii(s,e,i);let a;if(function(t){return t&&Nr(t.canDeactivate)}(o))a=In(o.canDeactivate(t,e,n,r));else{if(!Nr(o))throw new Error("Invalid CanDeactivate guard");a=In(o(t,e,n,r))}return a.pipe($e())});return(0,$t.of)(o).pipe(Rr())}(t.component,t.route,n,e,r)),$e(t=>!0!==t,!0))}(o,r,i,t).pipe((0,Pe.zg)(n=>n&&function(t){return"boolean"==typeof t}(n)?function(t,e,n,r){return(0,Ht.D)(e).pipe(Re(e=>le(function(t,e){return null!==t&&e&&e(new hn(t)),(0,$t.of)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new dn(t)),(0,$t.of)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>fe(()=>{const i=e.guards.map(i=>{const s=ii(i,e.node,n);let o;if(function(t){return t&&Nr(t.canActivateChild)}(s))o=In(s.canActivateChild(r,t));else{if(!Nr(s))throw new Error("Invalid CanActivateChild guard");o=In(s(r,t))}return o.pipe($e())});return(0,$t.of)(i).pipe(Rr())}));return(0,$t.of)(i).pipe(Rr())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,$t.of)(!0);const i=r.map(r=>fe(()=>{const i=ii(r,e,n);let s;if(function(t){return t&&Nr(t.canActivate)}(i))s=In(i.canActivate(e,t));else{if(!Nr(i))throw new Error("Invalid CanActivate guard");s=In(i(e,t))}return s.pipe($e())}));return(0,$t.of)(i).pipe(Rr())}(t,e.route,n))),$e(t=>!0!==t,!0))}(r,s,t,e):(0,$t.of)(n)),(0,pe.U)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),(0,Ke.b)(t=>{if(Or(t.guardsResult)){const e=_n(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new on(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Ae(t=>!!t.guardsResult||(this.cancelNavigationTransitionRestoreHistory(t,""),!1)),mi(t=>{if(t.guards.canActivateChecks.length)return(0,$t.of)(t).pipe((0,Ke.b)(t=>{const e=new an(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),me(t=>{let e=!1;return(0,$t.of)(t).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,(0,Pe.zg)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,$t.of)(t);let s=0;return(0,Ht.D)(i).pipe(Re(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return(0,$t.of)({});const s={};return(0,Ht.D)(i).pipe((0,Pe.zg)(i=>function(t,e,n,r){const i=ii(t,e,r);return In(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe((0,Ke.b)(t=>{s[i]=t}))),Le(1),(0,Pe.zg)(()=>Object.keys(s).length===i.length?(0,$t.of)(s):he.E))}(t._resolve,t,e,r).pipe((0,pe.U)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),ar(t,n).resolve),null)))}(t.route,e,n,r)),(0,Ke.b)(()=>s++),Le(1),(0,Pe.zg)(e=>s===i.length?(0,$t.of)(t):he.E))})),(0,Ke.b)({next:()=>e=!0,complete:()=>{e||this.cancelNavigationTransitionRestoreHistory(t,"At least one route resolver didn't emit any value.")}}));var n,r}),(0,Ke.b)(t=>{const e=new un(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),mi(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,pe.U)(t=>{const e=function(t,e,n){const r=pr(t,e._root,n?n._root:void 0);return new ir(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),(0,Ke.b)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,t),this.browserUrlTree=t.urlAfterRedirects)}),(s=this.rootContexts,o=this.routeReuseStrategy,a=t=>this.triggerEvent(t),(0,pe.U)(t=>(new xr(o,t.targetRouterState,t.currentRouterState,a).activate(s),t))),(0,Ke.b)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){const e=`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?this.cancelNavigationTransitionRestoreHistory(t,e):this.cancelNavigationTransition(t,e)}this.currentNavigation=null},t=>t.lift(new We(i))),De(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Or(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new en(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new nn(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(zl){t.reject(zl)}}var i;return he.E}));var i,s,o,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,delete t.\u0275routerPageId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Fr(t),this.config=t.map(jr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:s,preserveFragment:o}=e,a=n||this.routerState.root,u=o?this.currentUrlTree.fragment:i;let c=null;switch(s){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return vr(e.root,e.root,e,r,i);const s=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new br(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Cn(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new br(n,e,r)}(n);if(s.toRoot())return vr(e.root,new Rn([],{}),e,r,i);const o=function(t,e,n){if(t.isAbsolute)return new wr(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new wr(t,t===e.root,0)}const r=mr(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new wr(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(s,e,t),a=o.processChildren?Er(o.segmentGroup,o.index,s.commands):Sr(o.segmentGroup,o.index,s.commands);return vr(o.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,null!=u?u:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=Or(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(w_){e=this.malformedUriErrorHandler(w_,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},Ii):!1===e?Object.assign({},Ai):e,Or(t))return kn(this.currentUrlTree,t,n);const r=this.parseUrl(t);return kn(this.currentUrlTree,r,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new tn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){var s,o;if(this.disposed)return Promise.resolve(!1);const a=this.getTransition(),u="imperative"!==e&&"imperative"===(null==a?void 0:a.source),c=(this.lastSuccessfulId===a.id||this.currentNavigation?a.rawUrl:a.urlAfterRedirects).toString()===t.toString();if(u&&c)return Promise.resolve(!0);let l,h,f;i?(l=i.resolve,h=i.reject,f=i.promise):f=new Promise((t,e)=>{l=t,h=e});const d=++this.navigationId;let p;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),p=n&&n.\u0275routerPageId?n.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(s=this.browserPageId)&&void 0!==s?s:0:(null!==(o=this.browserPageId)&&void 0!==o?o:0)+1):p=0,this.setTransition({id:d,targetPageId:p,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:l,reject:h,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(t=>Promise.reject(t))}setBrowserUrl(t,e){const n=this.urlSerializer.serialize(t),r=Object.assign(Object.assign({},e.extras.state),this.generateNgRouterState(e.id,e.targetPageId));this.location.isCurrentPathEqualTo(n)||e.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransitionRestoreHistory(t,e){"computed"===this.canceledNavigationResolution?"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy||this.location.historyGo(this.currentPageId-t.targetPageId):this.resetUrlToCurrentUrlTree(),this.cancelNavigationTransition(t,e)}cancelNavigationTransition(t,e){const n=new en(t.id,this.serializeUrl(t.extractedUrl),e);this.triggerEvent(n),t.resolve(!1)}generateNgRouterState(t,e){return"computed"===this.canceledNavigationResolution?{navigationId:t,"\u0275routerPageId":e}:{navigationId:t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.DyG),r.LFG(Mn),r.LFG(wi),r.LFG(w),r.LFG(r.zs3),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),ki=(()=>{class t{constructor(t,e,n,i,s){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.vpe,this.deactivateEvents=new r.vpe,this.name=i||mn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Di(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(wi),r.Y36(r.s_b),r.Y36(r._Vd),r.$8M("name"),r.Y36(r.sBO))},t.\u0275dir=r.lG2({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Di{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===or?this.route:t===wi?this.childContexts:this.parent.get(t,e)}}class Ni{}class Oi{preload(t,e){return(0,$t.of)(null)}}let Pi=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new _i(e,n,e=>t.triggerEvent(new cn(e)),e=>t.triggerEvent(new ln(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ae(t=>t instanceof tn),Re(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return(0,Ht.D)(n).pipe((0,ce.J)(),(0,pe.U)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?(0,$t.of)(e._loadedConfig):this.loader.load(t.injector,e)).pipe((0,Pe.zg)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(xi),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(r.zs3),r.LFG(Ni))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Ri=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Xe?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof tn&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof gn&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new gn(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(xi),r.LFG(lt),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Li=new r.OlP("ROUTER_CONFIGURATION"),Fi=new r.OlP("ROUTER_FORROOT_GUARD"),Mi=[w,{provide:Mn,useClass:Vn},{provide:xi,useFactory:function(t,e,n,r,i,s,o,a={},u,c){const l=new xi(null,t,e,n,r,i,s,En(o));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[Mn,wi,w,r.zs3,r.v3s,r.Sil,vi,Li,[class{},new r.FiY],[class{},new r.FiY]]},wi,{provide:or,useFactory:function(t){return t.routerState.root},deps:[xi]},{provide:r.v3s,useClass:r.EAV},Pi,Oi,class{preload(t,e){return e().pipe(De(()=>(0,$t.of)(null)))}},{provide:Li,useValue:{enableTracing:!1}}];function Vi(){return new r.PXZ("Router",xi)}let ji=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Mi,Gi(e),{provide:Fi,useFactory:Bi,deps:[[xi,new r.FiY,new r.tp0]]},{provide:Li,useValue:n||{}},{provide:m,useFactory:qi,deps:[a,[new r.tBr(v),new r.FiY],Li]},{provide:Ri,useFactory:Ui,deps:[xi,lt,Li]},{provide:Ni,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Oi},{provide:r.PXZ,multi:!0,useFactory:Vi},[zi,{provide:r.ip1,multi:!0,useFactory:Hi,deps:[zi]},{provide:Ki,useFactory:$i,deps:[zi]},{provide:r.tb,multi:!0,useExisting:Ki}]]}}static forChild(e){return{ngModule:t,providers:[Gi(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Fi,8),r.LFG(xi,8))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();function Ui(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Ri(t,e,n)}function qi(t,e,n={}){return n.useHash?new b(t,e):new _(t,e)}function Bi(t){return"guarded"}function Gi(t){return[{provide:r.deG,multi:!0,useValue:t},{provide:vi,multi:!0,useValue:t}]}let zi=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Kt.xQ}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let t=null;const e=new Promise(e=>t=e),n=this.injector.get(xi),r=this.injector.get(Li);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,$t.of)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(Li),n=this.injector.get(Pi),i=this.injector.get(Ri),s=this.injector.get(xi),o=this.injector.get(r.z2F);t===o.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||s.initialNavigation(),n.setUpPreloading(),i.init(),s.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.zs3))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function Hi(t){return t.appInitializer.bind(t)}function $i(t){return t.bootstrapListener.bind(t)}const Ki=new r.OlP("Router Initializer");var Qi=n(3637);function Zi(){return t=>t.lift(new Wi)}class Wi{call(t,e){return e.subscribe(new Ji(t))}}class Ji extends Yt.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}class Yi{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Xi(t,this.compare,this.keySelector))}}class Xi extends Yt.L{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var ts=n(309),es=n(2329),ns=n(9759),rs=n(4762),is=n(4685),ss=n(300),os=function(t,e){return(os=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function as(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var us,cs="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ls=ls||{},hs=cs||self;function fs(){}function ds(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function ps(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var gs="closure_uid_"+(1e9*Math.random()>>>0),ms=0;function ys(t,e,n){return t.call.apply(t.bind,arguments)}function vs(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _s(t,e,n){return(_s=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ys:vs).apply(null,arguments)}function bs(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function ws(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function Ss(){this.s=this.s,this.o=this.o}var Es={};Ss.prototype.s=!1,Ss.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,gs)&&t[gs]||(t[gs]=++ms)}(this);delete Es[t]}},Ss.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Ts=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Cs=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function Is(t){return Array.prototype.concat.apply([],arguments)}function As(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function xs(t){return/^[\s\xa0]*$/.test(t)}var ks,Ds=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Ns(t,e){return-1!=t.indexOf(e)}function Os(t,e){return t<e?-1:t>e?1:0}t:{var Ps=hs.navigator;if(Ps){var Rs=Ps.userAgent;if(Rs){ks=Rs;break t}}ks=""}function Ls(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Fs(t){var e={};for(var n in t)e[n]=t[n];return e}var Ms="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Vs(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var s=0;s<Ms.length;s++)n=Ms[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function js(t){return js[" "](t),t}js[" "]=fs;var Us,qs,Bs=Ns(ks,"Opera"),Gs=Ns(ks,"Trident")||Ns(ks,"MSIE"),zs=Ns(ks,"Edge"),Hs=zs||Gs,$s=Ns(ks,"Gecko")&&!(Ns(ks.toLowerCase(),"webkit")&&!Ns(ks,"Edge"))&&!(Ns(ks,"Trident")||Ns(ks,"MSIE"))&&!Ns(ks,"Edge"),Ks=Ns(ks.toLowerCase(),"webkit")&&!Ns(ks,"Edge");function Qs(){var t=hs.document;return t?t.documentMode:void 0}t:{var Zs="",Ws=(qs=ks,$s?/rv:([^\);]+)(\)|;)/.exec(qs):zs?/Edge\/([\d\.]+)/.exec(qs):Gs?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(qs):Ks?/WebKit\/(\S+)/.exec(qs):Bs?/(?:Version)[ \/]?(\S+)/.exec(qs):void 0);if(Ws&&(Zs=Ws?Ws[1]:""),Gs){var Js=Qs();if(null!=Js&&Js>parseFloat(Zs)){Us=String(Js);break t}}Us=Zs}var Ys={};var Xs=hs.document&&Gs&&(Qs()||parseInt(Us,10))||void 0,to=function(){if(!hs.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{hs.addEventListener("test",fs,e),hs.removeEventListener("test",fs,e)}catch(n){}return t}();function eo(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function no(t,e){if(eo.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if($s){t:{try{js(e.nodeName);var i=!0;break t}catch(s){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ro[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&no.Z.h.call(this)}}eo.prototype.h=function(){this.defaultPrevented=!0},ws(no,eo);var ro={2:"touch",3:"pen",4:"mouse"};no.prototype.h=function(){no.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var io="closure_listenable_"+(1e6*Math.random()|0),so=0;function oo(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++so,this.ca=this.fa=!1}function ao(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function uo(t){this.src=t,this.g={},this.h=0}function co(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],s=Ts(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(ao(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function lo(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==r)return i}return-1}uo.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=lo(t,e,r,i);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new oo(e,this.src,s,!!r,i)).fa=n,t.push(e)),e};var ho="closure_lm_"+(1e6*Math.random()|0),fo={};function po(t,e,n,r,i){if(r&&r.once)return mo(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)po(t,e[s],n,r,i);return null}return n=Eo(n),t&&t[io]?t.N(e,n,ps(r)?!!r.capture:!!r,i):go(t,e,n,!1,r,i)}function go(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=ps(i)?!!i.capture:!!i,a=wo(t);if(a||(t[ho]=a=new uo(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function(){var t=bo;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)to||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(_o(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function mo(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)mo(t,e[s],n,r,i);return null}return n=Eo(n),t&&t[io]?t.O(e,n,ps(r)?!!r.capture:!!r,i):go(t,e,n,!0,r,i)}function yo(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)yo(t,e[s],n,r,i);else r=ps(r)?!!r.capture:!!r,n=Eo(n),t&&t[io]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=lo(s=t.g[e],n,r,i))&&(ao(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=wo(t))&&(e=t.g[e.toString()],t=-1,e&&(t=lo(e,n,r,i)),(n=-1<t?e[t]:null)&&vo(n))}function vo(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[io])co(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(_o(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=wo(e))?(co(n,t),0==n.h&&(n.src=null,e[ho]=null)):ao(t)}}}function _o(t){return t in fo?fo[t]:fo[t]="on"+t}function bo(t,e){if(t.ca)t=!0;else{e=new no(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&vo(t),t=n.call(r,e)}return t}function wo(t){return(t=t[ho])instanceof uo?t:null}var So="__closure_events_fn_"+(1e9*Math.random()>>>0);function Eo(t){return"function"==typeof t?t:(t[So]||(t[So]=function(e){return t.handleEvent(e)}),t[So])}function To(){Ss.call(this),this.i=new uo(this),this.P=this,this.I=null}function Co(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new eo(e,t);else if(e instanceof eo)e.target=e.target||t;else{var i=e;Vs(e=new eo(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Io(o,r,!0,e)&&i}if(i=Io(o=e.g=t,r,!0,e)&&i,i=Io(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=Io(o=e.g=n[s],r,!1,e)&&i}function Io(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,u=o.ia||o.src;o.fa&&co(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}ws(To,Ss),To.prototype[io]=!0,To.prototype.removeEventListener=function(t,e,n,r){yo(this,t,e,n,r)},To.prototype.M=function(){if(To.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)ao(n[r]);delete e.g[t],e.h--}}this.I=null},To.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},To.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Ao=hs.JSON.stringify;function xo(){var t=Fo,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var ko,Do=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=No.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),No=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,this.g=(t=this.g).next,t.next=null):t=this.i(),t},t}())(function(){return new Oo},function(t){return t.reset()}),Oo=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function Po(t){hs.setTimeout(function(){throw t},0)}function Ro(t,e){ko||function(){var t=hs.Promise.resolve(void 0);ko=function(){t.then(Mo)}}(),Lo||(ko(),Lo=!0),Fo.add(t,e)}var Lo=!1,Fo=new Do;function Mo(){for(var t;t=xo();){try{t.h.call(t.g)}catch(n){Po(n)}var e=No;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Lo=!1}function Vo(t,e){To.call(this),this.h=t||1,this.g=e||hs,this.j=_s(this.kb,this),this.l=Date.now()}function jo(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Uo(t,e,n){if("function"==typeof t)n&&(t=_s(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_s(t.handleEvent,t)}return 2147483647<Number(e)?-1:hs.setTimeout(t,e||0)}function qo(t){t.g=Uo(function(){t.g=null,t.i&&(t.i=!1,qo(t))},t.j);var e=t.h;t.h=null,t.m.apply(null,e)}ws(Vo,To),(us=Vo.prototype).da=!1,us.S=null,us.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Co(this,"tick"),this.da&&(jo(this),this.start()))}},us.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},us.M=function(){Vo.Z.M.call(this),jo(this),delete this.g};var Bo=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}os(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:qo(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(hs.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(Ss);function Go(t){Ss.call(this),this.h=t,this.g={}}ws(Go,Ss);var zo=[];function Ho(t,e,n,r){Array.isArray(n)||(n&&(zo[0]=n.toString()),n=zo);for(var i=0;i<n.length;i++){var s=po(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function $o(t){Ls(t.g,function(t,e){this.g.hasOwnProperty(e)&&vo(t)},t),t.g={}}function Ko(){this.g=!0}function Qo(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Ao(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}Go.prototype.M=function(){Go.Z.M.call(this),$o(this)},Go.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ko.prototype.Aa=function(){this.g=!1},Ko.prototype.info=function(){};var Zo={},Wo=null;function Jo(){return Wo=Wo||new To}function Yo(t){eo.call(this,Zo.Ma,t)}function Xo(t){var e=Jo();Co(e,new Yo(e,t))}function ta(t,e){eo.call(this,Zo.STAT_EVENT,t),this.stat=e}function ea(t){var e=Jo();Co(e,new ta(e,t))}function na(t,e){eo.call(this,Zo.Na,t),this.size=e}function ra(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return hs.setTimeout(function(){t()},e)}Zo.Ma="serverreachability",ws(Yo,eo),Zo.STAT_EVENT="statevent",ws(ta,eo),Zo.Na="timingevent",ws(na,eo);var ia={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},sa={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function oa(){}function aa(){}oa.prototype.h=null;var ua,ca={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function la(){eo.call(this,"d")}function ha(){eo.call(this,"c")}function fa(){}function da(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Go(this),this.P=ga,this.W=new Vo(t=Hs?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new pa}function pa(){this.i=null,this.g="",this.h=!1}ws(la,eo),ws(ha,eo),ws(fa,oa),fa.prototype.g=function(){return new XMLHttpRequest},fa.prototype.i=function(){return{}},ua=new fa;var ga=45e3,ma={},ya={};function va(t,e,n){t.K=1,t.v=qa(La(e)),t.s=n,t.U=!0,_a(t,null)}function _a(t,e){t.F=Date.now(),Ea(t),t.A=La(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),tu(n.h,"t",r),t.C=0,n=t.l.H,t.h=new pa,t.g=ec(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Bo(_s(t.Ia,t,t.g),t.O)),Ho(t.V,t.g,"readystatechange",t.gb),e=t.H?Fs(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Xo(1),function(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.X,t.s)}function ba(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function wa(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=Sa(t,n))==ya){4==e&&(t.o=4,ea(14),i=!1),Qo(t.j,t.m,null,"[Incomplete Response]");break}if(r==ma){t.o=4,ea(15),Qo(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Qo(t.j,t.m,r,null),xa(t,r)}ba(t)&&r!=ya&&r!=ma&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,ea(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ku(e),e.L=!0,ea(11))):(Qo(t.j,t.m,n,"[Invalid Chunked Response]"),Aa(t),Ia(t))}function Sa(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?ya:(n=Number(e.substring(n,r)),isNaN(n)?ma:(r+=1)+n>e.length?ya:(e=e.substr(r,n),t.C=r+n,e))}function Ea(t){t.Y=Date.now()+t.P,Ta(t,t.P)}function Ta(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=ra(_s(t.eb,t),e)}function Ca(t){t.B&&(hs.clearTimeout(t.B),t.B=null)}function Ia(t){0==t.l.G||t.I||Wu(t.l,t)}function Aa(t){Ca(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,jo(t.W),$o(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function xa(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||au(n.i,t)))if(n.I=t.N,!t.J&&au(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(s){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Zu(n),Vu(n)}$u(n),ea(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=ra(_s(n.ab,n),6e3));if(1>=ou(n.i)&&n.ka){try{n.ka()}catch(s){}n.ka=void 0}}else Yu(n,11)}else if((t.J||n.g==t)&&Zu(n),!xs(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var s=i[e];if(n.U=s[0],s=s[1],2==n.G)if("c"==s[0]){n.J=s[1],n.la=s[2];var o=s[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var a=s[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=s[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(Ns(l,"spdy")||Ns(l,"quic")||Ns(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(uu(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Ua(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=t;if((r=n).oa=tc(r,r.H?r.la:null,r.W),d.J){cu(r.i,d);var p=d,g=r.K;g&&p.setTimeout(g),p.B&&(Ca(p),Ea(p)),r.g=d}else Hu(r);0<n.l.length&&qu(n)}else"stop"!=s[0]&&"close"!=s[0]||Yu(n,7);else 3==n.G&&("stop"==s[0]||"close"==s[0]?"stop"==s[0]?Yu(n,7):Mu(n):"noop"!=s[0]&&n.j&&n.j.wa(s),n.A=0)}Xo(4)}catch(s){}}function ka(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ds(t)||"string"==typeof t)Cs(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(ds(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(ds(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function Da(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Da)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Na(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Oa(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Oa(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Oa(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(us=da.prototype).setTimeout=function(t){this.P=t},us.gb=function(t){t=t.target;var e=this.L;e&&3==Ou(t)?e.l():this.Ia(t)},us.Ia=function(t){try{if(t==this.g)t:{var e=Ou(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||Hs||this.g&&(this.h.h||this.g.ga()||Pu(this.g)))){this.I||4!=e||7==n||Xo(8==n||0>=r?3:2),Ca(this);var i=this.g.ba();this.N=i;e:if(ba(this)){var s=Pu(this.g);t="";var o=s.length,a=4==Ou(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Aa(this),Ia(this);var u="";break e}this.h.i=new hs.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,t+=this.h.i.decode(s[n],{stream:a&&n==o-1});s.splice(0,o),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!xs(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,ea(12),Aa(this),Ia(this);break t}Qo(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,xa(this,i)}this.U?(wa(this,e,u),Hs&&this.i&&3==e&&(Ho(this.V,this.W,"tick",this.fb),this.W.start())):(Qo(this.j,this.m,u,null),xa(this,u)),4==e&&Aa(this),this.i&&!this.I&&(4==e?Wu(this.l,this):(this.i=!1,Ea(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,ea(12)):(this.o=0,ea(13)),Aa(this),Ia(this)}}}catch(e){}},us.fb=function(){if(this.g){var t=Ou(this.g),e=this.g.ga();this.C<e.length&&(Ca(this),wa(this,t,e),this.i&&4!=t&&Ea(this))}},us.cancel=function(){this.I=!0,Aa(this)},us.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Xo(3),ea(17)),Aa(this),this.o=2,Ia(this)):Ta(this,this.Y-t)},(us=Da.prototype).R=function(){Na(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},us.T=function(){return Na(this),this.g.concat()},us.get=function(t,e){return Oa(this.h,t)?this.h[t]:e},us.set=function(t,e){Oa(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},us.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};var Pa=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ra(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Ra){this.g=void 0!==e?e:t.g,Fa(this,t.j),this.s=t.s,Ma(this,t.i),Va(this,t.m),this.l=t.l,e=t.h;var n=new Wa;n.i=e.i,e.g&&(n.g=new Da(e.g),n.h=e.h),ja(this,n),this.o=t.o}else t&&(n=String(t).match(Pa))?(this.g=!!e,Fa(this,n[1]||"",!0),this.s=Ba(n[2]||""),Ma(this,n[3]||"",!0),Va(this,n[4]),this.l=Ba(n[5]||"",!0),ja(this,n[6]||"",!0),this.o=Ba(n[7]||"")):(this.g=!!e,this.h=new Wa(null,this.g))}function La(t){return new Ra(t)}function Fa(t,e,n){t.j=n?Ba(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ma(t,e,n){t.i=n?Ba(e,!0):e}function Va(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function ja(t,e,n){e instanceof Wa?(t.h=e,function(t,e){e&&!t.j&&(Ja(t),t.i=null,t.g.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Ya(this,e),tu(this,n,t))},t)),t.j=e}(t.h,t.g)):(n||(e=Ga(e,Qa)),t.h=new Wa(e,t.g))}function Ua(t,e,n){t.h.set(e,n)}function qa(t){return Ua(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ba(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ga(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,za),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function za(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ra.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ga(e,Ha,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Ga(e,Ha,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ga(n,"/"==n.charAt(0)?Ka:$a,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ga(n,Za)),t.join("")};var Ha=/[#\/\?@]/g,$a=/[#\?:]/g,Ka=/[#\?]/g,Qa=/[#\?@]/g,Za=/#/g;function Wa(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ja(t){t.g||(t.g=new Da,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Ya(t,e){Ja(t),e=eu(t,e),Oa(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Oa((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Na(t)))}function Xa(t,e){return Ja(t),e=eu(t,e),Oa(t.g.h,e)}function tu(t,e,n){Ya(t,e),0<n.length&&(t.i=null,t.g.set(eu(t,e),As(n)),t.h+=n.length)}function eu(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(us=Wa.prototype).add=function(t,e){Ja(this),this.i=null,t=eu(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},us.forEach=function(t,e){Ja(this),this.g.forEach(function(n,r){Cs(n,function(n){t.call(e,n,r,this)},this)},this)},us.T=function(){Ja(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n},us.R=function(t){Ja(this);var e=[];if("string"==typeof t)Xa(this,t)&&(e=Is(e,this.g.get(eu(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Is(e,t[n])}return e},us.set=function(t,e){return Ja(this),this.i=null,Xa(this,t=eu(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},us.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},us.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.i=t.join("&")};var nu=function(t,e){this.h=t,this.g=e};function ru(t){this.l=t||iu,t=hs.PerformanceNavigationTiming?0<(t=hs.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(hs.g&&hs.g.Ea&&hs.g.Ea()&&hs.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var iu=10;function su(t){return!!t.h||!!t.g&&t.g.size>=t.j}function ou(t){return t.h?1:t.g?t.g.size:0}function au(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function uu(t,e){t.g?t.g.add(e):t.h=e}function cu(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function lu(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=as(t.g.values()),s=i.next();!s.done;s=i.next())r=r.concat(s.value.D)}catch(o){e={error:o}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return As(t.i)}function hu(){}function fu(){this.g=new hu}function du(t,e,n){var r=n||"";try{ka(t,function(t,n){var i=t;ps(t)&&(i=Ao(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(w_){throw e.push(r+"type="+encodeURIComponent("_badmap")),w_}}function pu(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}function gu(t){this.l=t.$b||null,this.j=t.ib||!1}function mu(t,e){To.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=yu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ru.prototype.cancel=function(){var t,e;if(this.i=lu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=as(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},hu.prototype.stringify=function(t){return hs.JSON.stringify(t,void 0)},hu.prototype.parse=function(t){return hs.JSON.parse(t,void 0)},ws(gu,oa),gu.prototype.g=function(){return new mu(this.l,this.j)},gu.prototype.i=function(t){return function(){return t}}({}),ws(mu,To);var yu=0;function vu(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function _u(t){t.readyState=4,t.l=null,t.j=null,t.A=null,bu(t)}function bu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(us=mu.prototype).open=function(t,e){if(this.readyState!=yu)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,bu(this)},us.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||hs).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},us.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,_u(this)),this.readyState=yu},us.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,bu(this)),this.g&&(this.readyState=3,bu(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==hs.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;vu(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},us.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?_u(this):bu(this),3==this.readyState&&vu(this)}},us.Ua=function(t){this.g&&(this.response=this.responseText=t,_u(this))},us.Ta=function(t){this.g&&(this.response=t,_u(this))},us.ha=function(){this.g&&_u(this)},us.setRequestHeader=function(t,e){this.v.append(t,e)},us.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},us.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(mu.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var wu=hs.JSON.parse;function Su(t){To.call(this),this.headers=new Da,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Eu,this.K=this.L=!1}ws(Su,To);var Eu="",Tu=/^https?$/i,Cu=["POST","PUT"];function Iu(t){return"content-type"==t.toLowerCase()}function Au(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,xu(t),Du(t)}function xu(t){t.D||(t.D=!0,Co(t,"complete"),Co(t,"error"))}function ku(t){if(t.h&&void 0!==ls&&(!t.C[1]||4!=Ou(t)||2!=t.ba()))if(t.v&&4==Ou(t))Uo(t.Fa,0,t);else if(Co(t,"readystatechange"),4==Ou(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.H).match(Pa)[1]||null;if(!s&&hs.self&&hs.self.location){var o=hs.self.location.protocol;s=o.substr(0,o.length-1)}i=!Tu.test(s?s.toLowerCase():"")}e=i}if(e)Co(t,"complete"),Co(t,"success");else{t.m=6;try{var a=2<Ou(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",xu(t)}}finally{Du(t)}}}function Du(t,e){if(t.g){Nu(t);var n=t.g,r=t.C[0]?fs:null;t.g=null,t.C=null,e||Co(t,"ready");try{n.onreadystatechange=r}catch(w_){}}}function Nu(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(hs.clearTimeout(t.A),t.A=null)}function Ou(t){return t.g?t.g.readyState:0}function Pu(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Eu:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ru(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Ls(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ua(t,e,n))}function Lu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Fu(t){this.za=0,this.l=[],this.h=new Ko,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Lu("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Lu("baseRetryDelayMs",5e3,t),this.$a=Lu("retryDelaySeedMs",1e4,t),this.Ya=Lu("forwardChannelMaxRetries",2,t),this.ra=Lu("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new ru(t&&t.concurrentRequestLimit),this.Ca=new fu,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Mu(t){if(ju(t),3==t.G){var e=t.V++,n=La(t.F);Ua(n,"SID",t.J),Ua(n,"RID",e),Ua(n,"TYPE","terminate"),Gu(t,n),(e=new da(t,t.h,e,void 0)).K=2,e.v=qa(La(n)),n=!1,hs.navigator&&hs.navigator.sendBeacon&&(n=hs.navigator.sendBeacon(e.v.toString(),"")),!n&&hs.Image&&((new Image).src=e.v,n=!0),n||(e.g=ec(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ea(e)}Xu(t)}function Vu(t){t.g&&(Ku(t),t.g.cancel(),t.g=null)}function ju(t){Vu(t),t.u&&(hs.clearTimeout(t.u),t.u=null),Zu(t),t.i.cancel(),t.m&&("number"==typeof t.m&&hs.clearTimeout(t.m),t.m=null)}function Uu(t,e){t.l.push(new nu(t.Za++,e)),3==t.G&&qu(t)}function qu(t){su(t.i)||t.m||(t.m=!0,Ro(t.Ha,t),t.C=0)}function Bu(t,e){var n;n=e?e.m:t.V++;var r=La(t.F);Ua(r,"SID",t.J),Ua(r,"RID",n),Ua(r,"AID",t.U),Gu(t,r),t.o&&t.s&&Ru(r,t.o,t.s),n=new da(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=zu(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),uu(t.i,n),va(n,r,e)}function Gu(t,e){t.j&&ka({},function(t,n){Ua(e,n,t)})}function zu(t,e,n){n=Math.min(t.l.length,n);var r=t.j?_s(t.j.Oa,t.j,t):null;t:for(var i=t.l,s=-1;;){var o=["count="+n];-1==s?0<n?o.push("ofs="+(s=i[0].h)):s=0:o.push("ofs="+s);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=s))s=Math.max(0,i[u].h-100),a=!1;else try{du(l,o,"req"+c+"_")}catch(Rc){r&&r(l)}}if(a){r=o.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function Hu(t){t.g||t.u||(t.Y=1,Ro(t.Ga,t),t.A=0)}function $u(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=ra(_s(t.Ga,t),Ju(t,t.A)),t.A++,0))}function Ku(t){null!=t.B&&(hs.clearTimeout(t.B),t.B=null)}function Qu(t){t.g=new da(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=La(t.oa);Ua(e,"RID","rpc"),Ua(e,"SID",t.J),Ua(e,"CI",t.N?"0":"1"),Ua(e,"AID",t.U),Gu(t,e),Ua(e,"TYPE","xmlhttp"),t.o&&t.s&&Ru(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=qa(La(e)),n.s=null,n.U=!0,_a(n,t)}function Zu(t){null!=t.v&&(hs.clearTimeout(t.v),t.v=null)}function Wu(t,e){var n=null;if(t.g==e){Zu(t),Ku(t),t.g=null;var r=2}else{if(!au(t.i,e))return;n=e.D,cu(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Co(r=Jo(),new na(r,n,e,i)),qu(t)}else Hu(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(ou(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=ra(_s(t.Ha,t,e),Ju(t,t.C)),t.C++,0)))}(t,e)||2==r&&$u(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Yu(t,5);break;case 4:Yu(t,10);break;case 3:Yu(t,6);break;default:Yu(t,2)}}function Ju(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Yu(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=_s(t.jb,t);n||(n=new Ra("//www.google.com/images/cleardot.gif"),hs.location&&"http"==hs.location.protocol||Fa(n,"https"),qa(n)),function(t,e){var n=new Ko;if(hs.Image){var r=new Image;r.onload=bs(pu,n,r,"TestLoadImage: loaded",!0,e),r.onerror=bs(pu,n,r,"TestLoadImage: error",!1,e),r.onabort=bs(pu,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=bs(pu,n,r,"TestLoadImage: timeout",!1,e),hs.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else ea(2);t.G=0,t.j&&t.j.va(e),Xu(t),ju(t)}function Xu(t){t.G=0,t.I=-1,t.j&&(0==lu(t.i).length&&0==t.l.length||(t.i.i.length=0,As(t.l),t.l.length=0),t.j.ua())}function tc(t,e,n){var r=function(t){return t instanceof Ra?La(t):new Ra(t,void 0)}(n);if(""!=r.i)e&&Ma(r,e+"."+r.i),Va(r,r.m);else{var i=hs.location;r=function(t,e,n,r){var i=new Ra(null,void 0);return t&&Fa(i,t),e&&Ma(i,e),n&&Va(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&Ls(t.aa,function(t,e){Ua(r,e,t)}),n=t.sa,(e=t.D)&&n&&Ua(r,e,n),Ua(r,"VER",t.ma),Gu(t,r),r}function ec(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Su(n&&t.Ba&&!t.qa?new gu({ib:!0}):t.qa)).L=t.H,e}function nc(){}function rc(){if(Gs&&!(10<=Number(Xs)))throw Error("Environmental error: no available transport.")}function ic(t,e){To.call(this),this.g=new Fu(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!xs(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!xs(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new ac(this)}function sc(t){la.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function oc(){ha.call(this),this.status=1}function ac(t){this.g=t}(us=Su.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ua.g(),this.C=function(t){return t.h||(t.h=t.i())}(this.u?this.u:ua),this.g.onreadystatechange=_s(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){return void Au(this,s)}t=n||"";var i=new Da(this.headers);r&&ka(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Iu,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=hs.FormData&&t instanceof hs.FormData,!(0<=Ts(Cu,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.g.setRequestHeader(e,t)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Nu(this),0<this.B&&((this.K=function(t){return Gs&&function(){return t=Ys,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var t=0,e=Ds(String(Us)).split("."),n=Ds("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var s=e[i]||"",o=n[i]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==s[0].length&&0==o[0].length)break;t=Os(0==s[1].length?0:parseInt(s[1],10),0==o[1].length?0:parseInt(o[1],10))||Os(0==s[2].length,0==o[2].length)||Os(s[2],o[2]),s=s[3],o=o[3]}while(0==t)}return 0<=t}();var t}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_s(this.pa,this)):this.A=Uo(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Au(this,s)}},us.pa=function(){void 0!==ls&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Co(this,"timeout"),this.abort(8))},us.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Co(this,"complete"),Co(this,"abort"),Du(this))},us.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Du(this,!0)),Su.Z.M.call(this)},us.Fa=function(){this.s||(this.F||this.v||this.l?ku(this):this.cb())},us.cb=function(){ku(this)},us.ba=function(){try{return 2<Ou(this)?this.g.status:-1}catch(qs){return-1}},us.ga=function(){try{return this.g?this.g.responseText:""}catch(qs){return""}},us.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),wu(e)}},us.Da=function(){return this.m},us.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(us=Fu.prototype).ma=8,us.G=1,us.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},us.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new da(this,this.h,t,void 0),n=this.s;if(this.P&&(n?Vs(n=Fs(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var s=this.l[i];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(r+=s)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=zu(this,e,r),Ua(i=La(this.F),"RID",t),Ua(i,"CVER",22),this.D&&Ua(i,"X-HTTP-Session-Id",this.D),Gu(this,i),this.o&&n&&Ru(i,this.o,n),uu(this.i,e),this.Ra&&Ua(i,"TYPE","init"),this.ja?(Ua(i,"$req",r),Ua(i,"SID","null"),e.$=!0,va(e,i,null)):va(e,i,r),this.G=2}}else 3==this.G&&(t?Bu(this,t):0==this.l.length||su(this.i)||Bu(this))},us.Ga=function(){if(this.u=null,Qu(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=ra(_s(this.bb,this),t)}},us.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ea(10),Vu(this),Qu(this))},us.ab=function(){null!=this.v&&(this.v=null,Vu(this),$u(this),ea(19))},us.jb=function(t){t?(this.h.info("Successfully pinged google.com"),ea(2)):(this.h.info("Failed to ping google.com"),ea(1))},(us=nc.prototype).xa=function(){},us.wa=function(){},us.va=function(){},us.ua=function(){},us.Oa=function(){},rc.prototype.g=function(t,e){return new ic(t,e)},ws(ic,To),ic.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Ro(_s(t.hb,t,e))),ea(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=tc(t,null,t.W),qu(t)},ic.prototype.close=function(){Mu(this.g)},ic.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,Uu(this.g,e)}else this.v?((e={}).__data__=Ao(t),Uu(this.g,e)):Uu(this.g,t)},ic.prototype.M=function(){this.g.j=null,delete this.j,Mu(this.g),delete this.g,ic.Z.M.call(this)},ws(sc,la),ws(oc,ha),ws(ac,nc),ac.prototype.xa=function(){Co(this.g,"a")},ac.prototype.wa=function(t){Co(this.g,new sc(t))},ac.prototype.va=function(t){Co(this.g,new oc(t))},ac.prototype.ua=function(){Co(this.g,"b")},rc.prototype.createWebChannel=rc.prototype.g,ic.prototype.send=ic.prototype.u,ic.prototype.open=ic.prototype.m,ic.prototype.close=ic.prototype.close,ia.NO_ERROR=0,ia.TIMEOUT=8,ia.HTTP_ERROR=6,sa.COMPLETE="complete",aa.EventType=ca,ca.OPEN="a",ca.CLOSE="b",ca.ERROR="c",ca.MESSAGE="d",To.prototype.listen=To.prototype.N,Su.prototype.listenOnce=Su.prototype.O,Su.prototype.getLastError=Su.prototype.La,Su.prototype.getLastErrorCode=Su.prototype.Da,Su.prototype.getStatus=Su.prototype.ba,Su.prototype.getResponseJson=Su.prototype.Qa,Su.prototype.getResponseText=Su.prototype.ga,Su.prototype.send=Su.prototype.ea;var uc=ia,cc=sa,lc=Zo,hc=gu,fc=aa,dc=Su,pc=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();pc.o=-1;var gc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},mc=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,rs.ZT)(e,t),e}(Error),yc=new ss.Yd("@firebase/firestore");function vc(){return yc.logLevel}function _c(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(yc.logLevel<=ss.in.DEBUG){var r=e.map(Sc);yc.debug.apply(yc,(0,rs.ev)(["Firestore (8.8.0): "+t],r))}}function bc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(yc.logLevel<=ss.in.ERROR){var r=e.map(Sc);yc.error.apply(yc,(0,rs.ev)(["Firestore (8.8.0): "+t],r))}}function wc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(yc.logLevel<=ss.in.WARN){var r=e.map(Sc);yc.warn.apply(yc,(0,rs.ev)(["Firestore (8.8.0): "+t],r))}}function Sc(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(w_){return t}}function Ec(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.8.0) INTERNAL ASSERTION FAILED: "+t;throw bc(e),new Error(e)}function Tc(t,e){t||Ec()}function Cc(t,e){return t}function Ic(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Ac=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Ic(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function xc(t,e){return t<e?-1:t>e?1:0}function kc(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Dc(t){return t+"\0"}var Nc=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new mc(gc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new mc(gc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new mc(gc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new mc(gc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?xc(this.nanoseconds,t.nanoseconds):xc(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Oc=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Nc(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Pc(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Rc(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Lc(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Fc=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Ec(),void 0===n?n=t.length-e:n>t.length-e&&Ec(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),s=e.get(r);if(i<s)return-1;if(i>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Mc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,rs.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,s=t;i<s.length;i++){var o=s[i];if(o.indexOf("//")>=0)throw new mc(gc.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");r.push.apply(r,o.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Fc),Vc=/^[_a-zA-Z][_a-zA-Z0-9]*$/,jc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,rs.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Vc.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,s=function(){if(0===r.length)throw new mc(gc.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},o=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new mc(gc.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new mc(gc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new mc(gc.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Fc),Uc=function(){function t(t){this.fields=t,t.sort(jc.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return kc(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),qc=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return xc(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();qc.EMPTY_BYTE_STRING=new qc("");var Bc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gc(t){if(Tc(!!t),"string"==typeof t){var e=0,n=Bc.exec(t);if(Tc(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:zc(t.seconds),nanos:zc(t.nanos)}}function zc(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Hc(t){return"string"==typeof t?qc.fromBase64String(t):qc.fromUint8Array(t)}function $c(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Kc(t){var e=t.mapValue.fields.__previous_value__;return $c(e)?Kc(e):e}function Qc(t){var e=Gc(t.mapValue.fields.__local_write_time__.timestampValue);return new Nc(e.seconds,e.nanos)}function Zc(t){return null==t}function Wc(t){return 0===t&&1/t==-1/0}function Jc(t){return"number"==typeof t&&Number.isInteger(t)&&!Wc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Yc=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Mc.fromString(e))},t.fromName=function(e){return new t(Mc.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Mc.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Mc.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Mc(e.slice()))},t}();function Xc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$c(t)?4:10:Ec()}function tl(t,e){var n=Xc(t);if(n!==Xc(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qc(t).isEqual(Qc(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Gc(t.timestampValue),r=Gc(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Hc(t.bytesValue).isEqual(Hc(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return zc(t.geoPointValue.latitude)===zc(e.geoPointValue.latitude)&&zc(t.geoPointValue.longitude)===zc(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return zc(t.integerValue)===zc(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=zc(t.doubleValue),r=zc(e.doubleValue);return n===r?Wc(n)===Wc(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return kc(t.arrayValue.values||[],e.arrayValue.values||[],tl);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Pc(n)!==Pc(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!tl(n[i],r[i])))return!1;return!0}(t,e);default:return Ec()}}function el(t,e){return void 0!==(t.values||[]).find(function(t){return tl(t,e)})}function nl(t,e){var n=Xc(t),r=Xc(e);if(n!==r)return xc(n,r);switch(n){case 0:return 0;case 1:return xc(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=zc(t.integerValue||t.doubleValue),r=zc(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return rl(t.timestampValue,e.timestampValue);case 4:return rl(Qc(t),Qc(e));case 5:return xc(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Hc(t),r=Hc(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var s=xc(n[i],r[i]);if(0!==s)return s}return xc(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=xc(zc(t.latitude),zc(e.latitude));return 0!==n?n:xc(zc(t.longitude),zc(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var s=nl(n[i],r[i]);if(s)return s}return xc(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(var o=0;o<r.length&&o<s.length;++o){var a=xc(r[o],s[o]);if(0!==a)return a;var u=nl(n[r[o]],i[s[o]]);if(0!==u)return u}return xc(r.length,s.length)}(t.mapValue,e.mapValue);default:throw Ec()}}function rl(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return xc(t,e);var n=Gc(t),r=Gc(e),i=xc(n.seconds,r.seconds);return 0!==i?i:xc(n.nanos,r.nanos)}function il(t){return sl(t)}function sl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Gc(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Hc(t.bytesValue).toBase64():"referenceValue"in t?Yc.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=sl(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var s=i[r];n?n=!1:e+=",",e+=s+":"+sl(t.fields[s])}return e+"}"}(t.mapValue):Ec();var e}function ol(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function al(t){return!!t&&"integerValue"in t}function ul(t){return!!t&&"arrayValue"in t}function cl(t){return!!t&&"nullValue"in t}function ll(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hl(t){return!!t&&"mapValue"in t}function fl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return Rc(t.mapValue.fields,function(t,n){return e.mapValue.fields[t]=fl(n)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=fl(t.arrayValue.values[r]);return n}return Object.assign({},t)}var dl=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!hl(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=fl(e)},t.prototype.setAll=function(t){var e=this,n=jc.emptyPath(),r={},i=[];t.forEach(function(t,s){if(!n.isImmediateParentOf(s)){var o=e.getFieldsMap(n);e.applyChanges(o,r,i),r={},i=[],n=s.popLast()}t?r[s.lastSegment()]=fl(t):i.push(s.lastSegment())});var s=this.getFieldsMap(n);this.applyChanges(s,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());hl(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return tl(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];hl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){Rc(e,function(e,n){return t[e]=n});for(var r=0,i=n;r<i.length;r++)delete t[i[r]]},t.prototype.clone=function(){return new t(fl(this.value))},t}();function pl(t){var e=[];return Rc(t.fields,function(t,n){var r=new jc([t]);if(hl(n)){var i=pl(n.mapValue).fields;if(0===i.length)e.push(r);else for(var s=0,o=i;s<o.length;s++)e.push(r.child(o[s]))}else e.push(r)}),new Uc(e)}var gl=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Oc.min(),dl.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,dl.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,dl.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=dl.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=dl.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),ml=function(t,e,n,r,i,s,o){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.h=null};function yl(t,e,n,r,i,s,o){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null),new ml(t,e,n,r,i,s,o)}function vl(t){var e=Cc(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+il(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),Zc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Nl(e.startAt)),e.endAt&&(n+="|ub:",n+=Nl(e.endAt)),e.h=n}return e.h}function _l(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Pl(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(s=e.filters[r]).op||!i.field.isEqual(s.field)||!tl(i.value,s.value))return!1;var i,s;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ll(t.startAt,e.startAt)&&Ll(t.endAt,e.endAt)}function bl(t){return Yc.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var wl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,rs.ZT)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Sl(t,n,r):"array-contains"===n?new Il(t,r):"in"===n?new Al(t,r):"not-in"===n?new xl(t,r):"array-contains-any"===n?new kl(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new El(t,n):new Tl(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(nl(e,this.value)):null!==e&&Xc(this.value)===Xc(e)&&this.m(nl(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Ec()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Sl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Yc.fromName(r.referenceValue),i}return(0,rs.ZT)(e,t),e.prototype.matches=function(t){var e=Yc.comparator(t.key,this.key);return this.m(e)},e}(wl),El=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Cl(0,n),r}return(0,rs.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(wl),Tl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Cl(0,n),r}return(0,rs.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(wl);function Cl(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Yc.fromName(t.referenceValue)})}var Il=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,rs.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return ul(e)&&el(e.arrayValue,this.value)},e}(wl),Al=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,rs.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&el(this.value.arrayValue,e)},e}(wl),xl=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,rs.ZT)(e,t),e.prototype.matches=function(t){if(el(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!el(this.value.arrayValue,e)},e}(wl),kl=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,rs.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!ul(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return el(e.value.arrayValue,t)})},e}(wl),Dl=function(t,e){this.position=t,this.before=e};function Nl(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return il(t)}).join(",")}var Ol=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Pl(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Rl(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var s=e[i],o=t.position[i];if(r=s.field.isKeyField()?Yc.comparator(Yc.fromName(o.referenceValue),n.key):nl(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ll(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!tl(t.position[n],e.position[n]))return!1;return!0}var Fl=function(t,e,n,r,i,s,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s="F"),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.p=null,this.T=null};function Ml(t,e,n,r,i,s,o,a){return new Fl(t,e,n,r,i,s,o,a)}function Vl(t){return new Fl(t)}function jl(t){return!Zc(t.limit)&&"F"===t.limitType}function Ul(t){return!Zc(t.limit)&&"L"===t.limitType}function ql(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Bl(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Gl(t){return null!==t.collectionGroup}function zl(t){var e=Cc(t);if(null===e.p){e.p=[];var n=Bl(e),r=ql(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Ol(n)),e.p.push(new Ol(jc.keyField(),"asc"));else{for(var i=!1,s=0,o=e.explicitOrderBy;s<o.length;s++){var a=o[s];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Ol(jc.keyField(),u))}}}return e.p}function Hl(t){var e=Cc(t);if(!e.T)if("F"===e.limitType)e.T=yl(e.path,e.collectionGroup,zl(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=zl(e);r<i.length;r++){var s=i[r];n.push(new Ol(s.field,"desc"===s.dir?"asc":"desc"))}var o=e.endAt?new Dl(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Dl(e.startAt.position,!e.startAt.before):null;e.T=yl(e.path,e.collectionGroup,n,e.filters,e.limit,o,a)}return e.T}function $l(t,e,n){return new Fl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Kl(t,e){return _l(Hl(t),Hl(e))&&t.limitType===e.limitType}function Ql(t){return vl(Hl(t))+"|lt:"+t.limitType}function Zl(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+il(e.value);var e}).join(", ")+"]"),Zc(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Nl(t.startAt)),t.endAt&&(e+=", endAt: "+Nl(t.endAt)),"Target("+e+")"}(Hl(t))+"; limitType="+t.limitType+")"}function Wl(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Yc.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Rl(t.startAt,zl(t),e)||t.endAt&&Rl(t.endAt,zl(t),e))}(t,e)}function Jl(t){return function(e,n){for(var r=!1,i=0,s=zl(t);i<s.length;i++){var o=s[i],a=Yl(o,e,n);if(0!==a)return a;r=r||o.field.isKeyField()}return 0}}function Yl(t,e,n){var r=t.field.isKeyField()?Yc.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?nl(r,i):Ec()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ec()}}function Xl(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wc(e)?"-0":e}}function th(t){return{integerValue:""+t}}function eh(t,e){return Jc(e)?th(e):Xl(t,e)}var nh=function(){this._=void 0};function rh(t,e,n){return t instanceof oh?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ah?uh(t,e):t instanceof ch?lh(t,e):function(t,e){var n=sh(t,e),r=fh(n)+fh(t.A);return al(n)&&al(t.A)?th(r):Xl(t.R,r)}(t,e)}function ih(t,e,n){return t instanceof ah?uh(t,e):t instanceof ch?lh(t,e):n}function sh(t,e){return t instanceof hh?al(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var oh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,rs.ZT)(e,t),e}(nh),ah=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,rs.ZT)(e,t),e}(nh);function uh(t,e){for(var n=dh(e),r=function(t){n.some(function(e){return tl(e,t)})||n.push(t)},i=0,s=t.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var ch=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,rs.ZT)(e,t),e}(nh);function lh(t,e){for(var n=dh(e),r=function(t){n=n.filter(function(e){return!tl(e,t)})},i=0,s=t.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var hh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,rs.ZT)(e,t),e}(nh);function fh(t){return zc(t.integerValue||t.doubleValue)}function dh(t){return ul(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ph=function(t,e){this.field=t,this.transform=e},gh=function(t,e){this.version=t,this.transformResults=e},mh=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function yh(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var vh=function(){};function _h(t,e,n){t instanceof Th?function(t,e,n){var r=t.value.clone(),i=Ah(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Ch?function(t,e,n){if(yh(t.precondition,e)){var r=Ah(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Ih(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function bh(t,e,n){t instanceof Th?function(t,e,n){if(yh(t.precondition,e)){var r=t.value.clone(),i=xh(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Eh(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Ch?function(t,e,n){if(yh(t.precondition,e)){var r=xh(t.fieldTransforms,n,e),i=e.data;i.setAll(Ih(t)),i.setAll(r),e.convertToFoundDocument(Eh(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){yh(t.precondition,e)&&e.convertToNoDocument(Oc.min())}(t,e)}function wh(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var s=i[r],o=e.data.field(s.field),a=sh(s.transform,o||null);null!=a&&(null==n&&(n=dl.empty()),n.set(s.field,a))}return n||null}function Sh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&kc(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ah&&e instanceof ah||t instanceof ch&&e instanceof ch?kc(t.elements,e.elements,tl):t instanceof hh&&e instanceof hh?tl(t.A,e.A):t instanceof oh&&e instanceof oh}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Eh(t){return t.isFoundDocument()?t.version:Oc.min()}var Th=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var s=this;return(s=t.call(this)||this).key=e,s.value=n,s.precondition=r,s.fieldTransforms=i,s.type=0,s}return(0,rs.ZT)(e,t),e}(vh),Ch=function(t){function e(e,n,r,i,s){void 0===s&&(s=[]);var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.fieldMask=r,o.precondition=i,o.fieldTransforms=s,o.type=1,o}return(0,rs.ZT)(e,t),e}(vh);function Ih(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function Ah(t,e,n){var r=new Map;Tc(t.length===n.length);for(var i=0;i<n.length;i++){var s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,ih(o,a,n[i]))}return r}function xh(t,e,n){for(var r=new Map,i=0,s=t;i<s.length;i++){var o=s[i],a=o.transform,u=n.data.field(o.field);r.set(o.field,rh(a,u,e))}return r}var kh,Dh,Nh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,rs.ZT)(e,t),e}(vh),Oh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,rs.ZT)(e,t),e}(vh),Ph=function(t){this.count=t};function Rh(t){switch(t){case gc.OK:return Ec();case gc.CANCELLED:case gc.UNKNOWN:case gc.DEADLINE_EXCEEDED:case gc.RESOURCE_EXHAUSTED:case gc.INTERNAL:case gc.UNAVAILABLE:case gc.UNAUTHENTICATED:return!1;case gc.INVALID_ARGUMENT:case gc.NOT_FOUND:case gc.ALREADY_EXISTS:case gc.PERMISSION_DENIED:case gc.FAILED_PRECONDITION:case gc.ABORTED:case gc.OUT_OF_RANGE:case gc.UNIMPLEMENTED:case gc.DATA_LOSS:return!0;default:return Ec()}}function Lh(t){if(void 0===t)return bc("GRPC error has no .code"),gc.UNKNOWN;switch(t){case kh.OK:return gc.OK;case kh.CANCELLED:return gc.CANCELLED;case kh.UNKNOWN:return gc.UNKNOWN;case kh.DEADLINE_EXCEEDED:return gc.DEADLINE_EXCEEDED;case kh.RESOURCE_EXHAUSTED:return gc.RESOURCE_EXHAUSTED;case kh.INTERNAL:return gc.INTERNAL;case kh.UNAVAILABLE:return gc.UNAVAILABLE;case kh.UNAUTHENTICATED:return gc.UNAUTHENTICATED;case kh.INVALID_ARGUMENT:return gc.INVALID_ARGUMENT;case kh.NOT_FOUND:return gc.NOT_FOUND;case kh.ALREADY_EXISTS:return gc.ALREADY_EXISTS;case kh.PERMISSION_DENIED:return gc.PERMISSION_DENIED;case kh.FAILED_PRECONDITION:return gc.FAILED_PRECONDITION;case kh.ABORTED:return gc.ABORTED;case kh.OUT_OF_RANGE:return gc.OUT_OF_RANGE;case kh.UNIMPLEMENTED:return gc.UNIMPLEMENTED;case kh.DATA_LOSS:return gc.DATA_LOSS;default:return Ec()}}(Dh=kh||(kh={}))[Dh.OK=0]="OK",Dh[Dh.CANCELLED=1]="CANCELLED",Dh[Dh.UNKNOWN=2]="UNKNOWN",Dh[Dh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dh[Dh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dh[Dh.NOT_FOUND=5]="NOT_FOUND",Dh[Dh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dh[Dh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dh[Dh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dh[Dh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dh[Dh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dh[Dh.ABORTED=10]="ABORTED",Dh[Dh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dh[Dh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dh[Dh.INTERNAL=13]="INTERNAL",Dh[Dh.UNAVAILABLE=14]="UNAVAILABLE",Dh[Dh.DATA_LOSS=15]="DATA_LOSS";var Fh=function(){function t(t,e){this.comparator=t,this.root=e||Vh.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Vh.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vh.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Mh(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Mh(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Mh(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Mh(this.root,t,this.comparator,!0)},t}(),Mh=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Vh=function(){function t(e,n,r,i,s){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=s?s:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,s){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Ec();if(this.right.isRed())throw Ec();var t=this.left.check();if(t!==this.right.check())throw Ec();return t+(this.isRed()?0:1)},t}();Vh.EMPTY=null,Vh.RED=!0,Vh.BLACK=!1,Vh.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Ec()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Ec()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Ec()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Ec()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Ec()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Vh(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var jh=function(){function t(t){this.comparator=t,this.data=new Fh(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Uh(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Uh(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Uh=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),qh=new Fh(Yc.comparator);function Bh(){return qh}var Gh=new Fh(Yc.comparator);function zh(){return Gh}var Hh=new Fh(Yc.comparator);function $h(){return Hh}var Kh=new jh(Yc.comparator);function Qh(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Kh,r=0,i=t;r<i.length;r++){var s=i[r];n=n.add(s)}return n}var Zh=new jh(xc);function Wh(){return Zh}var Jh=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Yh.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Oc.min(),r,Wh(),Bh(),Qh())},t}(),Yh=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(qc.EMPTY_BYTE_STRING,n,Qh(),Qh(),Qh())},t}(),Xh=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},tf=function(t,e){this.targetId=t,this.V=e},ef=function(t,e,n,r){void 0===n&&(n=qc.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},nf=function(){function t(){this.S=0,this.D=of(),this.C=qc.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Qh(),e=Qh(),n=Qh();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Ec()}}),new Yh(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=of()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),rf=function(){function t(t){this.W=t,this.G=new Map,this.H=Bh(),this.J=sf(),this.Y=new jh(xc)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,s=t.removedTargetIds;i<s.length;i++)this.tt(r=s[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Ec()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(bl(i))if(0===n){var s=new Yc(i.path);this.tt(e,s,gl.newNoDocument(s,Oc.min()))}else Tc(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var s=e.ot(i);if(s){if(r.current&&bl(s.target)){var o=new Yc(s.target.path);null!==e.H.get(o)||e.at(i,o)||e.tt(i,o,gl.newNoDocument(o,t))}r.$&&(n.set(i,r.M()),r.L())}});var r=Qh();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Jh(t,n,this.Y,this.H,r);return this.H=Bh(),this.J=sf(),this.Y=new jh(xc),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new nf,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new jh(xc),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||_c("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new nf),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function sf(){return new Fh(Yc.comparator)}function of(){return new Fh(Yc.comparator)}var af={asc:"ASCENDING",desc:"DESCENDING"},uf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cf=function(t,e){this.databaseId=t,this.I=e};function lf(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function hf(t,e){return t.I?e.toBase64():e.toUint8Array()}function ff(t,e){return lf(t,e.toTimestamp())}function df(t){return Tc(!!t),Oc.fromTimestamp(function(t){var e=Gc(t);return new Nc(e.seconds,e.nanos)}(t))}function pf(t,e){return function(t){return new Mc(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function gf(t){var e=Mc.fromString(t);return Tc(jf(e)),e}function mf(t,e){return pf(t.databaseId,e.path)}function yf(t,e){var n=gf(e);if(n.get(1)!==t.databaseId.projectId)throw new mc(gc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new mc(gc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Yc(wf(n))}function vf(t,e){return pf(t.databaseId,e)}function _f(t){var e=gf(t);return 4===e.length?Mc.emptyPath():wf(e)}function bf(t){return new Mc(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function wf(t){return Tc(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Sf(t,e,n){return{name:mf(t,e),fields:n.value.mapValue.fields}}function Ef(t,e,n){var r=yf(t,e.name),i=df(e.updateTime),s=new dl({mapValue:{fields:e.fields}}),o=gl.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Tf(t,e){var n;if(e instanceof Th)n={update:Sf(t,e.key,e.value)};else if(e instanceof Nh)n={delete:mf(t,e.key)};else if(e instanceof Ch)n={update:Sf(t,e.key,e.data),updateMask:Vf(e.fieldMask)};else{if(!(e instanceof Oh))return Ec();n={verify:mf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof oh)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ah)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ch)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof hh)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Ec()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:ff(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Ec()}(t,e.precondition)),n}function Cf(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?mh.updateTime(df(t.updateTime)):void 0!==t.exists?mh.exists(t.exists):mh.none()}(e.currentDocument):mh.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Tc("REQUEST_TIME"===e.setToServerValue),n=new oh):"appendMissingElements"in e?n=new ah(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new ch(e.removeAllFromArray.values||[]):"increment"in e?n=new hh(t,e.increment):Ec();var r=jc.fromServerFormat(e.fieldPath);return new ph(r,n)}(t,e)}):[];if(e.update){var i=yf(t,e.update.name),s=new dl({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){return new Uc((t.fieldPaths||[]).map(function(t){return jc.fromServerFormat(t)}))}(e.updateMask);return new Ch(i,s,o,n,r)}return new Th(i,s,n,r)}if(e.delete){var a=yf(t,e.delete);return new Nh(a,n)}if(e.verify){var u=yf(t,e.verify);return new Oh(u,n)}return Ec()}function If(t,e){return{documents:[vf(t,e.path)]}}function Af(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=vf(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=vf(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(ll(t.value))return{unaryFilter:{field:Rf(t.field),op:"IS_NAN"}};if(cl(t.value))return{unaryFilter:{field:Rf(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(ll(t.value))return{unaryFilter:{field:Rf(t.field),op:"IS_NOT_NAN"}};if(cl(t.value))return{unaryFilter:{field:Rf(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rf(t.field),op:Pf(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var s=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Rf(t.field),direction:Of(t.dir)}}(t)})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);var o=function(t,e){return t.I||Zc(e)?e:{value:e}}(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=Df(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Df(e.endAt)),n}function xf(t){var e=_f(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Tc(1===r);var s=n.from[0];s.allDescendants?i=s.collectionId:e=e.child(s.collectionId)}var o=[];n.where&&(o=kf(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new Ol(Lf(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Zc(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Nf(n.startAt));var l=null;return n.endAt&&(l=Nf(n.endAt)),Ml(e,i,a,o,u,"F",c,l)}function kf(t){return t?void 0!==t.unaryFilter?[Mf(t)]:void 0!==t.fieldFilter?[Ff(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return kf(t)}).reduce(function(t,e){return t.concat(e)}):Ec():[]}function Df(t){return{before:t.before,values:t.position}}function Nf(t){return new Dl(t.values||[],!!t.before)}function Of(t){return af[t]}function Pf(t){return uf[t]}function Rf(t){return{fieldPath:t.canonicalString()}}function Lf(t){return jc.fromServerFormat(t.fieldPath)}function Ff(t){return wl.create(Lf(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Ec()}}(t.fieldFilter.op),t.fieldFilter.value)}function Mf(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Lf(t.unaryFilter.field);return wl.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Lf(t.unaryFilter.field);return wl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Lf(t.unaryFilter.field);return wl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Lf(t.unaryFilter.field);return wl.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Ec()}}function Vf(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function jf(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Uf(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Bf(e)),e=qf(t.get(n),e);return Bf(e)}function qf(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function Bf(t){return t+"\x01\x01"}function Gf(t){var e=t.length;if(Tc(e>=2),2===e)return Tc("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Mc.emptyPath();for(var n=e-2,r=[],i="",s=0;s<e;){var o=t.indexOf("\x01",s);switch((o<0||o>n)&&Ec(),t.charAt(o+1)){case"\x01":var a=t.substring(s,o),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:Ec()}s=o+2}return new Mc(r)}var zf=function(t,e){this.seconds=t,this.nanoseconds=e},Hf=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Hf.store="owner",Hf.key="owner";var $f=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};$f.store="mutationQueues",$f.keyPath="userId";var Kf=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Kf.store="mutations",Kf.keyPath="batchId",Kf.userMutationsIndex="userMutationsIndex",Kf.userMutationsKeyPath=["userId","batchId"];var Qf=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Uf(e)]},t.key=function(t,e,n){return[t,Uf(e),n]},t}();Qf.store="documentMutations",Qf.PLACEHOLDER=new Qf;var Zf=function(t,e){this.path=t,this.readTime=e},Wf=function(t,e){this.path=t,this.version=e},Jf=function(t,e,n,r,i,s){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s};Jf.store="remoteDocuments",Jf.readTimeIndex="readTimeIndex",Jf.readTimeIndexPath="readTime",Jf.collectionReadTimeIndex="collectionReadTimeIndex",Jf.collectionReadTimeIndexPath=["parentPath","readTime"];var Yf=function(t){this.byteSize=t};Yf.store="remoteDocumentGlobal",Yf.key="remoteDocumentGlobalKey";var Xf=function(t,e,n,r,i,s,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o};Xf.store="targets",Xf.keyPath="targetId",Xf.queryTargetsIndexName="queryTargetsIndex",Xf.queryTargetsKeyPath=["canonicalId","targetId"];var td=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};td.store="targetDocuments",td.keyPath=["targetId","path"],td.documentTargetsIndex="documentTargetsIndex",td.documentTargetsKeyPath=["path","targetId"];var ed=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};ed.key="targetGlobalKey",ed.store="targetGlobal";var nd=function(t,e){this.collectionId=t,this.parent=e};nd.store="collectionParents",nd.keyPath=["collectionId","parent"];var rd=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};rd.store="clientMetadata",rd.keyPath="clientId";var id=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};id.store="bundles",id.keyPath="bundleId";var sd=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};sd.store="namedQueries",sd.keyPath="name";var od=(0,rs.ev)((0,rs.ev)([],(0,rs.ev)((0,rs.ev)([],(0,rs.ev)((0,rs.ev)([],(0,rs.ev)((0,rs.ev)([],[$f.store,Kf.store,Qf.store,Jf.store,Xf.store,Hf.store,ed.store,td.store]),[rd.store])),[Yf.store])),[nd.store])),[id.store,sd.store]),ad="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ud=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),cd=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},ld=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Ec(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,s=!1;e.forEach(function(e){++r,e.next(function(){++i,s&&i===r&&t()},function(t){return n(t)})}),s=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,s=e;i<s.length;i++)r(s[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),hd=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new cd,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new pd(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=_d(e.target.error);n.ft.reject(new pd(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new pd(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(_c("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new md(e)},t}(),fd=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,is.z$)())&&bc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return _c("SimpleDb","Removing database:",t),yd(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,is.z$)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,rs.mG)(this,void 0,void 0,function(){var e,n=this;return(0,rs.Jh)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(_c("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new pd(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new mc(gc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new pd(t,n))},i.onupgradeneeded=function(t){_c("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){_c("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,rs.mG)(this,void 0,void 0,function(){var i,s,o,a,u;return(0,rs.Jh)(this,function(c){switch(c.label){case 0:i="readonly"===e,s=0,o=function(){var e,o,u,c,l;return(0,rs.Jh)(this,function(h){switch(h.label){case 0:++s,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=hd.open(a.db,t,i?"readonly":"readwrite",n),o=r(e).catch(function(t){return e.abort(t),ld.reject(t)}).toPromise(),u={},o.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),o),u)];case 4:return _c("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&s<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,o()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),dd=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return yd(this.Pt.delete())},t}(),pd=function(t){function e(e,n){var r=this;return(r=t.call(this,gc.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,rs.ZT)(e,t),e}(mc);function gd(t){return"IndexedDbTransactionError"===t.name}var md=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(_c("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(_c("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),yd(n)},t.prototype.add=function(t){return _c("SimpleDb","ADD",this.store.name,t,t),yd(this.store.add(t))},t.prototype.get=function(t){var e=this;return yd(this.store.get(t)).next(function(n){return void 0===n&&(n=null),_c("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return _c("SimpleDb","DELETE",this.store.name,t),yd(this.store.delete(t))},t.prototype.count=function(){return _c("SimpleDb","COUNT",this.store.name),yd(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){_c("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new ld(function(n,r){e.onerror=function(t){var e=_d(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new ld(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var s=new dd(i),o=e(i.primaryKey,i.value,s);if(o instanceof ld){var a=o.catch(function(t){return s.done(),ld.reject(t)});n.push(a)}s.isDone?r():null===s.Dt?i.continue():i.continue(s.Dt)}else r()}}).next(function(){return ld.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function yd(t){return new ld(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=_d(t.target.error);n(e)}})}var vd=!1;function _d(t){var e=fd._t((0,is.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new mc("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return vd||(vd=!0,setTimeout(function(){throw r},0)),r}}return t}var bd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,rs.ZT)(e,t),e}(ud);function wd(t,e){var n=Cc(t);return fd.It(n.Mt,e)}var Sd=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&_h(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(s=n[e]).key.isEqual(t.key)&&bh(s,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var s;(s=i[r]).key.isEqual(t.key)&&bh(s,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Oc.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Qh())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&kc(this.mutations,t.mutations,function(t,e){return Sh(t,e)})&&kc(this.baseMutations,t.baseMutations,function(t,e){return Sh(t,e)})},t}(),Ed=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Tc(e.mutations.length===r.length);for(var i=$h(),s=e.mutations,o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)},t}(),Td=function(){function t(t,e,n,r,i,s,o){void 0===i&&(i=Oc.min()),void 0===s&&(s=Oc.min()),void 0===o&&(o=qc.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Cd=function(t){this.Lt=t};function Id(t,e){if(e.document)return Ef(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Yc.fromSegments(e.noDocument.path),r=Nd(e.noDocument.readTime),i=gl.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var s=Yc.fromSegments(e.unknownDocument.path);return r=Nd(e.unknownDocument.version),gl.newUnknownDocument(s,r)}return Ec()}function Ad(t,e,n){var r=xd(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var s=function(t,e){return{name:mf(t,e.key),fields:e.data.value.mapValue.fields,updateTime:lf(t,e.version.toTimestamp())}}(t.Lt,e),o=e.hasCommittedMutations;return new Jf(null,null,s,o,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Dd(e.version);return o=e.hasCommittedMutations,new Jf(null,new Zf(a,u),null,o,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Dd(e.version);return new Jf(new Wf(c,l),null,null,!0,r,i)}return Ec()}function xd(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function kd(t){var e=new Nc(t[0],t[1]);return Oc.fromTimestamp(e)}function Dd(t){var e=t.toTimestamp();return new zf(e.seconds,e.nanoseconds)}function Nd(t){var e=new Nc(t.seconds,t.nanoseconds);return Oc.fromTimestamp(e)}function Od(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Cf(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Cf(t.Lt,e)}),s=Nc.fromMillis(e.localWriteTimeMs);return new Sd(e.batchId,s,n,i)}function Pd(t){var e,n,r=Nd(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Nd(t.lastLimboFreeSnapshotVersion):Oc.min();return void 0!==t.query.documents?(Tc(1===(n=t.query).documents.length),e=Hl(Vl(_f(n.documents[0])))):e=function(t){return Hl(xf(t))}(t.query),new Td(e,t.targetId,0,t.lastListenSequenceNumber,r,i,qc.fromBase64String(t.resumeToken))}function Rd(t,e){var n,r=Dd(e.snapshotVersion),i=Dd(e.lastLimboFreeSnapshotVersion);n=bl(e.target)?If(t.Lt,e.target):Af(t.Lt,e.target);var s=e.resumeToken.toBase64();return new Xf(e.targetId,vl(e.target),r,s,e.sequenceNumber,i,n)}function Ld(t){var e=xf({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?$l(e,e.limit,"L"):e}var Fd=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Md(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Nd(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return Md(t).put({bundleId:(n=e).id,createTime:Dd(df(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Vd(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Ld(e.bundledQuery),readTime:Nd(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return Vd(t).put(function(t){return{name:t.name,readTime:Dd(df(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Md(t){return wd(t,id.store)}function Vd(t){return wd(t,sd.store)}var jd=function(){function t(){this.Bt=new Ud}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),ld.resolve()},t.prototype.getCollectionParents=function(t,e){return ld.resolve(this.Bt.getEntries(e))},t}(),Ud=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new jh(Mc.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new jh(Mc.comparator)).toArray()},t}(),qd=function(){function t(){this.qt=new Ud}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var s={collectionId:r,parent:Uf(i)};return Bd(t).put(s)}return ld.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Dc(e),""],!1,!0);return Bd(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var s=i[r];if(s.collectionId!==e)break;n.push(Gf(s.parent))}return n})},t}();function Bd(t){return wd(t,nd.store)}var Gd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zd=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Hd(t,e,n){var r=t.store(Kf.store),i=t.store(Qf.store),s=[],o=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:o},function(t,e,n){return a++,n.delete()});s.push(u.next(function(){Tc(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Qf.key(e,f.key.path,n.batchId);s.push(i.delete(d)),c.push(f.key)}return ld.waitFor(s).next(function(){return c})}function $d(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ec();e=t.noDocument}return JSON.stringify(e).length}zd.DEFAULT_COLLECTION_PERCENTILE=10,zd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zd.DEFAULT=new zd(41943040,zd.DEFAULT_COLLECTION_PERCENTILE,zd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zd.DISABLED=new zd(-1,0,0);var Kd=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return Tc(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zd(t).$t({index:Kf.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,s=Wd(t),o=Zd(t);return o.add({}).next(function(a){Tc("number"==typeof a);for(var u=new Sd(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Tf(t.Lt,e)}),i=n.mutations.map(function(e){return Tf(t.Lt,e)});return new Kf(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new jh(function(t,e){return xc(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],g=Qf.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(o.put(c)),l.push(s.put(g,Qf.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Kt[a]=u.keys()}),ld.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Zd(t).get(e).next(function(t){return t?(Tc(t.userId===n.userId),Od(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?ld.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return Zd(t).$t({index:Kf.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Tc(e.batchId>=r),s=Od(n.R,e)),i.done()}).next(function(){return s})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Zd(t).$t({index:Kf.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Zd(t).Nt(Kf.userMutationsIndex,n).next(function(t){return t.map(function(t){return Od(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Qf.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),s=[];return Wd(t).$t({range:i},function(r,i,o){var a=r[0],u=r[2],c=Gf(r[1]);if(a===n.userId&&e.path.isEqual(c))return Zd(t).get(u).next(function(t){if(!t)throw Ec();Tc(t.userId===n.userId),s.push(Od(n.R,t))});o.done()}).next(function(){return s})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new jh(xc),i=[];return e.forEach(function(e){var s=Qf.prefixForPath(n.userId,e.path),o=IDBKeyRange.lowerBound(s),a=Wd(t).$t({range:o},function(t,i,s){var o=t[0],a=t[2],u=Gf(t[1]);o===n.userId&&e.path.isEqual(u)?r=r.add(a):s.done()});i.push(a)}),ld.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,s=Qf.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new jh(xc);return Wd(t).$t({range:o},function(t,e,s){var o=t[0],u=t[2],c=Gf(t[1]);o===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):s.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Zd(t).get(e).next(function(t){if(null===t)throw Ec();Tc(t.userId===n.userId),r.push(Od(n.R,t))}))}),ld.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return Hd(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),ld.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return ld.resolve();var r=IDBKeyRange.lowerBound(Qf.prefixForUser(e.userId)),i=[];return Wd(t).$t({range:r},function(t,n,r){if(t[0]===e.userId){var s=Gf(t[1]);i.push(s)}else r.done()}).next(function(){Tc(0===i.length)})})},t.prototype.containsKey=function(t,e){return Qd(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Jd(t).get(this.userId).next(function(t){return t||new $f(e.userId,-1,"")})},t}();function Qd(t,e,n){var r=Qf.prefixForPath(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return Wd(t).$t({range:s,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(o=!0),r.done()}).next(function(){return o})}function Zd(t){return wd(t,Kf.store)}function Wd(t){return wd(t,Qf.store)}function Jd(t){return wd(t,$f.store)}var Yd=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Xd=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new Yd(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return Oc.fromTimestamp(new Nc(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return tp(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return Tc(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,s=[];return tp(t).$t(function(o,a){var u=Pd(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,s.push(r.removeTargetData(t,u)))}).next(function(){return ld.waitFor(s)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return tp(t).$t(function(t,n){var r=Pd(n);e(r)})},t.prototype.Xt=function(t){return ep(t).get(ed.key).next(function(t){return Tc(null!==t),t})},t.prototype.Zt=function(t,e){return ep(t).put(ed.key,e)},t.prototype.te=function(t,e){return tp(t).put(Rd(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=vl(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return tp(t).$t({range:r,index:Xf.queryTargetsIndexName},function(t,n,r){var s=Pd(n);_l(e,s.target)&&(i=s,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],s=np(t);return e.forEach(function(e){var o=Uf(e.path);i.push(s.put(new td(n,o))),i.push(r.referenceDelegate.addReference(t,n,e))}),ld.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=np(t);return ld.forEach(e,function(e){var s=Uf(e.path);return ld.waitFor([i.delete([n,s]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=np(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=np(t),i=Qh();return r.$t({range:n,kt:!0},function(t,e,n){var r=Gf(t[1]),s=new Yc(r);i=i.add(s)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=Uf(e.path),r=IDBKeyRange.bound([n],[Dc(n)],!1,!0),i=0;return np(t).$t({index:td.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return tp(t).get(e).next(function(t){return t?Pd(t):null})},t}();function tp(t){return wd(t,Xf.store)}function ep(t){return wd(t,ed.store)}function np(t){return wd(t,td.store)}function rp(t){return(0,rs.mG)(this,void 0,void 0,function(){return(0,rs.Jh)(this,function(e){if(t.code!==gc.FAILED_PRECONDITION||t.message!==ad)throw t;return _c("LocalStore","Unexpectedly lost primary lease"),[2]})})}function ip(t,e){var n=t[1],r=e[1],i=xc(t[0],e[0]);return 0===i?xc(n,r):i}var sp=function(){function t(t){this.ne=t,this.buffer=new jh(ip),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();ip(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),op=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;_c("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return(0,rs.mG)(e,void 0,void 0,function(){var e;return(0,rs.Jh)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return gd(e=n.sent())?(_c("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,rp(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),ap=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return ld.resolve(pc.o);var r=new sp(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(_c("LruGarbageCollector","Garbage collection skipped; disabled"),ld.resolve(Gd)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(_c("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Gd):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,s,o,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(_c("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,s=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,o=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),vc()<=ss.in.DEBUG&&_c("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+r+" in "+(o-s)+"ms\n\tRemoved "+i+" targets in "+(a-o)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),ld.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),up=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new ap(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return cp(t,n)},t.prototype.removeReference=function(t,e,n){return cp(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return cp(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Jd(t).Ot(function(r){return Qd(t,r,e).next(function(t){return t&&(n=!0),ld.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.we(t,function(o,a){if(a<=e){var u=n._e(t,o).next(function(e){if(!e)return s++,r.getEntry(t,o).next(function(){return r.removeEntry(o),np(t).delete([0,Uf(o.path)])})});i.push(u)}}).next(function(){return ld.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return s})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return cp(t,e)},t.prototype.we=function(t,e){var n,r=np(t),i=pc.o;return r.$t({index:td.documentTargetsIndex},function(t,r){var s=r.path,o=r.sequenceNumber;0===t[0]?(i!==pc.o&&e(new Yc(Gf(n)),i),i=o,n=s):i=pc.o}).next(function(){i!==pc.o&&e(new Yc(Gf(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function cp(t,e){return np(t).put(function(t,e){return new td(0,Uf(t.path),e)}(e,t.currentSequenceNumber))}var lp=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var s=i[r],o=s[1];if(this.equalsFn(s[0],t))return o}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Rc(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];t(s[0],s[1])}})},t.prototype.isEmpty=function(){return Lc(this.inner)},t}(),hp=function(){function t(){this.changes=new lp(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Oc.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:gl.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?ld.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),fp=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return gp(t).put(mp(e),n)},t.prototype.removeEntry=function(t,e){var n=gp(t),r=mp(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return gp(t).get(mp(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return gp(t).get(mp(e)).next(function(t){return{document:n.ye(e,t),size:$d(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=Bh();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=Bh(),i=new Fh(Yc.comparator);return this.pe(t,e,function(t,e){var s=n.ye(t,e);r=r.insert(t,s),i=i.insert(t,$d(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return ld.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),s=i.getNext();return gp(t).$t({range:r},function(t,e,r){for(var o=Yc.fromSegments(t);s&&Yc.comparator(s,o)<0;)n(s,null),s=i.getNext();s&&s.isEqual(o)&&(n(s,e),s=i.hasNext()?i.getNext():null),s?r.Ct(s.path.toArray()):r.done()}).next(function(){for(;s;)n(s,null),s=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Bh(),s=e.path.length+1,o={};if(n.isEqual(Oc.min())){var a=e.path.toArray();o.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=xd(n);o.range=IDBKeyRange.lowerBound([u,c],!0),o.index=Jf.collectionReadTimeIndex}return gp(t).$t(o,function(t,n,o){if(t.length===s){var a=Id(r.R,n);e.path.isPrefixOf(a.key.path)?Wl(e,a)&&(i=i.insert(a.key,a)):o.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new dp(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return pp(t).get(Yf.key).next(function(t){return Tc(!!t),t})},t.prototype.me=function(t,e){return pp(t).put(Yf.key,e)},t.prototype.ye=function(t,e){if(e){var n=Id(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Oc.min()))return n}return gl.newInvalidDocument(t)},t}(),dp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new lp(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return(0,rs.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new jh(function(t,e){return xc(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(s,o){var a=e.Ae.get(s);if(o.document.isValidDocument()){var u=Ad(e.Ie.R,o.document,e.getReadTime(s));i=i.add(s.path.popLast());var c=$d(u);r+=c-a,n.push(e.Ie.addEntry(t,s,u))}else if(r-=a,e.trackRemovals){var l=Ad(e.Ie.R,gl.newNoDocument(s,Oc.min()),e.getReadTime(s));n.push(e.Ie.addEntry(t,s,l))}else n.push(e.Ie.removeEntry(t,s))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),ld.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(hp);function pp(t){return wd(t,Yf.store)}function gp(t){return wd(t,Jf.store)}function mp(t){return t.path.toArray()}var yp=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Tc(n<r&&n>=0&&r<=11);var s=new hd("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Hf.store)}(t),function(t){t.createObjectStore($f.store,{keyPath:$f.keyPath}),t.createObjectStore(Kf.store,{keyPath:Kf.keyPath,autoIncrement:!0}).createIndex(Kf.userMutationsIndex,Kf.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Qf.store)}(t),vp(t),function(t){t.createObjectStore(Jf.store)}(t));var o=ld.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(td.store),t.deleteObjectStore(Xf.store),t.deleteObjectStore(ed.store)}(t),vp(t)),o=o.next(function(){return function(t){var e=t.store(ed.store),n=new ed(0,0,Oc.min().toTimestamp(),0);return e.put(ed.key,n)}(s)})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return function(t,e){return e.store(Kf.store).Nt().next(function(n){t.deleteObjectStore(Kf.store),t.createObjectStore(Kf.store,{keyPath:Kf.keyPath,autoIncrement:!0}).createIndex(Kf.userMutationsIndex,Kf.userMutationsKeyPath,{unique:!0});var r=e.store(Kf.store),i=n.map(function(t){return r.put(t)});return ld.waitFor(i)})}(t,s)})),o=o.next(function(){!function(t){t.createObjectStore(rd.store,{keyPath:rd.keyPath})}(t)})),n<5&&r>=5&&(o=o.next(function(){return i.Re(s)})),n<6&&r>=6&&(o=o.next(function(){return function(t){t.createObjectStore(Yf.store)}(t),i.be(s)})),n<7&&r>=7&&(o=o.next(function(){return i.ve(s)})),n<8&&r>=8&&(o=o.next(function(){return i.Pe(t,s)})),n<9&&r>=9&&(o=o.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Jf.store);e.createIndex(Jf.readTimeIndex,Jf.readTimeIndexPath,{unique:!1}),e.createIndex(Jf.collectionReadTimeIndex,Jf.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(o=o.next(function(){return i.Ve(s)})),n<11&&r>=11&&(o=o.next(function(){!function(t){t.createObjectStore(id.store,{keyPath:id.keyPath})}(t),function(t){t.createObjectStore(sd.store,{keyPath:sd.keyPath})}(t)})),o},t.prototype.be=function(t){var e=0;return t.store(Jf.store).$t(function(t,n){e+=$d(n)}).next(function(){var n=new Yf(e);return t.store(Yf.store).put(Yf.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store($f.store),r=t.store(Kf.store);return n.Nt().next(function(n){return ld.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Kf.userMutationsIndex,i).next(function(r){return ld.forEach(r,function(r){Tc(r.userId===n.userId);var i=Od(e.R,r);return Hd(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(td.store),n=t.store(Jf.store);return t.store(ed.store).get(ed.key).next(function(t){var r=[];return n.$t(function(n,i){var s=new Mc(n),o=function(t){return[0,Uf(t)]}(s);r.push(e.get(o).next(function(n){return n?ld.resolve():function(n){return e.put(new td(0,Uf(n),t.highestListenSequenceNumber))}(s)}))}).next(function(){return ld.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(nd.store,{keyPath:nd.keyPath});var n=e.store(nd.store),r=new Ud,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Uf(i)})}};return e.store(Jf.store).$t({kt:!0},function(t,e){var n=new Mc(t);return i(n.popLast())}).next(function(){return e.store(Qf.store).$t({kt:!0},function(t,e){var n=Gf(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(Xf.store);return n.$t(function(t,r){var i=Pd(r),s=Rd(e.R,i);return n.put(s)})},t}();function vp(t){t.createObjectStore(td.store,{keyPath:td.keyPath}).createIndex(td.documentTargetsIndex,td.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Xf.store,{keyPath:Xf.keyPath}).createIndex(Xf.queryTargetsIndexName,Xf.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(ed.store)}var _p="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",bp=function(){function t(e,n,r,i,s,o,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=s,this.window=o,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new mc(gc.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new up(this,i),this.Le=n+"main",this.R=new Cd(u),this.Be=new fd(this.Le,11,new yp(this.R)),this.qe=new Xd(this.referenceDelegate,this.R),this.Ut=new qd,this.Ue=function(t,e){return new fp(t,e)}(this.R,this.Ut),this.Ke=new Fd,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&bc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new mc(gc.FAILED_PRECONDITION,_p);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new pc(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,rs.mG)(e,void 0,void 0,function(){return(0,rs.Jh)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return(0,rs.mG)(e,void 0,void 0,function(){return(0,rs.Jh)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,rs.mG)(e,void 0,void 0,function(){return(0,rs.Jh)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Sp(e).put(new rd(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(gd(e))return _c("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return _c("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return wp(t).get(Hf.key).next(function(t){return ld.resolve(e.tn(t))})},t.prototype.en=function(t){return Sp(t).delete(this.clientId)},t.prototype.nn=function(){return(0,rs.mG)(this,void 0,void 0,function(){var t,e,n,r=this;return(0,rs.Jh)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=wd(t,rd.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return ld.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)this.Qe.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?ld.resolve(!0):wp(t).get(Hf.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new mc(gc.FAILED_PRECONDITION,_p);return!1}}return!(!e.networkEnabled||!e.inForeground)||Sp(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&_c("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return(0,rs.mG)(this,void 0,void 0,function(){var t=this;return(0,rs.Jh)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Hf.store,rd.store],function(e){var n=new bd(e,pc.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Sp(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Kd.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r,i=this;return _c("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",od,function(s){return r=new bd(s,i.Ne?i.Ne.next():pc.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw bc("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new mc(gc.FAILED_PRECONDITION,ad);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return wp(t).get(Hf.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new mc(gc.FAILED_PRECONDITION,_p)})},t.prototype.Ze=function(t){var e=new Hf(this.clientId,this.allowTabSynchronization,Date.now());return wp(t).put(Hf.key,e)},t.yt=function(){return fd.yt()},t.prototype.Xe=function(t){var e=this,n=wp(t);return n.get(Hf.key).next(function(t){return e.tn(t)?(_c("IndexedDbPersistence","Releasing primary lease."),n.delete(Hf.key)):ld.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(bc("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),(0,is.G6)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return _c("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return bc("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){bc("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function wp(t){return wd(t,Hf.store)}function Sp(t){return wd(t,rd.store)}function Ep(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Tp=function(t,e){this.progress=t,this.wn=e},Cp=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Yc.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Gl(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Yc(e)).next(function(t){var e=zh();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,s=zh();return this.Ut.getCollectionParents(t,i).next(function(o){return ld.forEach(o,function(o){var a=function(t,e){return new Fl(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){s=s.insert(t,e)})})}).next(function(){return s})})},t.prototype.An=function(t,e,n){var r,i,s=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,s._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return s.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var s=n[e],o=0,a=s.mutations;o<a.length;o++){var u=a[o],c=u.key,l=r.get(c);null==l&&(l=gl.newInvalidDocument(c),r=r.insert(c,l)),bh(u,l,s.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){Wl(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=Qh(),i=0,s=e;i<s.length;i++)for(var o=0,a=s[i].mutations;o<a.length;o++){var u=a[o];u instanceof Ch&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),Ip=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Qh(),i=Qh(),s=0,o=n.docChanges;s<o.length;s++){var a=o[s];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Ap=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Oc.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(s){var o=i.Cn(e,s);return(jl(e)||Ul(e))&&i.Nn(e.limitType,o,r,n)?i.Dn(t,e):(vc()<=ss.in.DEBUG&&_c("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Zl(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return o.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new jh(Jl(t));return e.forEach(function(e,r){Wl(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return vc()<=ss.in.DEBUG&&_c("QueryEngine","Using full collection scan to execute query:",Zl(e)),this.Sn.getDocumentsMatchingQuery(t,e,Oc.min())},t}(),xp=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Fh(xc),this.kn=new lp(function(t){return vl(t)},_l),this.$n=Oc.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Cp(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function kp(t,e,n,r){return new xp(t,e,n,r)}function Dp(t,e){return(0,rs.mG)(this,void 0,void 0,function(){var n,r,i,s;return(0,rs.Jh)(this,function(o){switch(o.label){case 0:return n=Cc(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var s;return n._n.getAllMutationBatches(t).next(function(o){return s=o,r=n.persistence.getMutationQueue(e),i=new Cp(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],o=Qh(),a=0,u=s;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)o=o.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)o=o.add(m[g].key)}return i.pn(t,o).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return s=o.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),s)]}})})}function Np(t,e){var n=Cc(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,s=i.keys(),o=ld.resolve();return s.forEach(function(t){o=o.next(function(){return r.getEntry(e,t)}).next(function(e){var s=n.docVersions.get(t);Tc(null!==s),e.version.compareTo(s)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),o.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function Op(t){var e=Cc(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function Pp(t,e){var n=Cc(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var s=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var o=[];e.targetChanges.forEach(function(e,s){var a=i.get(s);if(a){o.push(n.qe.removeMatchingKeys(t,e.removedDocuments,s).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,s)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(s,c),function(t,e,n){return Tc(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&o.push(n.qe.updateTargetData(t,c))}}});var a=Bh();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),o.push(Rp(t,s,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(Oc.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});o.push(u)}return ld.waitFor(o).next(function(){return s.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function Rp(t,e,n,r,i){var s=Qh();return n.forEach(function(t){return s=s.add(t)}),e.getEntries(t,s).next(function(t){var s=Bh();return n.forEach(function(n,o){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(Oc.min())?(e.removeEntry(n,u),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(o,u),s=s.insert(n,o)):_c("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),s})}function Lp(t,e){var n=Cc(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function Fp(t,e){var n=Cc(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?ld.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new Td(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function Mp(t,e,n){return(0,rs.mG)(this,void 0,void 0,function(){var r,i,s,o;return(0,rs.Jh)(this,function(a){switch(a.label){case 0:r=Cc(t),i=r.Fn.get(e),s=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",s,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!gd(o=a.sent()))throw o;return _c("LocalStore","Failed to update sequence numbers for target "+e+": "+o),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function Vp(t,e,n){var r=Cc(t),i=Oc.min(),s=Qh();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Cc(t),i=r.kn.get(n);return void 0!==i?ld.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,Hl(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){s=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Oc.min(),n?s:Qh())}).next(function(t){return{documents:t,Bn:s}})})}function jp(t,e){var n=Cc(t),r=Cc(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function Up(t){var e=Cc(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Cc(t),i=Bh(),s=xd(n),o=gp(e),a=IDBKeyRange.lowerBound(s,!0);return o.$t({index:Jf.readTimeIndex,range:a},function(t,e){var n=Id(r.R,e);i=i.insert(n.key,n),s=e.readTime}).next(function(){return{wn:i,readTime:kd(s)}})}(e.On,t,e.$n)}).then(function(t){var n=t.wn;return e.$n=t.readTime,n})}function qp(t){return(0,rs.mG)(this,void 0,void 0,function(){var e;return(0,rs.Jh)(this,function(n){return[2,(e=Cc(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=gp(t),n=Oc.min();return e.$t({index:Jf.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=kd(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.$n=t})]})})}function Bp(t,e,n,r){return(0,rs.mG)(this,void 0,void 0,function(){var i,s,o,a,u,c,l,h,f,d;return(0,rs.Jh)(this,function(p){switch(p.label){case 0:for(i=Cc(t),s=Qh(),o=Bh(),a=$h(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(s=s.add(h)),o=o.insert(h,e.Un(l)),a=a.insert(h,e.Kn(l.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,Fp(i,function(t){return Hl(Vl(Mc.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return Rp(t,f,o,Oc.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.qe.addMatchingKeys(t,s,d.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function Gp(t,e,n){return void 0===n&&(n=Qh()),(0,rs.mG)(this,void 0,void 0,function(){var r,i;return(0,rs.Jh)(this,function(s){switch(s.label){case 0:return[4,Fp(t,Hl(Ld(e.bundledQuery)))];case 1:return r=s.sent(),[2,(i=Cc(t)).persistence.runTransaction("Save named query","readwrite",function(t){var s=df(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Ke.saveNamedQuery(t,e);var o=r.withResumeToken(qc.EMPTY_BYTE_STRING,s);return i.Fn=i.Fn.insert(o.targetId,o),i.qe.updateTargetData(t,o).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Ke.saveNamedQuery(t,e)})})]}})})}var zp=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return ld.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:df(n.createTime)}),ld.resolve()},t.prototype.getNamedQuery=function(t,e){return ld.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Ld(t.bundledQuery),readTime:df(t.readTime)}}(e)),ld.resolve()},t}(),Hp=function(){function t(){this.Wn=new jh($p.Gn),this.zn=new jh($p.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new $p(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new $p(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new Yc(new Mc([])),r=new $p(n,t),i=new $p(n,t+1),s=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),s.push(t.key)}),s},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Yc(new Mc([])),n=new $p(e,t),r=new $p(e,t+1),i=Qh();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new $p(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),$p=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Yc.comparator(t.key,e.key)||xc(t.ns,e.ns)},t.Hn=function(t,e){return xc(t.ns,e.ns)||Yc.comparator(t.key,e.key)},t}(),Kp=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new jh($p.Gn)}return t.prototype.checkEmpty=function(t){return ld.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var s=new Sd(i,e,n,r);this._n.push(s);for(var o=0,a=r;o<a.length;o++){var u=a[o];this.rs=this.rs.add(new $p(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return ld.resolve(s)},t.prototype.lookupMutationBatch=function(t,e){return ld.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return ld.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return ld.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return ld.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new $p(e,0),i=new $p(e,Number.POSITIVE_INFINITY),s=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);s.push(e)}),ld.resolve(s)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new jh(xc);return e.forEach(function(t){var e=new $p(t,0),i=new $p(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),ld.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Yc.isDocumentKey(i)||(i=i.child(""));var s=new $p(new Yc(i),0),o=new jh(xc);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.ns)),!0)},s),ld.resolve(this.us(o))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Tc(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return ld.forEach(e.mutations,function(i){var s=new $p(i.key,e.batchId);return r=r.delete(s),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new $p(e,0),r=this.rs.firstAfterOrEqual(n);return ld.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return ld.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Qp=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Fh(Yc.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),s=i?i.size:0,o=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:o,readTime:n}),this.size+=o-s,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return ld.resolve(n?n.document.clone():gl.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Bh();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():gl.newInvalidDocument(t))}),ld.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Bh(),i=new Yc(e.path.child("")),s=this.docs.getIteratorFrom(i);s.hasNext();){var o=s.getNext(),a=o.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(o.key.path))break;c.compareTo(n)<=0||Wl(e,u)&&(r=r.insert(u.key,u.clone()))}return ld.resolve(r)},t.prototype.fs=function(t,e){return ld.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new Zp(this)},t.prototype.getSize=function(t){return ld.resolve(this.size)},t}(),Zp=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,rs.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),ld.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(hp),Wp=function(){function t(t){this.persistence=t,this.ds=new lp(function(t){return vl(t)},_l),this.lastRemoteSnapshotVersion=Oc.min(),this.highestTargetId=0,this.ws=0,this._s=new Hp,this.targetCount=0,this.ys=Yd.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),ld.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return ld.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return ld.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),ld.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),ld.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Yd(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,ld.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),ld.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,ld.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,s=[];return this.ds.forEach(function(o,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(o),s.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),ld.waitFor(s).next(function(){return i})},t.prototype.getTargetCount=function(t){return ld.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return ld.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),ld.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),ld.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),ld.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return ld.resolve(n)},t.prototype.containsKey=function(t,e){return ld.resolve(this._s.containsKey(e))},t}(),Jp=function(){function t(t,e){var n=this;this.gs={},this.Ne=new pc(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Wp(this),this.Ut=new jd,this.Ue=function(t,e){return new Qp(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new Cd(e),this.Ke=new zp(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Kp(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;_c("MemoryPersistence","Starting transaction:",t);var i=new Yp(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return ld.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Yp=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,rs.ZT)(e,t),e}(ud),Xp=function(){function t(t){this.persistence=t,this.As=new Hp,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Ec()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),ld.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),ld.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),ld.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ld.forEach(this.vs,function(r){var i=Yc.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return ld.or([function(){return ld.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),tg=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function eg(t,e){return"firestore_clients_"+t+"_"+e}function ng(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function rg(t,e){return"firestore_targets_"+t+"_"+e}tg.UNAUTHENTICATED=new tg(null),tg.GOOGLE_CREDENTIALS=new tg("google-credentials-uid"),tg.FIRST_PARTY=new tg("first-party-uid");var ig=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,s=JSON.parse(r),o="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return o&&s.error&&(o="string"==typeof s.error.message&&"string"==typeof s.error.code)&&(i=new mc(s.error.code,s.error.message)),o?new t(e,n,s.state,i):(bc("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),sg=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new mc(i.error.code,i.error.message)),s?new t(e,i.state,r):(bc("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),og=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,s=Wh(),o=0;i&&o<r.activeTargetIds.length;++o)i=Jc(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new t(e,s):(bc("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),ag=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(bc("SharedClientState","Failed to parse online state: "+e),null)},t}(),ug=function(){function t(){this.activeTargetIds=Wh()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),cg=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Fh(xc),this.started=!1,this.$s=[];var s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=eg(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new ug),this.Ls=new RegExp("^firestore_clients_"+s+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+s+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+s+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,rs.mG)(this,void 0,void 0,function(){var t,e,n,r,i,s,o,a,u,c,l=this;return(0,rs.Jh)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(eg(this.persistenceKey,r)))&&(s=og.Vs(r,i))&&(this.ks=this.ks.insert(s.clientId,s));for(this.Qs(),(o=this.storage.getItem(this.Us))&&(a=this.js(o))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)this.Fs(c[u]);return this.$s=[],this.window.addEventListener("pagehide",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(rg(this.persistenceKey,t));if(n){var r=sg.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(rg(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return _c("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){_c("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){_c("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(_c("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void bc("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,rs.mG)(e,void 0,void 0,function(){var t,e,r,i,s,o;return(0,rs.Jh)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(s=this.js(n.newValue)))return[2,this.Ws(s)]}else if(n.key===this.Ms)(o=function(t){var e=pc.o;if(null!=t)try{var n=JSON.parse(t);Tc("number"==typeof n),e=n}catch(t){bc("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==pc.o&&this.sequenceNumberHandler(o);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new ig(this.currentUser,t,e,n),i=ng(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=ng(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=rg(this.persistenceKey,t),i=new sg(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return og.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return ig.Vs(new tg(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return sg.Vs(r,e)},t.prototype.js=function(t){return ag.Vs(t)},t.prototype.ii=function(t){return(0,rs.mG)(this,void 0,void 0,function(){return(0,rs.Jh)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(_c("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),s=this.Gs(r),o=[],a=[];return s.forEach(function(t){i.has(t)||o.push(t)}),i.forEach(function(t){s.has(t)||a.push(t)}),this.syncEngine.hi(o,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Wh();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),lg=function(){function t(){this.li=new ug,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new ug,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),hg=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),fg=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){_c("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){_c("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),dg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},pg=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),gg=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return(0,rs.ZT)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,s){var o=new dc;o.listenOnce(cc.COMPLETE,function(){try{switch(o.getLastErrorCode()){case uc.NO_ERROR:var e=o.getResponseJson();_c("Connection","XHR received:",JSON.stringify(e)),i(e);break;case uc.TIMEOUT:_c("Connection",'RPC "'+t+'" timed out'),s(new mc(gc.DEADLINE_EXCEEDED,"Request time out"));break;case uc.HTTP_ERROR:var n=o.getStatus();if(_c("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(gc).indexOf(e)>=0?e:gc.UNKNOWN}(r.status);s(new mc(a,r.message))}else s(new mc(gc.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new mc(gc.UNAVAILABLE,"Connection failed."));break;default:Ec()}}finally{_c("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);o.send(e,"POST",a,n,15)})},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new rc,i=Jo(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new hc({})),this.Fi(s.initMessageHeaders,e),(0,is.uI)()||(0,is.b$)()||(0,is.d)()||(0,is.w1)()||(0,is.Mn)()||(0,is.ru)()||(s.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");_c("Connection","Creating WebChannel: "+o,s);var a=r.createWebChannel(o,s),u=!1,c=!1,l=new pg({Ei:function(t){c?_c("Connection","Not sending because WebChannel is closed:",t):(u||(_c("Connection","Opening WebChannel transport."),a.open(),u=!0),_c("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,fc.EventType.OPEN,function(){c||_c("Connection","WebChannel transport opened.")}),h(a,fc.EventType.CLOSE,function(){c||(c=!0,_c("Connection","WebChannel transport closed"),l.Vi())}),h(a,fc.EventType.ERROR,function(t){c||(c=!0,wc("Connection","WebChannel transport errored:",t),l.Vi(new mc(gc.UNAVAILABLE,"The operation could not be completed")))}),h(a,fc.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Tc(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){_c("Connection","WebChannel received error:",r);var i=r.status,s=function(t){var e=kh[t];if(void 0!==e)return Lh(e)}(i),o=r.message;void 0===s&&(s=gc.INTERNAL,o="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new mc(s,o)),a.close()}else _c("Connection","WebChannel received:",n),l.Si(n)}}),h(i,lc.STAT_EVENT,function(t){10===t.stat?_c("Connection","Detected buffering proxy"):11===t.stat&&_c("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);_c("RestConnection","Sending: ",i,n);var s={};return this.Fi(s,r),this.ki(t,i,s,n).then(function(t){return _c("RestConnection","Received: ",t),t},function(e){throw wc("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.8.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+dg[t]},t}());function mg(){return"undefined"!=typeof window?window:null}function yg(){return"undefined"!=typeof document?document:null}function vg(t){return new cf(t,!0)}var _g=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&_c("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),bg=function(){function t(t,e,n,r,i,s){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=s,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new _g(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,rs.mG)(this,void 0,void 0,function(){return(0,rs.Jh)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,rs.mG)(this,void 0,void 0,function(){return(0,rs.Jh)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,rs.mG)(this,void 0,void 0,function(){return(0,rs.Jh)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===gc.RESOURCE_EXHAUSTED?(bc(e.toString()),bc("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===gc.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new mc(gc.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,rs.mG)(t,void 0,void 0,function(){return(0,rs.Jh)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return _c("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(_c("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),wg=function(t){function e(e,n,r,i,s){var o=this;return(o=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,s)||this).R=i,o}return(0,rs.ZT)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Ec()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.I?(Tc(void 0===e||"string"==typeof e),qc.fromBase64String(e||"")):(Tc(void 0===e||e instanceof Uint8Array),qc.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?gc.UNKNOWN:Lh(t.code);return new mc(e,t.message||"")}(a);n=new ef(r,i,s,o||null)}else if("documentChange"in e){i=yf(t,(r=e.documentChange).document.name),s=df(r.document.updateTime);var a=new dl({mapValue:{fields:r.document.fields}}),u=(o=gl.newFoundDocument(i,s,a),r.targetIds||[]);n=new Xh(u,r.removedTargetIds||[],o.key,o)}else if("documentDelete"in e)i=yf(t,(r=e.documentDelete).document),s=r.readTime?df(r.readTime):Oc.min(),a=gl.newNoDocument(i,s),n=new Xh([],o=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=yf(t,(r=e.documentRemove).document),n=new Xh([],s=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Ec();var c=e.filter;i=new Ph(r=c.count||0),n=new tf(s=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Oc.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Oc.min():e.readTime?df(e.readTime):Oc.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=bf(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=bl(r)?{documents:If(t,r)}:{query:Af(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=hf(t,e.resumeToken):e.snapshotVersion.compareTo(Oc.min())>0&&(n.readTime=lf(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ec()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=bf(this.R),e.removeTarget=t,this.cr(e)},e}(bg),Sg=function(t){function e(e,n,r,i,s){var o=this;return(o=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,s)||this).R=i,o.gr=!1,o}return(0,rs.ZT)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Tc(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Tc(void 0!==e),t.map(function(t){return function(t,e){var n=df(t.updateTime?t.updateTime:e);return n.isEqual(Oc.min())&&(n=df(e)),new gh(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=df(t.commitTime);return this.listener.Tr(n,e)}return Tc(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=bf(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Tf(e.R,t)})};this.cr(n)},e}(bg),Eg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,rs.ZT)(e,t),e.prototype.br=function(){if(this.Rr)throw new mc(gc.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===gc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new mc(gc.UNKNOWN,t.toString())})},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===gc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new mc(gc.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),Tg=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(bc(e),this.Vr=!1):_c("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Cg=function(t,e,n,r,i){var s=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return(0,rs.mG)(s,void 0,void 0,function(){return(0,rs.Jh)(this,function(t){switch(t.label){case 0:return Rg(this)?(_c("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,rs.mG)(this,void 0,void 0,function(){var e;return(0,rs.Jh)(this,function(n){switch(n.label){case 0:return(e=Cc(t)).Or.add(4),[4,Ag(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Ig(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new Tg(n,r)};function Ig(t){return(0,rs.mG)(this,void 0,void 0,function(){var e,n;return(0,rs.Jh)(this,function(r){switch(r.label){case 0:if(!Rg(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Ag(t){return(0,rs.mG)(this,void 0,void 0,function(){var e,n;return(0,rs.Jh)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function xg(t,e){var n=Cc(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Pg(n)?Og(n):Zg(n).er()&&Dg(n,e))}function kg(t,e){var n=Cc(t),r=Zg(n);n.$r.delete(e),r.er()&&Ng(n,e),0===n.$r.size&&(r.er()?r.ir():Rg(n)&&n.Br.set("Unknown"))}function Dg(t,e){t.qr.U(e.targetId),Zg(t).mr(e)}function Ng(t,e){t.qr.U(e),Zg(t).yr(e)}function Og(t){t.qr=new rf({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),Zg(t).start(),t.Br.Sr()}function Pg(t){return Rg(t)&&!Zg(t).tr()&&t.$r.size>0}function Rg(t){return 0===Cc(t).Or.size}function Lg(t){t.qr=void 0}function Fg(t){return(0,rs.mG)(this,void 0,void 0,function(){return(0,rs.Jh)(this,function(e){return t.$r.forEach(function(e,n){Dg(t,e)}),[2]})})}function Mg(t,e){return(0,rs.mG)(this,void 0,void 0,function(){return(0,rs.Jh)(this,function(n){return Lg(t),Pg(t)?(t.Br.Nr(e),Og(t)):t.Br.set("Unknown"),[2]})})}function Vg(t,e,n){return(0,rs.mG)(this,void 0,void 0,function(){var r,i,s;return(0,rs.Jh)(this,function(o){switch(o.label){case 0:if(t.Br.set("Online"),!(e instanceof ef&&2===e.state&&e.cause))return[3,6];o.label=1;case 1:return o.trys.push([1,3,,5]),[4,function(t,e){return(0,rs.mG)(this,void 0,void 0,function(){var n,r,i,s;return(0,rs.Jh)(this,function(o){switch(o.label){case 0:n=e.cause,r=0,i=e.targetIds,o.label=1;case 1:return r<i.length?t.$r.has(s=i[r])?[4,t.remoteSyncer.rejectListen(s,n)]:[3,3]:[3,5];case 2:o.sent(),t.$r.delete(s),t.qr.removeTarget(s),o.label=3;case 3:o.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return o.sent(),[3,5];case 3:return r=o.sent(),_c("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,jg(t,r)];case 4:return o.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Xh?t.qr.X(e):e instanceof tf?t.qr.rt(e):t.qr.et(e),n.isEqual(Oc.min()))return[3,13];o.label=7;case 7:return o.trys.push([7,11,,13]),[4,Op(t.localStore)];case 8:return i=o.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(qc.EMPTY_BYTE_STRING,n.snapshotVersion)),Ng(t,e);var r=new Td(n.target,e,1,n.sequenceNumber);Dg(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:o.sent(),o.label=10;case 10:return[3,13];case 11:return _c("RemoteStore","Failed to raise snapshot:",s=o.sent()),[4,jg(t,s)];case 12:return o.sent(),[3,13];case 13:return[2]}})})}function jg(t,e,n){return(0,rs.mG)(this,void 0,void 0,function(){var r=this;return(0,rs.Jh)(this,function(i){switch(i.label){case 0:if(!gd(e))throw e;return t.Or.add(1),[4,Ag(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Op(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return(0,rs.mG)(r,void 0,void 0,function(){return(0,rs.Jh)(this,function(e){switch(e.label){case 0:return _c("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Ig(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Ug(t,e){return e().catch(function(n){return jg(t,n,e)})}function qg(t){return(0,rs.mG)(this,void 0,void 0,function(){var e,n,r,i,s;return(0,rs.Jh)(this,function(o){switch(o.label){case 0:e=Cc(t),n=Wg(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,o.label=1;case 1:if(!function(t){return Rg(t)&&t.kr.length<10}(e))return[3,7];o.label=2;case 2:return o.trys.push([2,4,,6]),[4,Lp(e.localStore,r)];case 3:return null===(i=o.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Wg(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return s=o.sent(),[4,jg(e,s)];case 5:return o.sent(),[3,6];case 6:return[3,1];case 7:return Bg(e)&&Gg(e),[2]}})})}function Bg(t){return Rg(t)&&!Wg(t).tr()&&t.kr.length>0}function Gg(t){Wg(t).start()}function zg(t){return(0,rs.mG)(this,void 0,void 0,function(){return(0,rs.Jh)(this,function(e){return Wg(t).Ar(),[2]})})}function Hg(t){return(0,rs.mG)(this,void 0,void 0,function(){var e,n,r;return(0,rs.Jh)(this,function(i){for(e=Wg(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function $g(t,e,n){return(0,rs.mG)(this,void 0,void 0,function(){var r,i;return(0,rs.Jh)(this,function(s){switch(s.label){case 0:return r=t.kr.shift(),i=Ed.from(r,e,n),[4,Ug(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return s.sent(),[4,qg(t)];case 2:return s.sent(),[2]}})})}function Kg(t,e){return(0,rs.mG)(this,void 0,void 0,function(){return(0,rs.Jh)(this,function(n){switch(n.label){case 0:return e&&Wg(t).pr?[4,function(t,e){return(0,rs.mG)(this,void 0,void 0,function(){var n,r;return(0,rs.Jh)(this,function(i){switch(i.label){case 0:return Rh(r=e.code)&&r!==gc.ABORTED?(n=t.kr.shift(),Wg(t).sr(),[4,Ug(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,qg(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Bg(t)&&Gg(t),[2]}})})}function Qg(t,e){return(0,rs.mG)(this,void 0,void 0,function(){var n;return(0,rs.Jh)(this,function(r){switch(r.label){case 0:return n=Cc(t),e?(n.Or.delete(2),[4,Ig(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Ag(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Zg(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Cc(t);return r.br(),new wg(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Fg.bind(null,t),Ri:Mg.bind(null,t),_r:Vg.bind(null,t)}),t.Mr.push(function(n){return(0,rs.mG)(e,void 0,void 0,function(){return(0,rs.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Pg(t)?Og(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Lg(t),e.label=3;case 3:return[2]}})})})),t.Ur}function Wg(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=Cc(t);return r.br(),new Sg(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:zg.bind(null,t),Ri:Kg.bind(null,t),Ir:Hg.bind(null,t),Tr:$g.bind(null,t)}),t.Mr.push(function(n){return(0,rs.mG)(e,void 0,void 0,function(){return(0,rs.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,qg(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.kr.length>0&&(_c("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Kr}var Jg=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new cd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,s){var o=new t(e,n,Date.now()+r,i,s);return o.start(r),o},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new mc(gc.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Yg(t,e){if(bc("AsyncQueue",e+": "+t),gd(t))return new mc(gc.UNAVAILABLE,e+": "+t);throw t}var Xg=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Yc.comparator(e.key,n.key)}:function(t,e){return Yc.comparator(t.key,e.key)},this.keyedMap=zh(),this.sortedSet=new Fh(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),tm=function(){function t(){this.Qr=new Fh(Yc.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):Ec():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),em=function(){function t(t,e,n,r,i,s,o,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var s=[];return n.forEach(function(t){s.push({type:0,doc:t})}),new t(e,n,Xg.emptySet(n),s,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Kl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),nm=function(){this.Wr=void 0,this.listeners=[]},rm=function(){this.queries=new lp(function(t){return Ql(t)},Kl),this.onlineState="Unknown",this.Gr=new Set};function im(t,e){return(0,rs.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u;return(0,rs.Jh)(this,function(c){switch(c.label){case 0:if(n=Cc(t),i=!1,(s=n.queries.get(r=e.query))||(i=!0,s=new nm),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),o=s,[4,n.onListen(r)];case 2:return o.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Yg(a,"Initialization of query '"+Zl(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,s),s.listeners.push(e),e.zr(n.onlineState),s.Wr&&e.Hr(s.Wr)&&um(n),[2]}})})}function sm(t,e){return(0,rs.mG)(this,void 0,void 0,function(){var n,r,i,s,o;return(0,rs.Jh)(this,function(a){return n=Cc(t),i=!1,(s=n.queries.get(r=e.query))&&(o=s.listeners.indexOf(e))>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function om(t,e){for(var n=Cc(t),r=!1,i=0,s=e;i<s.length;i++){var o=s[i],a=n.queries.get(o.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(o)&&(r=!0);a.Wr=o}}r&&um(n)}function am(t,e,n){var r=Cc(t),i=r.queries.get(e);if(i)for(var s=0,o=i.listeners;s<o.length;s++)o[s].onError(n);r.queries.delete(e)}function um(t){t.Gr.forEach(function(t){t.next()})}var cm=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new em(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var s=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),s=!0):this.eo(t,this.onlineState)&&(this.no(t),s=!0),this.Xr=t,s},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=em.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),lm=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),hm=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return yf(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Ef(this.R,t.document,!1):gl.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return df(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new hm(this.R),r=0,i=t;r<i.length;r++){var s=i[r];if(s.metadata.queries)for(var o=n.qn(s.metadata.name),a=0,u=s.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||Qh()).add(o);e.set(c,l)}}return e},t.prototype.complete=function(){return(0,rs.mG)(this,void 0,void 0,function(){var t,e,n,r,i;return(0,rs.Jh)(this,function(s){switch(s.label){case 0:return[4,Bp(this.localStore,new hm(this.R),this.documents,this.ro.id)];case 1:t=s.sent(),e=this.co(this.documents),n=0,r=this.queries,s.label=2;case 2:return n<r.length?[4,Gp(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:s.sent(),s.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Tp(Object.assign({},this.progress),t))]}})})}}();var fm=function(t){this.key=t},dm=function(t){this.key=t},pm=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Qh(),this.mutatedKeys=Qh(),this.lo=Jl(t),this.fo=new Xg(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new tm,i=e?e.fo:this.fo,s=e?e.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=jl(this.query)&&i.size===this.query.limit?i.last():null,c=Ul(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=Wl(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(o=o.add(h),s=d?s.add(t):s.delete(t)):(o=o.delete(t),s=s.delete(t)))}),jl(this.query)||Ul(this.query))for(;o.size>this.query.limit;){var l=jl(this.query)?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{fo:o,mo:r,Nn:a,mutatedKeys:s}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var s=t.mo.jr();s.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ec()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var o=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==s.length||u?{snapshot:new em(this.query,t.fo,i,s,t.mutatedKeys,0===a,u,!1),To:o}:{To:o}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new tm,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Qh(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new dm(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new fm(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Qh();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return em.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),gm=function(t,e,n){this.query=t,this.targetId=e,this.view=n},mm=function(t){this.key=t,this.bo=!1},ym=function(){function t(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.vo={},this.Po=new lp(function(t){return Ql(t)},Kl),this.Vo=new Map,this.So=new Set,this.Do=new Fh(Yc.comparator),this.Co=new Map,this.No=new Hp,this.xo={},this.Fo=new Map,this.ko=Yd.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function vm(t,e){return(0,rs.mG)(this,void 0,void 0,function(){var n,r,i,s,o;return(0,rs.Jh)(this,function(a){switch(a.label){case 0:return n=Km(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,Fp(n.localStore,Hl(e))];case 2:return s=a.sent(),o=n.sharedClientState.addLocalQueryTarget(s.targetId),[4,_m(n,e,s.targetId,"current"===o)];case 3:r=a.sent(),n.isPrimaryClient&&xg(n.remoteStore,s),a.label=4;case 4:return[2,r]}})})}function _m(t,e,n,r){return(0,rs.mG)(this,void 0,void 0,function(){var i,s,o,a,u,c;return(0,rs.Jh)(this,function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return(0,rs.mG)(this,void 0,void 0,function(){var i,s,o;return(0,rs.Jh)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Vp(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return s=r&&r.targetChanges.get(e.targetId),o=e.view.applyChanges(i,t.isPrimaryClient,s),[2,(Om(t,e.targetId,o.To),o.snapshot)]}})})}(t,e,n,r)},[4,Vp(t.localStore,e,!0)];case 1:return i=l.sent(),s=new pm(e,i.Bn),o=s._o(i.documents),a=Yh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=s.applyChanges(o,t.isPrimaryClient,a),Om(t,n,u.To),c=new gm(e,n,s),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function bm(t,e){return(0,rs.mG)(this,void 0,void 0,function(){var n,r,i;return(0,rs.Jh)(this,function(s){switch(s.label){case 0:return n=Cc(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!Kl(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Mp(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),kg(n.remoteStore,r.targetId),Dm(n,r.targetId)}).catch(rp)]):[3,3];case 1:s.sent(),s.label=2;case 2:return[3,5];case 3:return Dm(n,r.targetId),[4,Mp(n.localStore,r.targetId,!0)];case 4:s.sent(),s.label=5;case 5:return[2]}})})}function wm(t,e,n){return(0,rs.mG)(this,void 0,void 0,function(){var r,i,s,o;return(0,rs.Jh)(this,function(a){switch(a.label){case 0:r=Qm(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Cc(t),i=Nc.now(),s=e.reduce(function(t,e){return t.add(e.key)},Qh());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,s).next(function(s){n=s;for(var o=[],a=0,u=e;a<u.length;a++){var c=u[a],l=wh(c,n.get(c.key));null!=l&&o.push(new Ch(c.key,l,pl(l.value.mapValue),mh.exists(!0)))}return r._n.addMutationBatch(t,i,o,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Fh(xc)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Lm(r,i.changes)];case 3:return a.sent(),[4,qg(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return s=a.sent(),o=Yg(s,"Failed to persist write"),n.reject(o),[3,6];case 6:return[2]}})})}function Sm(t,e){return(0,rs.mG)(this,void 0,void 0,function(){var n,r;return(0,rs.Jh)(this,function(i){switch(i.label){case 0:n=Cc(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Pp(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(Tc(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Tc(r.bo):t.removedDocuments.size>0&&(Tc(r.bo),r.bo=!1))}),[4,Lm(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,rp(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Em(t,e,n){var r=Cc(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Cc(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,s=n.listeners;i<s.length;i++)s[i].zr(e)&&(r=!0)}),r&&um(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Tm(t,e,n){return(0,rs.mG)(this,void 0,void 0,function(){var r,i,s,o,a,u;return(0,rs.Jh)(this,function(c){switch(c.label){case 0:return(r=Cc(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(s=i&&i.key)?(o=(o=new Fh(Yc.comparator)).insert(s,gl.newNoDocument(s,Oc.min())),a=Qh().add(s),u=new Jh(Oc.min(),new Map,new jh(xc),o,a),[4,Sm(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(s),r.Co.delete(e),Rm(r),[3,4];case 2:return[4,Mp(r.localStore,e,!1).then(function(){return Dm(r,e,n)}).catch(rp)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Cm(t,e){return(0,rs.mG)(this,void 0,void 0,function(){var n,r,i;return(0,rs.Jh)(this,function(s){switch(s.label){case 0:n=Cc(t),r=e.batch.batchId,s.label=1;case 1:return s.trys.push([1,4,,6]),[4,Np(n.localStore,e)];case 2:return i=s.sent(),km(n,r,null),xm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Lm(n,i)];case 3:return s.sent(),[3,6];case 4:return[4,rp(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function Im(t,e,n){return(0,rs.mG)(this,void 0,void 0,function(){var r,i;return(0,rs.Jh)(this,function(s){switch(s.label){case 0:r=Cc(t),s.label=1;case 1:return s.trys.push([1,4,,6]),[4,function(t,e){var n=Cc(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return Tc(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=s.sent(),km(r,e,n),xm(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Lm(r,i)];case 3:return s.sent(),[3,6];case 4:return[4,rp(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function Am(t,e){return(0,rs.mG)(this,void 0,void 0,function(){var n,r,i,s,o;return(0,rs.Jh)(this,function(a){switch(a.label){case 0:Rg((n=Cc(t)).remoteStore)||_c("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Cc(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return s=a.sent(),o=Yg(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(o),[3,4];case 4:return[2]}})})}function xm(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function km(t,e,n){var r=Cc(t),i=r.xo[r.currentUser.toKey()];if(i){var s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Dm(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var s=i[r];t.Po.delete(s),n&&t.vo.Mo(s,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||Nm(t,e)})}function Nm(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(kg(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Rm(t))}function Om(t,e,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];s instanceof fm?(t.No.addReference(s.key,e),Pm(t,s)):s instanceof dm?(_c("SyncEngine","Document no longer in limbo: "+s.key),t.No.removeReference(s.key,e),t.No.containsKey(s.key)||Nm(t,s.key)):Ec()}}function Pm(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(_c("SyncEngine","New document in limbo: "+n),t.So.add(r),Rm(t))}function Rm(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Yc(Mc.fromString(e)),r=t.ko.next();t.Co.set(r,new mm(n)),t.Do=t.Do.insert(n,r),xg(t.remoteStore,new Td(Hl(Vl(n.path)),r,2,pc.o))}}function Lm(t,e,n){return(0,rs.mG)(this,void 0,void 0,function(){var r,i,s,o;return(0,rs.Jh)(this,function(a){switch(a.label){case 0:return r=Cc(t),i=[],s=[],o=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){o.push(r.Oo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Ip.Pn(a.targetId,t);s.push(e)}}))}),[4,Promise.all(o)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return(0,rs.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u,c;return(0,rs.Jh)(this,function(l){switch(l.label){case 0:n=Cc(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return ld.forEach(e,function(e){return ld.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return ld.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!gd(r=l.sent()))throw r;return _c("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,s=e;i<s.length;i++)a=(o=s[i]).targetId,o.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,s)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function Fm(t,e){return(0,rs.mG)(this,void 0,void 0,function(){var n,r;return(0,rs.Jh)(this,function(i){switch(i.label){case 0:return(n=Cc(t)).currentUser.isEqual(e)?[3,3]:(_c("SyncEngine","User change. New user:",e.toKey()),[4,Dp(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new mc(gc.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Lm(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Mm(t,e){var n=Cc(t),r=n.Co.get(e);if(r&&r.bo)return Qh().add(r.key);var i=Qh(),s=n.Vo.get(e);if(!s)return i;for(var o=0,a=s;o<a.length;o++){var u=n.Po.get(a[o]);i=i.unionWith(u.view.wo)}return i}function Vm(t,e){return(0,rs.mG)(this,void 0,void 0,function(){var n,r,i;return(0,rs.Jh)(this,function(s){switch(s.label){case 0:return[4,Vp((n=Cc(t)).localStore,e.query,!0)];case 1:return r=s.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Om(n,e.targetId,i.To),i)]}})})}function jm(t){return(0,rs.mG)(this,void 0,void 0,function(){var e;return(0,rs.Jh)(this,function(n){return[2,Up((e=Cc(t)).localStore).then(function(t){return Lm(e,t)})]})})}function Um(t,e,n,r){return(0,rs.mG)(this,void 0,void 0,function(){var i,s;return(0,rs.Jh)(this,function(o){switch(o.label){case 0:return[4,function(t,e){var n=Cc(t),r=Cc(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):ld.resolve(null)})})}((i=Cc(t)).localStore,e)];case 1:return null===(s=o.sent())?[3,6]:"pending"!==n?[3,3]:[4,qg(i.remoteStore)];case 2:return o.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(km(i,e,r||null),xm(i,e),function(t,e){Cc(Cc(t)._n).Gt(e)}(i.localStore,e)):Ec(),o.label=4;case 4:return[4,Lm(i,s)];case 5:return o.sent(),[3,7];case 6:_c("SyncEngine","Cannot apply mutation batch with id: "+e),o.label=7;case 7:return[2]}})})}function qm(t,e){return(0,rs.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u;return(0,rs.Jh)(this,function(c){switch(c.label){case 0:return Km(n=Cc(t)),Qm(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Bm(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,Qg(n.remoteStore,!0)];case 2:for(c.sent(),s=0,o=i;s<o.length;s++)xg(n.remoteStore,o[s]);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return Dm(n,e),Mp(n.localStore,e,!0)}),kg(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,Bm(n,a)];case 5:return c.sent(),function(t){var e=Cc(t);e.Co.forEach(function(t,n){kg(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new Fh(Yc.comparator)}(n),n.$o=!1,[4,Qg(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function Bm(t,e,n){return(0,rs.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u,c,l,h,f,d,p;return(0,rs.Jh)(this,function(g){switch(g.label){case 0:n=Cc(t),r=[],i=[],s=0,o=e,g.label=1;case 1:return s<o.length?(u=void 0,(c=n.Vo.get(a=o[s]))&&0!==c.length?[4,Fp(n.localStore,Hl(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,Vm(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,jp(n.localStore,a)];case 8:return p=g.sent(),[4,Fp(n.localStore,p)];case 9:return u=g.sent(),[4,_m(n,Gm(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return s++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function Gm(t){return Ml(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function zm(t){var e=Cc(t);return Cc(Cc(e.localStore).persistence).fn()}function Hm(t,e,n,r){return(0,rs.mG)(this,void 0,void 0,function(){var i,s,o;return(0,rs.Jh)(this,function(a){switch(a.label){case 0:return(i=Cc(t)).$o?(_c("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Up(i.localStore)];case 3:return s=a.sent(),o=Jh.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Lm(i,s,o)];case 4:return a.sent(),[3,8];case 5:return[4,Mp(i.localStore,e,!0)];case 6:return a.sent(),Dm(i,e,r),[3,8];case 7:Ec(),a.label=8;case 8:return[2]}})})}function $m(t,e,n){return(0,rs.mG)(this,void 0,void 0,function(){var r,i,s,o,a,u,c,l,h;return(0,rs.Jh)(this,function(f){switch(f.label){case 0:if(!(r=Km(t)).$o)return[3,10];i=0,s=e,f.label=1;case 1:return i<s.length?r.Vo.has(o=s[i])?(_c("SyncEngine","Adding an already active target "+o),[3,5]):[4,jp(r.localStore,o)]:[3,6];case 2:return a=f.sent(),[4,Fp(r.localStore,a)];case 3:return u=f.sent(),[4,_m(r,Gm(a),u.targetId,!1)];case 4:f.sent(),xg(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return(0,rs.Jh)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Mp(r.localStore,t,!1).then(function(){kg(r.remoteStore,t),Dm(r,t)}).catch(rp)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function Km(t){var e=Cc(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Sm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mm.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Tm.bind(null,e),e.vo._r=om.bind(null,e.eventManager),e.vo.Mo=am.bind(null,e.eventManager),e}function Qm(t){var e=Cc(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Cm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Im.bind(null,e),e}var Zm=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,rs.mG)(this,void 0,void 0,function(){return(0,rs.Jh)(this,function(e){switch(e.label){case 0:return this.R=vg(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return kp(this.persistence,new Ap,t.initialUser,this.R)},t.prototype.qo=function(t){return new Jp(Xp.bs,this.R)},t.prototype.Bo=function(t){return new lg},t.prototype.terminate=function(){return(0,rs.mG)(this,void 0,void 0,function(){return(0,rs.Jh)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Wm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,rs.ZT)(e,t),e.prototype.initialize=function(e){return(0,rs.mG)(this,void 0,void 0,function(){return(0,rs.Jh)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,qp(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,Qm(this.Qo.syncEngine)];case 4:return n.sent(),[4,qg(this.Qo.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Ko=function(t){return kp(this.persistence,new Ap,t.initialUser,this.R)},e.prototype.Uo=function(t){return new op(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Ep(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?zd.withCacheSize(this.cacheSizeBytes):zd.DEFAULT;return new bp(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,mg(),yg(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new lg},e}(Zm),Jm=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,rs.ZT)(e,t),e.prototype.initialize=function(e){return(0,rs.mG)(this,void 0,void 0,function(){var n,r=this;return(0,rs.Jh)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof cg?(this.sharedClientState.syncEngine={ui:Um.bind(null,n),ai:Hm.bind(null,n),hi:$m.bind(null,n),fn:zm.bind(null,n),ci:jm.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return(0,rs.mG)(r,void 0,void 0,function(){return(0,rs.Jh)(this,function(e){switch(e.label){case 0:return[4,qm(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=mg();if(!cg.yt(e))throw new mc(gc.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Ep(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new cg(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Wm),Ym=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,rs.mG)(this,void 0,void 0,function(){var n=this;return(0,rs.Jh)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Em(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Fm.bind(null,this.syncEngine),[4,Qg(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new rm},t.prototype.createDatastore=function(t){var e=vg(t.databaseInfo.databaseId),n=new gg(t.databaseInfo);return function(t,e,n){return new Eg(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,s,o=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Em(o.syncEngine,t,0)},s=fg.yt()?new fg:new hg,new Cg(e,n,r,i,s)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,s,o){var a=new ym(t,e,n,r,i,s);return o&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,rs.mG)(this,void 0,void 0,function(){var e;return(0,rs.Jh)(this,function(n){switch(n.label){case 0:return e=Cc(t),_c("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Ag(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),Xm=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),ty=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new cd,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,rs.mG)(this,void 0,void 0,function(){return(0,rs.Jh)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return(0,rs.mG)(this,void 0,void 0,function(){return(0,rs.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return(0,rs.mG)(this,void 0,void 0,function(){var t,e,n,r;return(0,rs.Jh)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new lm(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return(0,rs.mG)(this,void 0,void 0,function(){var t,e;return(0,rs.Jh)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return(0,rs.mG)(this,void 0,void 0,function(){var e;return(0,rs.Jh)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,rs.mG)(this,void 0,void 0,function(){var t,e;return(0,rs.Jh)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,rs.mG)(this,void 0,void 0,function(){var e,n=this;return(0,rs.Jh)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new mc(gc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,rs.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a;return(0,rs.Jh)(this,function(u){switch(u.label){case 0:return n=Cc(t),r=bf(n.R)+"/documents",i={documents:e.map(function(t){return mf(n.R,t)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return s=u.sent(),o=new Map,s.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Tc(!!e.found);var n=yf(t,e.found.name),r=df(e.found.updateTime),i=new dl({mapValue:{fields:e.found.fields}});return gl.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Tc(!!e.missing),Tc(!!e.readTime);var n=yf(t,e.missing),r=df(e.readTime);return gl.newNoDocument(n,r)}(t,e):Ec()}(n.R,t);o.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=o.get(t.toString());Tc(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Nh(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,rs.mG)(this,void 0,void 0,function(){var t,e=this;return(0,rs.Jh)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Yc.fromPath(n);e.mutations.push(new Oh(r,e.precondition(r)))}),[4,function(t,e){return(0,rs.mG)(this,void 0,void 0,function(){var n,r,i;return(0,rs.Jh)(this,function(s){switch(s.label){case 0:return n=Cc(t),r=bf(n.R)+"/documents",i={writes:e.map(function(t){return Tf(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return s.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Ec();e=Oc.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new mc(gc.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?mh.updateTime(e):mh.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Oc.min()))throw new mc(gc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return mh.updateTime(e)}return mh.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),ey=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new _g(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,rs.mG)(t,void 0,void 0,function(){var t,e,n=this;return(0,rs.Jh)(this,function(r){return t=new ty(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Zc(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Rh(e)}return!1},t}(),ny=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=tg.UNAUTHENTICATED,this.clientId=Ac.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(t){return(0,rs.mG)(r,void 0,void 0,function(){return(0,rs.Jh)(this,function(e){switch(e.label){case 0:return _c("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}})})})}return t.prototype.getConfiguration=function(){return(0,rs.mG)(this,void 0,void 0,function(){return(0,rs.Jh)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new mc(gc.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new cd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,rs.mG)(t,void 0,void 0,function(){var t,n;return(0,rs.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Yg(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function ry(t,e){return(0,rs.mG)(this,void 0,void 0,function(){var n,r,i=this;return(0,rs.Jh)(this,function(s){switch(s.label){case 0:return t.asyncQueue.verifyOperationInProgress(),_c("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=s.sent(),[4,e.initialize(n)];case 2:return s.sent(),r=n.initialUser,t.setCredentialChangeListener(function(t){return(0,rs.mG)(i,void 0,void 0,function(){return(0,rs.Jh)(this,function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Dp(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function iy(t,e){return(0,rs.mG)(this,void 0,void 0,function(){var n,r;return(0,rs.Jh)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,sy(t)];case 1:return n=i.sent(),_c("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(t){return function(t,e){return(0,rs.mG)(this,void 0,void 0,function(){var n,r;return(0,rs.Jh)(this,function(i){switch(i.label){case 0:return(n=Cc(t)).asyncQueue.verifyOperationInProgress(),_c("RemoteStore","RemoteStore received new credentials"),r=Rg(n),n.Or.add(3),[4,Ag(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,Ig(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,t)}),t.onlineComponents=e,[2]}})})}function sy(t){return(0,rs.mG)(this,void 0,void 0,function(){return(0,rs.Jh)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(_c("FirestoreClient","Using default OfflineComponentProvider"),[4,ry(t,new Zm)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function oy(t){return(0,rs.mG)(this,void 0,void 0,function(){return(0,rs.Jh)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(_c("FirestoreClient","Using default OnlineComponentProvider"),[4,iy(t,new Ym)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function ay(t){return sy(t).then(function(t){return t.persistence})}function uy(t){return sy(t).then(function(t){return t.localStore})}function cy(t){return oy(t).then(function(t){return t.remoteStore})}function ly(t){return oy(t).then(function(t){return t.syncEngine})}function hy(t){return(0,rs.mG)(this,void 0,void 0,function(){var e,n;return(0,rs.Jh)(this,function(r){switch(r.label){case 0:return[4,oy(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=vm.bind(null,e.syncEngine),n.onUnlisten=bm.bind(null,e.syncEngine),n)]}})})}function fy(t,e,n){var r=this;void 0===n&&(n={});var i=new cd;return t.asyncQueue.enqueueAndForget(function(){return(0,rs.mG)(r,void 0,void 0,function(){var r;return(0,rs.Jh)(this,function(s){switch(s.label){case 0:return r=function(t,e,n,r,i){var s=new Xm({next:function(s){e.enqueueAndForget(function(){return sm(t,o)});var a=s.docs.has(n);!a&&s.fromCache?i.reject(new mc(gc.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new mc(gc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:function(t){return i.reject(t)}}),o=new cm(Vl(n.path),s,{includeMetadataChanges:!0,so:!0});return im(t,o)},[4,hy(t)];case 1:return[2,r.apply(void 0,[s.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function dy(t,e,n){var r=this;void 0===n&&(n={});var i=new cd;return t.asyncQueue.enqueueAndForget(function(){return(0,rs.mG)(r,void 0,void 0,function(){var r;return(0,rs.Jh)(this,function(s){switch(s.label){case 0:return r=function(t,e,n,r,i){var s=new Xm({next:function(n){e.enqueueAndForget(function(){return sm(t,o)}),n.fromCache&&"server"===r.source?i.reject(new mc(gc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),o=new cm(n,s,{includeMetadataChanges:!0,so:!0});return im(t,o)},[4,hy(t)];case 1:return[2,r.apply(void 0,[s.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var py=function(t,e,n,r,i,s,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a},gy=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),my=new Map,yy=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},vy=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(tg.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),_y=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),by=function(){function t(t){var e=this;this.currentUser=tg.UNAUTHENTICATED,this.oc=new cd,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var n=function(t){_c("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit(function(t){return n(t)}),setTimeout(function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(_c("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(_c("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Tc("string"==typeof n.accessToken),new yy(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return(0,rs.mG)(n,void 0,void 0,function(){return(0,rs.Jh)(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Tc(null===t||"string"==typeof t),new tg(t)},t}(),wy=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=tg.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Sy=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new wy(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(tg.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Ey(t,e,n){if(!n)throw new mc(gc.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Ty(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new mc(gc.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Cy(t,e,n,r){if(!0===e&&!0===r)throw new mc(gc.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Iy(t){if(!Yc.isDocumentKey(t))throw new mc(gc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Ay(t){if(Yc.isDocumentKey(t))throw new mc(gc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function xy(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Ec()}function ky(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new mc(gc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=xy(t);throw new mc(gc.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Dy(t,e){if(e<=0)throw new mc(gc.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Ny=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new mc(gc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new mc(gc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Cy("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Oy=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ny({}),this._settingsFrozen=!1,t instanceof gy?(this._databaseId=t,this._credentials=new vy):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new mc(gc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gy(t.options.projectId)}(t),this._credentials=new by(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new mc(gc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new mc(gc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ny(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new vy;switch(t.type){case"gapi":var e=t.client;return Tc(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Sy(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new mc(gc.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=my.get(this))&&(_c("ComponentProvider","Removing Datastore"),my.delete(this),t.terminate()),Promise.resolve();var t},t}(),Py=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Ly(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Ry=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Ly=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Vl(r))||this)._path=r,i.type="collection",i}return(0,rs.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Py(this.firestore,null,new Yc(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Ry);function Fy(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,is.m9)(t),Ey("collection","path",e),t instanceof Oy)return Ay(n=Mc.fromString.apply(Mc,(0,rs.ev)([e],r))),new Ly(t,null,n);if(!(t instanceof Py||t instanceof Ly))throw new mc(gc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Ay(n=Mc.fromString.apply(Mc,(0,rs.ev)([t.path],r)).child(Mc.fromString(e))),new Ly(t.firestore,null,n)}function My(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,is.m9)(t),1===arguments.length&&(e=Ac.u()),Ey("doc","path",e),t instanceof Oy)return Iy(n=Mc.fromString.apply(Mc,(0,rs.ev)([e],r))),new Py(t,null,new Yc(n));if(!(t instanceof Py||t instanceof Ly))throw new mc(gc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Iy(n=t._path.child(Mc.fromString.apply(Mc,(0,rs.ev)([e],r)))),new Py(t.firestore,t instanceof Ly?t.converter:null,new Yc(n))}function Vy(t,e){return t=(0,is.m9)(t),e=(0,is.m9)(e),(t instanceof Py||t instanceof Ly)&&(e instanceof Py||e instanceof Ly)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function jy(t,e){return t=(0,is.m9)(t),e=(0,is.m9)(e),t instanceof Ry&&e instanceof Ry&&t.firestore===e.firestore&&Kl(t._query,e._query)&&t.converter===e.converter}var Uy=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new _g(this,"async_queue_retry"),this.Ic=function(){var e=yg();e&&_c("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=yg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=yg();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise(function(){});var n=new cd;return this.Rc(function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)}).then(function(){return n.promise})},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.bc()})},t.prototype.bc=function(){return(0,rs.mG)(this,void 0,void 0,function(){var t,e=this;return(0,rs.Jh)(this,function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!gd(t=n.sent()))throw t;return _c("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.bc()}),n.label=5;case 5:return[2]}})})},t.prototype.Rc=function(t){var e=this,n=this.dc.then(function(){return e.gc=!0,t().catch(function(t){throw e.yc=t,e.gc=!1,bc("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.gc=!1,t})});return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=Jg.createAndSchedule(this,t,e,n,function(t){return r.vc(t)});return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&Ec()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return(0,rs.mG)(this,void 0,void 0,function(){var t;return(0,rs.Jh)(this,function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then(function(){e.mc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()})},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function qy(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var s=i[r];if(s in n&&"function"==typeof n[s])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new cd,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var By=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Uy,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,rs.ZT)(e,t),e.prototype._terminate=function(){return this._firestoreClient||zy(this),this._firestoreClient.terminate()},e}(Oy);function Gy(t){return t._firestoreClient||zy(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function zy(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new py(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new ny(t._credentials,t._queue,r)}function Hy(t,e,n){var r=this,i=new cd;return t.asyncQueue.enqueue(function(){return(0,rs.mG)(r,void 0,void 0,function(){var r;return(0,rs.Jh)(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,ry(t,n)];case 1:return s.sent(),[4,iy(t,e)];case 2:return s.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===gc.FAILED_PRECONDITION||t.code===gc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=s.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function $y(t){if(t._initialized||t._terminated)throw new mc(gc.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Ky=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new mc(gc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jc(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Qy=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(qc.fromBase64String(e))}catch(e){throw new mc(gc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(qc.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Zy=function(t){this._methodName=t},Wy=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new mc(gc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new mc(gc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return xc(this._lat,t._lat)||xc(this._long,t._long)},t}(),Jy=/^__.*__$/,Yy=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Ch(t,this.data,this.fieldMask,e,this.fieldTransforms):new Th(t,this.data,e,this.fieldTransforms)},t}(),Xy=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Ch(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function tv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ec()}}var ev=function(){function t(t,e,n,r,i,s){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Fc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,kc:!0})},t.prototype.Lc=function(t){return wv(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(tv(this.Nc)&&Jy.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),nv=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||vg(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new ev({Nc:t,methodName:e,qc:n,path:jc.emptyPath(),kc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function rv(t){var e=t._freezeSettings(),n=vg(t._databaseId);return new nv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function iv(t,e,n,r,i,s){void 0===s&&(s={});var o=t.Uc(s.merge||s.mergeFields?2:0,e,n,i);yv("Data must be an object, but it was:",o,r);var a,u,c=gv(r,o);if(s.merge)a=new Uc(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){for(var l=[],h=0,f=s.mergeFields;h<f.length;h++){var d=vv(e,f[h],n);if(!o.contains(d))throw new mc(gc.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Sv(l,d)||l.push(d)}a=new Uc(l),u=o.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=o.fieldTransforms;return new Yy(new dl(c),a,u)}var sv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,rs.ZT)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw t.Lc(1===t.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Zy);function ov(t,e,n){return new ev({Nc:3,qc:e.settings.qc,methodName:t._methodName,kc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var av=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,rs.ZT)(e,t),e.prototype._toFieldTransform=function(t){return new ph(t.path,new oh)},e.prototype.isEqual=function(t){return t instanceof e},e}(Zy),uv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,rs.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=ov(this,t,!0),n=this.Kc.map(function(t){return pv(t,e)}),r=new ah(n);return new ph(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Zy),cv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,rs.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=ov(this,t,!0),n=this.Kc.map(function(t){return pv(t,e)}),r=new ch(n);return new ph(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Zy),lv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return(0,rs.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=new hh(t.R,eh(t.R,this.Qc));return new ph(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Zy);function hv(t,e,n,r){var i=t.Uc(1,e,n);yv("Data must be an object, but it was:",i,r);var s=[],o=dl.empty();Rc(r,function(t,r){var a=bv(e,t,n);r=(0,is.m9)(r);var u=i.Oc(a);if(r instanceof sv)s.push(a);else{var c=pv(r,u);null!=c&&(s.push(a),o.set(a,c))}});var a=new Uc(s);return new Xy(o,a,i.fieldTransforms)}function fv(t,e,n,r,i,s){var o=t.Uc(1,e,n),a=[vv(e,r,n)],u=[i];if(s.length%2!=0)throw new mc(gc.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<s.length;c+=2)a.push(vv(e,s[c])),u.push(s[c+1]);for(var l=[],h=dl.empty(),f=a.length-1;f>=0;--f)if(!Sv(l,a[f])){var d=a[f],p=u[f];p=(0,is.m9)(p);var g=o.Oc(d);if(p instanceof sv)l.push(d);else{var m=pv(p,g);null!=m&&(l.push(d),h.set(d,m))}}var y=new Uc(l);return new Xy(h,y,o.fieldTransforms)}function dv(t,e,n,r){return void 0===r&&(r=!1),pv(n,t.Uc(r?4:3,e))}function pv(t,e){if(mv(t=(0,is.m9)(t)))return yv("Unsupported field value:",e,t),gv(t,e);if(t instanceof Zy)return function(t,e){if(!tv(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.kc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,s=t;i<s.length;i++){var o=pv(s[i],e.Mc(r));null==o&&(o={nullValue:"NULL_VALUE"}),n.push(o),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,is.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return eh(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Nc.fromDate(t);return{timestampValue:lf(e.R,n)}}if(t instanceof Nc)return n=new Nc(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:lf(e.R,n)};if(t instanceof Wy)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Qy)return{bytesValue:hf(e.R,t._byteString)};if(t instanceof Py){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:pf(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+xy(t))}(t,e)}function gv(t,e){var n={};return Lc(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rc(t,function(t,r){var i=pv(r,e.Fc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function mv(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Nc||t instanceof Wy||t instanceof Qy||t instanceof Py||t instanceof Zy)}function yv(t,e,n){if(!mv(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=xy(n);throw e.Lc("an object"===r?t+" a custom object":t+" "+r)}}function vv(t,e,n){if((e=(0,is.m9)(e))instanceof Ky)return e._internalPath;if("string"==typeof e)return bv(t,e);throw wv("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var _v=new RegExp("[~\\*/\\[\\]]");function bv(t,e,n){if(e.search(_v)>=0)throw wv("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Ky.bind.apply(Ky,(0,rs.ev)([void 0],e.split(".")))))._internalPath}catch(w_){throw wv("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function wv(t,e,n,r,i){var s=r&&!r.isEmpty(),o=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(s||o)&&(u+=" (found",s&&(u+=" in field "+r),o&&(u+=" in document "+i),u+=")"),new mc(gc.INVALID_ARGUMENT,(a+=". ")+t+u)}function Sv(t,e){return t.some(function(t){return t.isEqual(e)})}var Ev=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Py(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Tv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Cv("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Tv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,rs.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Ev);function Cv(t,e){return"string"==typeof e?bv(t,e):e instanceof Ky?e._internalPath:e._delegate._internalPath}var Iv=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Av=function(t){function e(e,n,r,i,s,o){var a=this;return(a=t.call(this,e,n,r,i,o)||this)._firestore=e,a._firestoreImpl=e,a.metadata=s,a}return(0,rs.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new xv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Cv("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Ev),xv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,rs.ZT)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Av),kv=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Iv(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new xv(n._firestore,n._userDataWriter,r.key,r,new Iv(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new mc(gc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new xv(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Iv(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new xv(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Iv(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,s=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(s=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Dv(e.type),doc:n,oldIndex:i,newIndex:s}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Dv(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ec()}}function Nv(t,e){return t instanceof Av&&e instanceof Av?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof kv&&e instanceof kv&&t._firestore===e._firestore&&jy(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Ov(t){if(Ul(t)&&0===t.explicitOrderBy.length)throw new mc(gc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Pv=function(){};function Rv(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var s=i[r];t=s._apply(t)}return t}var Lv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return(0,rs.ZT)(e,t),e.prototype._apply=function(t){var e=rv(t.firestore),n=function(t,e,n,r,i,s,o){var a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new mc(gc.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+s+"' queries on FieldPath.documentId().");if("in"===s||"not-in"===s){Bv(o,s);for(var u=[],c=0,l=o;c<l.length;c++)u.push(qv(r,t,l[c]));a={arrayValue:{values:u}}}else a=qv(r,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Bv(o,s),a=dv(n,"where",o,"in"===s||"not-in"===s);var h=wl.create(i,s,a);return function(t,e){if(e.g()){var n=Bl(t);if(null!==n&&!n.isEqual(e.field))throw new mc(gc.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=ql(t);null!==r&&Gv(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new mc(gc.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Ry(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Fl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Pv),Fv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return(0,rs.ZT)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new mc(gc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new mc(gc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ol(e,n);return function(t,e){if(null===ql(t)){var n=Bl(t);null!==n&&Gv(0,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new Ry(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Fl(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Pv),Mv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return(0,rs.ZT)(e,t),e.prototype._apply=function(t){return new Ry(t.firestore,t.converter,$l(t._query,this.Hc,this.Jc))},e}(Pv),Vv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,rs.ZT)(e,t),e.prototype._apply=function(t){var e=Uv(t,this.type,this.Yc,this.Xc);return new Ry(t.firestore,t.converter,function(t,e){return new Fl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Pv),jv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,rs.ZT)(e,t),e.prototype._apply=function(t){var e=Uv(t,this.type,this.Yc,this.Xc);return new Ry(t.firestore,t.converter,function(t,e){return new Fl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Pv);function Uv(t,e,n,r){if(n[0]=(0,is.m9)(n[0]),n[0]instanceof Ev)return function(t,e,n,r,i){if(!r)throw new mc(gc.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var s=[],o=0,a=zl(t);o<a.length;o++){var u=a[o];if(u.field.isKeyField())s.push(ol(e,r.key));else{var c=r.data.field(u.field);if($c(c))throw new mc(gc.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new mc(gc.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}s.push(c)}}return new Dl(s,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=rv(t.firestore);return function(t,e,n,r,i,s){var o=t.explicitOrderBy;if(i.length>o.length)throw new mc(gc.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new mc(gc.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Gl(t)&&-1!==c.indexOf("/"))throw new mc(gc.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Mc.fromString(c));if(!Yc.isDocumentKey(l))throw new mc(gc.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Yc(l);a.push(ol(e,h))}else{var f=dv(n,r,c);a.push(f)}}return new Dl(a,s)}(t._query,t.firestore._databaseId,i,e,n,r)}function qv(t,e,n){if("string"==typeof(n=(0,is.m9)(n))){if(""===n)throw new mc(gc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gl(e)&&-1!==n.indexOf("/"))throw new mc(gc.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Mc.fromString(n));if(!Yc.isDocumentKey(r))throw new mc(gc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return ol(t,new Yc(r))}if(n instanceof Py)return ol(t,n._key);throw new mc(gc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+xy(n)+".")}function Bv(t,e){if(!Array.isArray(t)||0===t.length)throw new mc(gc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new mc(gc.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Gv(t,e,n){if(!n.isEqual(e))throw new mc(gc.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var zv=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Xc(t)){case 0:return null;case 1:return t.booleanValue;case 2:return zc(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Hc(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Ec()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Rc(t.fields,function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new Wy(zc(t.latitude),zc(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Kc(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Qc(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Gc(t);return new Nc(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Mc.fromString(t);Tc(jf(n));var r=new gy(n.get(1),n.get(3)),i=new Yc(n.popFirst(5));return r.isEqual(e)||bc("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Hv(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var $v=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,rs.ZT)(e,t),e.prototype.convertBytes=function(t){return new Qy(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Py(this.firestore,null,e)},e}(zv),Kv=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=rv(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Qv(t,this._firestore),i=Hv(r.converter,e,n),s=iv(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,mh.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var s,o=Qv(t,this._firestore);return s="string"==typeof(e=(0,is.m9)(e))||e instanceof Ky?fv(this._dataReader,"WriteBatch.update",o._key,e,n,r):hv(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(s.toMutation(o._key,mh.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Qv(t,this._firestore);return this._mutations=this._mutations.concat(new Nh(e._key,mh.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new mc(gc.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Qv(t,e){if((t=(0,is.m9)(t)).firestore!==e)throw new mc(gc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Zv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,rs.ZT)(e,t),e.prototype.convertBytes=function(t){return new Qy(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Py(this.firestore,null,e)},e}(zv);function Wv(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=ky(t,Py);var s=ky(t.firestore,By),o=rv(s);return Yv(s,[("string"==typeof(e=(0,is.m9)(e))||e instanceof Ky?fv(o,"updateDoc",t._key,e,n,r):hv(o,"updateDoc",t._key,e)).toMutation(t._key,mh.exists(!0))])}function Jv(t){for(var e,n,r,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];t=(0,is.m9)(t);var o={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||qy(i[a])||(o=i[a],a++);var u,c,l,h={includeMetadataChanges:o.includeMetadataChanges};if(qy(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Py)c=ky(t.firestore,By),l=Vl(t._key.path),u={next:function(e){i[a]&&i[a](Xv(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=ky(t,Ry);c=ky(d.firestore,By),l=d._query;var p=new Zv(c);u={next:function(t){i[a]&&i[a](new kv(c,p,d,t))},error:i[a+1],complete:i[a+2]},Ov(t._query)}return function(t,e,n,r){var i=this,s=new Xm(r),o=new cm(e,s,n);return t.asyncQueue.enqueueAndForget(function(){return(0,rs.mG)(i,void 0,void 0,function(){var e;return(0,rs.Jh)(this,function(n){switch(n.label){case 0:return e=im,[4,hy(t)];case 1:return[2,e.apply(void 0,[n.sent(),o])]}})})}),function(){s.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,rs.mG)(i,void 0,void 0,function(){var e;return(0,rs.Jh)(this,function(n){switch(n.label){case 0:return e=sm,[4,hy(t)];case 1:return[2,e.apply(void 0,[n.sent(),o])]}})})})}}(Gy(c),l,h,u)}function Yv(t,e){return function(t,e){var n=this,r=new cd;return t.asyncQueue.enqueueAndForget(function(){return(0,rs.mG)(n,void 0,void 0,function(){var n;return(0,rs.Jh)(this,function(i){switch(i.label){case 0:return n=wm,[4,ly(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(Gy(t),e)}function Xv(t,e,n){var r=n.docs.get(e._key),i=new Zv(t);return new Av(t,i,e._key,r,new Iv(n.hasPendingWrites,n.fromCache),e.converter)}var t_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,rs.ZT)(e,t),e.prototype.get=function(e){var n=this,r=Qv(e,this._firestore),i=new Zv(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Av(n._firestore,i,r._key,t._document,new Iv(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=rv(t)}return t.prototype.get=function(t){var e=this,n=Qv(t,this._firestore),r=new $v(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Ec();var i=t[0];if(i.isFoundDocument())return new Ev(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Ev(e._firestore,r,n._key,null,n.converter);throw Ec()})},t.prototype.set=function(t,e,n){var r=Qv(t,this._firestore),i=Hv(r.converter,e,n),s=iv(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var s,o=Qv(t,this._firestore);return s="string"==typeof(e=(0,is.m9)(e))||e instanceof Ky?fv(this._dataReader,"Transaction.update",o._key,e,n,r):hv(this._dataReader,"Transaction.update",o._key,e),this._transaction.update(o._key,s),this},t.prototype.delete=function(t){var e=Qv(t,this._firestore);return this._transaction.delete(e._key),this},t}());function e_(){if("undefined"==typeof Uint8Array)throw new mc(gc.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function n_(){if("undefined"==typeof atob)throw new mc(gc.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var r_=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return n_(),new t(Qy.fromBase64String(e))},t.fromUint8Array=function(e){return e_(),new t(Qy.fromUint8Array(e))},t.prototype.toBase64=function(){return n_(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return e_(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),i_=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){$y(t=ky(t,By));var n=Gy(t),r=t._freezeSettings(),i=new Ym;return Hy(n,i,new Wm(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){$y(t=ky(t,By));var e=Gy(t),n=t._freezeSettings(),r=new Ym;return Hy(e,r,new Jm(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new mc(gc.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new cd;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,rs.mG)(e,void 0,void 0,function(){var e;return(0,rs.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,rs.mG)(this,void 0,void 0,function(){return(0,rs.Jh)(this,function(e){switch(e.label){case 0:return fd.yt()?[4,fd.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Ep(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),s_=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof gy||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||wc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=ky(t,Oy))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&wc("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var s=(0,is.Sg)(r.mockUserToken),o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new mc(gc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new _y(new yy(s,new tg(o)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,rs.mG)(e,void 0,void 0,function(){var e,n;return(0,rs.Jh)(this,function(r){switch(r.label){case 0:return[4,ay(t)];case 1:return e=r.sent(),[4,cy(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Cc(t);return e.Or.delete(0),Ig(e)}(n))]}})})})}(Gy(ky(this._delegate,By)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,rs.mG)(e,void 0,void 0,function(){var e,n;return(0,rs.Jh)(this,function(r){switch(r.label){case 0:return[4,ay(t)];case 1:return e=r.sent(),[4,cy(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,rs.mG)(this,void 0,void 0,function(){var e;return(0,rs.Jh)(this,function(n){switch(n.label){case 0:return(e=Cc(t)).Or.add(0),[4,Ag(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(Gy(ky(this._delegate,By)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Cy("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new cd;return t.asyncQueue.enqueueAndForget(function(){return(0,rs.mG)(e,void 0,void 0,function(){var e;return(0,rs.Jh)(this,function(r){switch(r.label){case 0:return e=Am,[4,ly(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(Gy(ky(this._delegate,By)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Xm(e);return t.asyncQueue.enqueueAndForget(function(){return(0,rs.mG)(n,void 0,void 0,function(){var e;return(0,rs.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){Cc(t).Gr.add(e),e.next()},[4,hy(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,rs.mG)(n,void 0,void 0,function(){var e;return(0,rs.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){Cc(t).Gr.delete(e)},[4,hy(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(Gy(t=ky(t,By)),qy(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new mc(gc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new __(this,Fy(this._delegate,t))}catch(t){throw h_(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new l_(this,My(this._delegate,t))}catch(t){throw h_(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new m_(this,function(t,e){if(t=ky(t,Oy),Ey("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new mc(gc.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Ry(t,null,function(t){return new Fl(Mc.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw h_(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new cd;return t.asyncQueue.enqueueAndForget(function(){return(0,rs.mG)(n,void 0,void 0,function(){var n;return(0,rs.Jh)(this,function(i){switch(i.label){case 0:return[4,function(t){return oy(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new ey(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(Gy(t),function(n){return e(new t_(t,n))})}(this._delegate,function(n){return t(new a_(e,n))})},t.prototype.batch=function(){var t=this;return Gy(this._delegate),new u_(new Kv(this._delegate,function(e){return Yv(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new mc(gc.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new mc(gc.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),o_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,rs.ZT)(e,t),e.prototype.convertBytes=function(t){return new r_(new Qy(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return l_.eu(e,this.firestore,null)},e}(zv),a_=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new o_(t)}return t.prototype.get=function(t){var e=this,n=b_(t);return this._delegate.get(n).then(function(t){return new p_(e._firestore,new Av(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=b_(t);return n?(Ty("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var o=b_(t);return 2===arguments.length?this._delegate.update(o,e):(r=this._delegate).update.apply(r,(0,rs.ev)([o,e,n],i)),this},t.prototype.delete=function(t){var e=b_(t);return this._delegate.delete(e),this},t}(),u_=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=b_(t);return n?(Ty("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var o=b_(t);return 2===arguments.length?this._delegate.update(o,e):(r=this._delegate).update.apply(r,(0,rs.ev)([o,e,n],i)),this},t.prototype.delete=function(t){var e=b_(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),c_=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new xv(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new g_(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var s=i.get(n);return s||(s=new t(e,new o_(e),n),i.set(n,s)),s},t}();c_.su=new WeakMap;var l_=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new o_(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new mc(gc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Py(n._delegate,r,new Yc(e)))},t.eu=function(e,n,r){return new t(n,new Py(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new __(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new __(this.firestore,Fy(this._delegate,t))}catch(t){throw h_(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,is.m9)(t))instanceof Py&&Vy(this._delegate,t)},t.prototype.set=function(t,e){e=Ty("DocumentReference.set",e);try{return function(t,e,n){t=ky(t,Py);var r=ky(t.firestore,By),i=Hv(t.converter,e,n);return Yv(r,[iv(rv(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,mh.none())])}(this._delegate,t,e)}catch(t){throw h_(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Wv(this._delegate,t):Wv.apply(void 0,(0,rs.ev)([this._delegate,t,e],n))}catch(t){throw h_(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Yv(ky((t=this._delegate).firestore,By),[new Nh(t._key,mh.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=f_(e),i=d_(e,function(e){return new p_(t.firestore,new Av(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return Jv(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=ky(t,Py);var e=ky(t.firestore,By),n=Gy(e),r=new Zv(e);return function(t,e){var n=this,r=new cd;return t.asyncQueue.enqueueAndForget(function(){return(0,rs.mG)(n,void 0,void 0,function(){var n;return(0,rs.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,rs.mG)(this,void 0,void 0,function(){var r,i;return(0,rs.Jh)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,function(t,e){var n=Cc(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=s.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new mc(gc.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=s.sent(),i=Yg(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,uy(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Av(e,r,t._key,n,new Iv(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=ky(t,Py);var e=ky(t.firestore,By);return fy(Gy(e),t._key,{source:"server"}).then(function(n){return Xv(e,t,n)})}(this._delegate):function(t){t=ky(t,Py);var e=ky(t.firestore,By);return fy(Gy(e),t._key).then(function(n){return Xv(e,t,n)})}(this._delegate)).then(function(t){return new p_(e.firestore,new Av(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?c_.nu(this.firestore,e):null))},t}();function h_(t,e,n){return t.message=t.message.replace(e,n),t}function f_(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!qy(r))return r}return{}}function d_(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=qy(t[0])?t[0]:qy(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var p_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new l_(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Nv(this._delegate,t._delegate)},t}(),g_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,rs.ZT)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(p_),m_=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new o_(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Rv(this._delegate,function(t,e,n){var r=e,i=Cv("where",t);return new Lv(i,r,n)}(e,n,r)))}catch(e){throw h_(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Rv(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Cv("orderBy",t);return new Fv(r,n)}(e,n)))}catch(e){throw h_(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Rv(this._delegate,function(t){return Dy("limit",t),new Mv("limit",t,"F")}(e)))}catch(e){throw h_(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Rv(this._delegate,function(t){return Dy("limitToLast",t),new Mv("limitToLast",t,"L")}(e)))}catch(e){throw h_(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Rv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Vv("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw h_(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Rv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Vv("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw h_(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Rv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new jv("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw h_(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Rv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new jv("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw h_(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return jy(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=ky(t,Ry);var e=ky(t.firestore,By),n=Gy(e),r=new Zv(e);return function(t,e){var n=this,r=new cd;return t.asyncQueue.enqueueAndForget(function(){return(0,rs.mG)(n,void 0,void 0,function(){var n;return(0,rs.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,rs.mG)(this,void 0,void 0,function(){var r,i,s,o,a;return(0,rs.Jh)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Vp(t,e,!0)];case 1:return a=u.sent(),r=new pm(e,a.Bn),i=r._o(a.documents),s=r.applyChanges(i,!1),n.resolve(s.snapshot),[3,3];case 2:return o=u.sent(),a=Yg(o,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,uy(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new kv(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=ky(t,Ry);var e=ky(t.firestore,By),n=Gy(e),r=new Zv(e);return dy(n,t._query,{source:"server"}).then(function(n){return new kv(e,r,t,n)})}(this._delegate):function(t){t=ky(t,Ry);var e=ky(t.firestore,By),n=Gy(e),r=new Zv(e);return Ov(t._query),dy(n,t._query).then(function(n){return new kv(e,r,t,n)})}(this._delegate)).then(function(t){return new v_(e.firestore,new kv(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=f_(e),i=d_(e,function(e){return new v_(t.firestore,new kv(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return Jv(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?c_.nu(this.firestore,e):null))},t}(),y_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new g_(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),v_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new m_(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new g_(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new y_(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new g_(n._firestore,r))})},t.prototype.isEqual=function(t){return Nv(this._delegate,t._delegate)},t}(),__=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,rs.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new l_(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new l_(this.firestore,void 0===t?My(this._delegate):My(this._delegate,t))}catch(t){throw h_(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=ky(t.firestore,By),r=My(t),i=Hv(t.converter,e);return Yv(n,[iv(rv(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,mh.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new l_(e.firestore,t)})},e.prototype.isEqual=function(t){return Vy(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?c_.nu(this.firestore,t):null))},e}(m_);function b_(t){return ky(t,Py)}var w_,S_=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Ky.bind.apply(Ky,(0,rs.ev)([void 0],t)))}return t.documentId=function(){return new t(jc.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,is.m9)(t))instanceof Ky&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),E_=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new av("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new sv("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new uv("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new cv("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new lv("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),T_=n(6034),C_={Firestore:s_,GeoPoint:Wy,Timestamp:Nc,Blob:r_,Transaction:a_,WriteBatch:u_,DocumentReference:l_,DocumentSnapshot:p_,Query:m_,QueryDocumentSnapshot:g_,QuerySnapshot:v_,CollectionReference:__,FieldPath:S_,FieldValue:E_,setLogLevel:function(t){yc.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new T_.wA("firestore",function(t){return function(t,e){return new s_(t,new By(t,e),new i_)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},C_)))})(w_=ns.Z),w_.registerVersion("@firebase/firestore","2.3.9"),n(6682),n(7771),n(8858),n(3101);const I_=new r.OlP("angularfire2.auth.use-emulator");function A_(t,e){return function(t,e=Qi.z){return new ne.y(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function x_(t,e){return A_(t,e).pipe((0,pe.U)(t=>({payload:t,type:"query"})))}function k_(t,e){return x_(t,e).pipe(Ee(void 0),Zi(),(0,pe.U)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const s=n.find(t=>t.doc.ref.isEqual(e.ref)),o=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));s&&JSON.stringify(s.doc.metadata)===JSON.stringify(e.metadata)||!s&&o&&JSON.stringify(o.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function D_(t,e,n){return k_(t,n).pipe(Te((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return N_(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return N_(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return N_(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new Yi(void 0,void 0)),(0,pe.U)(t=>t.map(t=>({type:t.type,payload:t}))))}function N_(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function O_(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class P_{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=k_(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,pe.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Ee(void 0),Zi(),Ae(([t,e])=>e.length>0||!t),(0,pe.U)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Te((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=O_(t);return D_(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return x_(this.query,this.afs.schedulers.outsideAngular).pipe((0,pe.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,Ht.D)(this.query.get(t)).pipe((0,ts.QV)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new R_(this.ref.doc(t),this.afs)}}class R_{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=U_(n,e);return new P_(r,i,this.afs)}snapshotChanges(){return A_(this.ref,this.afs.schedulers.outsideAngular).pipe(Ee(void 0),Zi(),(0,pe.U)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,pe.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,Ht.D)(this.ref.get(t)).pipe((0,ts.QV)(this.afs.schedulers.insideAngular))}}class L_{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?k_(this.query,this.afs.schedulers.outsideAngular).pipe((0,pe.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Ae(t=>t.length>0),this.afs.keepUnstableUntilFirst):k_(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Te((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=O_(t);return D_(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return x_(this.query,this.afs.schedulers.outsideAngular).pipe((0,pe.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,Ht.D)(this.query.get(t)).pipe((0,ts.QV)(this.afs.schedulers.insideAngular))}}const F_=new r.OlP("angularfire2.enableFirestorePersistence"),M_=new r.OlP("angularfire2.firestore.persistenceSettings"),V_=new r.OlP("angularfire2.firestore.settings"),j_=new r.OlP("angularfire2.firestore.use-emulator");function U_(t,e=(t=>t)){return{query:e(t),ref:t}}let q_=(()=>{class t{constructor(t,e,n,r,i,s,o,a,u){this.schedulers=new Gt.HU(s),this.keepUnstableUntilFirst=(0,Gt.ss)(this.schedulers);const c=(0,Gt.on)(t,s,e);!es.Z.auth&&u&&(0,Gt.yq)();const l=a;[this.firestore,this.persistenceEnabled$]=(0,Gt.sI)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=s.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!function(t){return"server"===t}(i)){const e=()=>{try{return(0,Ht.D)(t.enablePersistence(o||void 0).then(()=>!0,()=>!1))}catch(w_){return"undefined"!=typeof console&&console.warn(w_),(0,$t.of)(!1)}};return[t,s.runOutsideAngular(e)]}return[t,(0,$t.of)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=U_(n,e),s=this.schedulers.ngZone.run(()=>r);return new P_(s,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new L_(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new R_(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Gt.Dh),r.LFG(Gt.xv,8),r.LFG(F_,8),r.LFG(V_,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(M_,8),r.LFG(j_,8),r.LFG(I_,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Gt.Dh),r.LFG(Gt.xv,8),r.LFG(F_,8),r.LFG(V_,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(M_,8),r.LFG(j_,8),r.LFG(I_,8))},token:t,providedIn:"any"}),t})(),B_=(()=>{class t{constructor(t){this.afs=t,this.collection="notes"}getNotes(){return this.afs.collection(this.collection).snapshotChanges()}addNote(t,e){this.afs.collection(this.collection).doc(e).set(t)}deleteNote(t){this.afs.doc(`notes/${t}`).delete()}getNoteById(t){return this.afs.doc(`notes/${t}`).get()}updateNote(t,e){this.afs.doc(`notes/${t}`).update(e)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(q_))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var G_=n(1555);function z_(t,e){return new ne.y(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let s=0,o=0;for(let a=0;a<r;a++){const u=(0,Ht.D)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,o++),i[a]=t},error:t=>n.error(t),complete:()=>{s++,s!==r&&c||(o===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}let H_=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}setProperty(t,e){this._renderer.setProperty(this._elementRef.nativeElement,t,e)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t}),t})(),$_=(()=>{class t extends H_{}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();const K_=new r.OlP("NgValueAccessor"),Q_={provide:K_,useExisting:(0,r.Gpc)(()=>W_),multi:!0},Z_=new r.OlP("CompositionEventMode");let W_=(()=>{class t extends H_{constructor(t,e,n){super(t,e),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=s()?s().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(Z_,8))},t.\u0275dir=r.lG2({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.NdJ("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r._Bn([Q_]),r.qOj]}),t})();const J_=new r.OlP("NgValidators"),Y_=new r.OlP("NgAsyncValidators");function X_(t){return null!=t}function tb(t){const e=(0,r.QGY)(t)?(0,Ht.D)(t):t;return(0,r.CqO)(e),e}function eb(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function nb(t,e){return e.map(e=>e(t))}function rb(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function ib(t){return null!=t?function(t){if(!t)return null;const e=t.filter(X_);return 0==e.length?null:function(t){return eb(nb(t,e))}}(rb(t)):null}function sb(t){return null!=t?function(t){if(!t)return null;const e=t.filter(X_);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if((0,Jt.k)(e))return z_(e,null);if((0,G_.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return z_(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return z_(t=1===t.length&&(0,Jt.k)(t[0])?t[0]:t,null).pipe((0,pe.U)(t=>e(...t)))}return z_(t,null)}(nb(t,e).map(tb)).pipe((0,pe.U)(eb))}}(rb(t)):null}function ob(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}let ab=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=ib(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=sb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t}),t})(),ub=(()=>{class t extends ab{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();class cb extends ab{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let lb=(()=>{class t extends class{constructor(t){this._cd=t}is(t){var e,n,r;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===r?void 0:r[t])}}{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(cb,2))},t.\u0275dir=r.lG2({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.qOj]}),t})();function hb(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function fb(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function db(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const pb="VALID",gb="INVALID",mb="PENDING",yb="DISABLED";function vb(t){return(Sb(t)?t.validators:t)||null}function _b(t){return Array.isArray(t)?ib(t):t||null}function bb(t,e){return(Sb(e)?e.asyncValidators:t)||null}function wb(t){return Array.isArray(t)?sb(t):t||null}function Sb(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Eb{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=_b(this._rawValidators),this._composedAsyncValidatorFn=wb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===pb}get invalid(){return this.status===gb}get pending(){return this.status==mb}get disabled(){return this.status===yb}get enabled(){return this.status!==yb}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=_b(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=wb(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=mb,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=yb,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=pb,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==pb&&this.status!==mb||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?yb:pb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=mb,this._hasOwnPendingAsyncValidator=!0;const e=tb(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof Cb?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof Ib&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.vpe,this.statusChanges=new r.vpe}_calculateStatus(){return this._allControlsDisabled()?yb:this.errors?gb:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(mb)?mb:this._anyControlsHaveStatus(gb)?gb:pb}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Sb(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Tb extends Eb{constructor(t=null,e,n){super(vb(e),bb(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){db(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){db(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Cb extends Eb{constructor(t,e,n){super(vb(e),bb(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Tb?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Ib extends Eb{constructor(t,e,n){super(vb(e),bb(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Tb?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const Ab={provide:cb,useExisting:(0,r.Gpc)(()=>kb)},xb=(()=>Promise.resolve(null))();let kb=(()=>{class t extends cb{constructor(t,e,n,i){super(),this.control=new Tb,this._registered=!1,this.update=new r.vpe,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===W_?n=t:Object.getPrototypeOf(t.constructor)===$_?r=t:i=t}),i||r||n||null}(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){var t,e;(function(t,e){const n=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(ob(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(ob(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();hb(e._rawValidators,i),hb(e._rawAsyncValidators,i)})(t=this.control,e=this),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&fb(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&fb(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){xb.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;xb.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(ub,9),r.Y36(J_,10),r.Y36(Y_,10),r.Y36(K_,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r._Bn([Ab]),r.qOj,r.TTD]}),t})(),Db=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();const Nb={provide:K_,useExisting:(0,r.Gpc)(()=>Pb),multi:!0};function Ob(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let Pb=(()=>{class t extends $_{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this.setProperty("selectedIndex",-1);const n=Ob(e,t);this.setProperty("value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.NdJ("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([Nb]),r.qOj]}),t})(),Rb=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Ob(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(Pb,9))},t.\u0275dir=r.lG2({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const Lb={provide:K_,useExisting:(0,r.Gpc)(()=>Mb),multi:!0};function Fb(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let Mb=(()=>{class t extends $_{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.NdJ("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([Lb]),r.qOj]}),t})(),Vb=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Fb(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Fb(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(Mb,9))},t.\u0275dir=r.lG2({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})(),jb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Db]]}),t})(),Ub=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[jb]}),t})(),qb=(()=>{class t{constructor(t){this.fire=t,this.noteId="",this.lastId="",this.formatVal="",this.note={title:"",content:"",date:""},this.fontFamily="default"}initialiseVar(){this.note={title:"",content:"",date:""}}ngOnInit(){}ngOnChanges(){this.getNoteDetail()}updateLastId(t){this.lastId=t,console.log(this.lastId),console.log(this.noteId),this.lastId=String(Number(this.lastId)+1)}addNote(){""==this.lastId&&(this.lastId="1"),console.log(this.lastId),this.note.title="New Note",this.note.date=this.createDate(),this.fire.addNote(this.note,this.lastId),this.initialiseVar()}getNoteDetail(){this.fire.getNoteById(this.noteId).subscribe(t=>{this.note=t.data()})}createDate(){return(new Date).getMonth()+1+"/"+(new Date).getDate()+"/"+(new Date).getFullYear()}updateNote(){this.fire.updateNote(this.noteId,this.note),this.initialiseVar()}checkFormatVal(t){"b"==t&&(this.formatVal="b"),"i"==t&&(this.formatVal="i")}getFontFamily(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(B_))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-notes-content"]],inputs:{noteId:"noteId"},features:[r.TTD],decls:31,vars:10,consts:[[1,"row"],[1,"col-12"],[1,"row","top-menu"],[1,"col-2"],[1,"bi","bi-plus-circle",3,"click"],[1,"col-1",3,"click"],["name","font",1,"form-control",3,"ngModel","ngModelChange"],["selected","","disabled","","value","default"],["value","serif"],["value","sans-serif"],["value","monospace"],[1,"col-12","date"],["type","text","placeholder","Note Title",1,"form-control",3,"ngModel","ngModelChange"],["placeholder","Write here...","id","content",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn",3,"click"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"div",3),r.TgZ(4,"i",4),r.NdJ("click",function(){return e.addNote()}),r.qZA(),r.qZA(),r.TgZ(5,"div",5),r.NdJ("click",function(){return e.checkFormatVal("b")}),r.TgZ(6,"b"),r._uU(7,"B"),r.qZA(),r.qZA(),r.TgZ(8,"div",5),r.NdJ("click",function(){return e.checkFormatVal("i")}),r.TgZ(9,"i"),r._uU(10,"I"),r.qZA(),r.qZA(),r.TgZ(11,"div",3),r.TgZ(12,"select",6),r.NdJ("ngModelChange",function(t){return e.fontFamily=t}),r.TgZ(13,"option",7),r._uU(14,"Font Family"),r.qZA(),r.TgZ(15,"option",8),r._uU(16,"Serif"),r.qZA(),r.TgZ(17,"option",9),r._uU(18,"Sans-Serif"),r.qZA(),r.TgZ(19,"option",10),r._uU(20,"Monospace"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(21,"div",11),r._uU(22),r.qZA(),r._UZ(23,"br"),r.TgZ(24,"div",1),r.TgZ(25,"input",12),r.NdJ("ngModelChange",function(t){return e.note.title=t}),r.qZA(),r.qZA(),r.TgZ(26,"div",1),r.TgZ(27,"textarea",13),r.NdJ("ngModelChange",function(t){return e.note.content=t}),r.qZA(),r._UZ(28,"br"),r.TgZ(29,"button",14),r.NdJ("click",function(){return e.updateNote()}),r._uU(30," Save"),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.Tol(e.fontFamily),r.xp6(12),r.Q6J("ngModel",e.fontFamily),r.xp6(10),r.Oqu(e.note.date),r.xp6(3),r.Tol(e.formatVal),r.Q6J("ngModel",e.note.title),r.xp6(2),r.Tol(e.formatVal),r.Q6J("ngModel",e.note.content))},directives:[Pb,lb,kb,Rb,Vb,W_],styles:[".top-menu[_ngcontent-%COMP%]{padding:10px;margin-bottom:5px}.date[_ngcontent-%COMP%]{text-align:center;font-size:13px;color:grey}.w-100[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%}textarea[_ngcontent-%COMP%]{margin-top:10px;height:75vh}.btn[_ngcontent-%COMP%]{background-color:#512d6d;color:#fff}.b[_ngcontent-%COMP%]{font-weight:bolder}.i[_ngcontent-%COMP%]{font-style:italic}.serif[_ngcontent-%COMP%]{font-family:serif}.sans-serif[_ngcontent-%COMP%]{font-family:sans-serif}.monospace[_ngcontent-%COMP%]{font-family:monospace}select[_ngcontent-%COMP%]{background-color:#f5f5f5;border:none;padding:0}"]}),t})();function Bb(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",9),r.TgZ(1,"div",10),r.NdJ("click",function(){const e=r.CHM(t).$implicit;return r.oxw().getNoteContent(e.id)}),r.TgZ(2,"span"),r._uU(3),r.qZA(),r._UZ(4,"br"),r.TgZ(5,"span",11),r._uU(6),r.ALo(7,"date"),r.qZA(),r.qZA(),r._UZ(8,"hr"),r.qZA()}if(2&t){const t=e.$implicit,n=r.oxw();r.xp6(1),r.ekj("selected",n.selectedNote==t.id),r.xp6(2),r.Oqu(t.data.title),r.xp6(3),r.Oqu(r.xi3(7,4,t.data.date,"mediumDate"))}}const Gb=[{path:"",component:(()=>{class t{constructor(t){this.fire=t,this.NotesList=[],this.selectedNote="",this.lastDocId="",this.getNotes()}ngOnInit(){}getNotes(){this.fire.getNotes().subscribe(t=>{var e,n;this.NotesList=t.map(t=>({id:t.payload.doc.id,data:t.payload.doc.data()})),console.log(this.NotesList),this.NotesList.sort((t,e)=>Number(e.id)-Number(t.id)),this.NotesList.length>0&&(this.getNoteContent(this.NotesList[0].id),this.lastDocId=this.selectedNote,null===(e=this.child)||void 0===e||e.updateLastId(this.lastDocId)),0==this.NotesList.length&&(null===(n=this.child)||void 0===n||n.initialiseVar())})}getNoteContent(t){this.selectedNote=t}deleteNote(){this.fire.deleteNote(this.selectedNote)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(B_))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-notes-list"]],viewQuery:function(t,e){if(1&t&&r.Gf(qb,5),2&t){let t;r.iGM(t=r.CRH())&&(e.child=t.first)}},decls:12,vars:2,consts:[[1,"container-fluid"],[1,"row"],[1,"col-2"],[1,"col-8","heading"],[1,"col-4","list-top"],[1,"bi","bi-trash",3,"click"],["class","col-12",4,"ngFor","ngForOf"],[1,"col-10"],[3,"noteId"],[1,"col-12"],[1,"wrapper",3,"click"],[1,"date"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"div",1),r.TgZ(4,"div",3),r._uU(5,"Notes"),r.qZA(),r.TgZ(6,"div",4),r.TgZ(7,"i",5),r.NdJ("click",function(){return e.deleteNote()}),r.qZA(),r.qZA(),r._UZ(8,"hr"),r.YNc(9,Bb,9,7,"div",6),r.qZA(),r.qZA(),r.TgZ(10,"div",7),r._UZ(11,"app-notes-content",8),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(9),r.Q6J("ngForOf",e.NotesList),r.xp6(2),r.Q6J("noteId",e.selectedNote))},directives:[ot,qb],pipes:[ut],styles:[".container-fluid[_ngcontent-%COMP%]{background-color:#f5f5f5}.container-fluid[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-2[_ngcontent-%COMP%]{border-right:1px solid grey}.container-fluid[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-2[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{padding:10px}.container-fluid[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-2[_ngcontent-%COMP%]   .list-top[_ngcontent-%COMP%]{text-align:right;padding:10px}.container-fluid[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-2[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:13px}.container-fluid[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{padding:10px 10px 10px 30px;border-radius:5px}.container-fluid[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{background-color:#512d6d;color:#fff}"]}),t})()}];let zb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[ji.forRoot(Gb)],ji]}),t})(),Hb=(()=>{class t{constructor(){this.title="Notes"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&r._UZ(0,"router-outlet")},directives:[ki],styles:[""]}),t})();class $b{}const Kb="*";function Qb(t,e=null){return{type:2,steps:t,options:e}}function Zb(t){return{type:6,styles:t,offset:null}}function Wb(t){Promise.resolve(null).then(t)}class Jb{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Wb(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class Yb{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?Wb(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function Xb(){return"undefined"!=typeof window&&void 0!==window.document}function tw(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function ew(t){switch(t.length){case 0:return new Jb;case 1:return t[0];default:return new Yb(t)}}function nw(t,e,n,r,i={},s={}){const o=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,o),a){case"!":a=i[n];break;case Kb:a=s[n];break;default:a=e.normalizeStyleValue(n,r,a,o)}l[r]=a}),r||a.push(l),c=l,u=n}),o.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${o.join(t)}`)}return a}function rw(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&iw(n,"start",t)));break;case"done":t.onDone(()=>r(n&&iw(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&iw(n,"destroy",t)))}}function iw(t,e,n){const r=n.totalTime,i=sw(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),s=t._data;return null!=s&&(i._data=s),i}function sw(t,e,n,r,i="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function ow(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function aw(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let uw=(t,e)=>!1,cw=(t,e)=>!1,lw=(t,e,n)=>[];const hw=tw();(hw||"undefined"!=typeof Element)&&(uw=Xb()?(t,e)=>{for(;e&&e!==document.documentElement;){if(e===t)return!0;e=e.parentNode||e.host}return!1}:(t,e)=>t.contains(e),cw=(()=>{if(hw||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):cw}})(),lw=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let fw=null,dw=!1;function pw(t){fw||(fw=("undefined"!=typeof document?document.body:null)||{},dw=!!fw.style&&"WebkitAppearance"in fw.style);let e=!0;return fw.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in fw.style,!e&&dw)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in fw.style),e}const gw=cw,mw=uw,yw=lw;function vw(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let _w=(()=>{class t{validateStyleProperty(t){return pw(t)}matchesElement(t,e){return gw(t,e)}containsElement(t,e){return mw(t,e)}query(t,e,n){return yw(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,s=[],o){return new Jb(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class bw{}bw.NOOP=new _w;const ww="ng-enter",Sw="ng-leave",Ew="ng-trigger",Tw=".ng-trigger",Cw="ng-animating",Iw=".ng-animating";function Aw(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:xw(parseFloat(e[1]),e[2])}function xw(t,e){switch(e){case"s":return 1e3*t;default:return t}}function kw(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,s="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=xw(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(i=xw(parseFloat(o),n[4]));const a=n[5];a&&(s=a)}else r=t;if(!n){let n=!1,s=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(s,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:s}}(t,e,n)}function Dw(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function Nw(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else Dw(t,n);return n}function Ow(t,e,n){return n?e+":"+n+";":""}function Pw(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=Ow(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=Ow(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function Rw(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=Bw(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),tw()&&Pw(t))}function Lw(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=Bw(e);t.style[n]=""}),tw()&&Pw(t))}function Fw(t){return Array.isArray(t)?1==t.length?t[0]:Qb(t):t}const Mw=new RegExp("{{\\s*(.+?)\\s*}}","g");function Vw(t){let e=[];if("string"==typeof t){let n;for(;n=Mw.exec(t);)e.push(n[1]);Mw.lastIndex=0}return e}function jw(t,e,n){const r=t.toString(),i=r.replace(Mw,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function Uw(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const qw=/-+([a-z0-9])/g;function Bw(t){return t.replace(qw,(...t)=>t[1].toUpperCase())}function Gw(t,e){return 0===t||0===e}function zw(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let s=e[0],o=[];if(r.forEach(t=>{s.hasOwnProperty(t)||o.push(t),s[t]=n[t]}),o.length)for(var i=1;i<e.length;i++){let n=e[i];o.forEach(function(e){n[e]=$w(t,e)})}}return e}function Hw(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function $w(t,e){return window.getComputedStyle(t)[e]}const Kw="*";function Qw(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],s=r[2],o=r[3];e.push(Jw(i,o)),"<"!=s[0]||i==Kw&&o==Kw||e.push(Jw(o,i))}(t,n,e)):n.push(t),n}const Zw=new Set(["true","1"]),Ww=new Set(["false","0"]);function Jw(t,e){const n=Zw.has(t)||Ww.has(t),r=Zw.has(e)||Ww.has(e);return(i,s)=>{let o=t==Kw||t==i,a=e==Kw||e==s;return!o&&n&&"boolean"==typeof i&&(o=i?Zw.has(t):Ww.has(t)),!a&&r&&"boolean"==typeof s&&(a=s?Zw.has(e):Ww.has(e)),o&&a}}const Yw=new RegExp("s*:selfs*,?","g");function Xw(t,e,n){return new tS(t).build(e,n)}class tS{constructor(t){this._driver=t}build(t,e){const n=new eS(e);return this._resetContextStyleTimingState(n),Hw(this,Fw(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,s.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:s,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,s=r||{};if(n.styles.forEach(t=>{if(nS(t)){const e=t;Object.keys(e).forEach(t=>{Vw(e[t]).forEach(t=>{s.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=Uw(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=Hw(this,Fw(t.animation),e);return{type:1,matchers:Qw(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:rS(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>Hw(this,t,e)),options:rS(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=Hw(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:rS(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return iS(kw(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=iS(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||kw(r,e),iS(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:Zb({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,s=!1;if(!i){s=!0;const t={};n.easing&&(t.easing=n.easing),i=Zb(t)}e.currentTime+=n.duration+n.delay;const o=this.visitStyle(i,e);o.isEmptyStep=s,r=o}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==Kb?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(nS(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=e.collectedStyles[e.currentQuerySelector],o=s[n];let a=!0;o&&(i!=r&&i>=o.startTime&&r<=o.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=o.startTime),a&&(s[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=Vw(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let s=!1,o=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(nS(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(nS(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),o=o||c<0||c>1,s=s||c<a,a=c,i.push(c),n});o&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,f=e.currentTime,d=e.currentAnimateTimings,p=d.duration;return u.forEach((t,r)=>{const s=l>0?r==h?1:l*r:i[r],o=s*p;e.currentTime=f+d.delay+o,d.duration=o,this._validateStyleAst(t,e),t.offset=s,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:Hw(this,Fw(t.animation),e),options:rS(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:rS(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:rS(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,s]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(Yw,"")),[t=t.replace(/@\*/g,Tw).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,Iw),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,ow(e.collectedStyles,e.currentQuerySelector,{});const o=Hw(this,Fw(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:o,originalSelector:t.selector,options:rS(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:kw(t.timings,e.errors,!0);return{type:12,animation:Hw(this,Fw(t.animation),e),timings:n,options:null}}}class eS{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function nS(t){return!Array.isArray(t)&&"object"==typeof t}function rS(t){var e;return t?(t=Dw(t)).params&&(t.params=(e=t.params)?Dw(e):null):t={},t}function iS(t,e,n){return{duration:t,delay:e,easing:n}}function sS(t,e,n,r,i,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class oS{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const aS=new RegExp(":enter","g"),uS=new RegExp(":leave","g");function cS(t,e,n,r,i,s={},o={},a,u,c=[]){return(new lS).buildKeyframes(t,e,n,r,i,s,o,a,u,c)}class lS{buildKeyframes(t,e,n,r,i,s,o,a,u,c=[]){u=u||new oS;const l=new fS(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([s],null,l.errors,a),Hw(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(o).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([o],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[sS(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);i!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?Aw(n.duration):null,s=null!=n.delay?Aw(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,s);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),Hw(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=hS);const t=Aw(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>Hw(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?Aw(t.options.delay):0;t.steps.forEach(s=>{const o=e.createSubContext(t.options);i&&o.delayNextStep(i),Hw(this,s,o),r=Math.max(r,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return kw(e.params?jw(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,s=e.createSubContext().currentTimeline;s.easing=n.easing,t.styles.forEach(t=>{s.forwardTime((t.offset||0)*i),s.setStyles(t.styles,t.easing,e.errors,e.options),s.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(s),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?Aw(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=hS);let s=n;const o=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=o.length;let a=null;o.forEach((n,r)=>{e.currentQueryIndex=r;const o=e.createSubContext(t.options,n);i&&o.delayNextStep(i),n===e.element&&(a=o.currentTimeline),Hw(this,t.animation,o),o.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,o.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,s=Math.abs(i.duration),o=s*(e.currentQueryTotal-1);let a=s*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;Hw(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const hS={};class fS{constructor(t,e,n,r,i,s,o,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=hS,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new dS(this._driver,e,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=Aw(n.duration)),null!=n.delay&&(r.delay=Aw(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=jw(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new fS(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=hS,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new pS(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,s){let o=[];if(r&&o.push(this.element),t.length>0){t=(t=t.replace(aS,"."+this._enterClassName)).replace(uS,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),o.push(...e)}return i||0!=o.length||s.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),o}}class dS{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new dS(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Kb,this._currentKeyframe[t]=Kb}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},s=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=Kb})):Nw(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(s).forEach(t=>{const e=jw(s[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:Kb),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,s)=>{const o=Nw(i,!0);Object.keys(o).forEach(n=>{const r=o[n];"!"==r?t.add(n):r==Kb&&e.add(n)}),n||(o.offset=s/this.duration),r.push(o)});const i=t.size?Uw(t.values()):[],s=e.size?Uw(e.values()):[];if(n){const t=r[0],e=Dw(t);t.offset=0,e.offset=1,r=[t,e]}return sS(this.element,r,i,s,this.duration,this.startTime,this.easing,!1)}}class pS extends dS{constructor(t,e,n,r,i,s,o=!1){super(t,e,s.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],s=n+e,o=e/s,a=Nw(t[0],!1);a.offset=0,i.push(a);const u=Nw(t[0],!1);u.offset=gS(o),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let o=Nw(t[r],!1);o.offset=gS((e+o.offset*n)/s),i.push(o)}n=s,e=0,r="",t=i}return sS(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function gS(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class mS{}class yS extends mS{normalizePropertyName(t,e){return Bw(t)}normalizeStyleValue(t,e,n,r){let i="";const s=n.toString().trim();if(vS[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return s+i}}const vS=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function _S(t,e,n,r,i,s,o,a,u,c,l,h,f){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:f}}const bS={};class wS{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],s=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):s}build(t,e,n,r,i,s,o,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||bS,f=this.buildStyles(n,o&&o.params||bS,l),d=a&&a.params||bS,p=this.buildStyles(r,d,l),g=new Set,m=new Map,y=new Map,v="void"===r,_={params:Object.assign(Object.assign({},h),d)},b=c?[]:cS(t,e,this.ast.animation,i,s,f,p,_,u,l);let w=0;if(b.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),l.length)return _S(e,this._triggerName,n,r,v,f,p,[],[],m,y,w,l);b.forEach(t=>{const n=t.element,r=ow(m,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=ow(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&g.add(n)});const S=Uw(g.values());return _S(e,this._triggerName,n,r,v,f,p,b,S,m,y,w)}}class SS{constructor(t,e,n){this.styles=t,this.defaultParams=e,this.normalizer=n}buildStyles(t,e){const n={},r=Dw(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let s=i[t];s.length>1&&(s=jw(s,r,e));const o=this.normalizer.normalizePropertyName(t,e);s=this.normalizer.normalizeStyleValue(t,o,s,e),n[o]=s})}}),n}}class ES{constructor(t,e,n){this.name=t,this.ast=e,this._normalizer=n,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new SS(t.style,t.options&&t.options.params||{},n)}),TS(this.states,"true","1"),TS(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new wS(t,e,this.states))}),this.fallbackTransition=new wS(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function TS(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const CS=new oS;class IS{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=Xw(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=nw(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let s;const o=new Map;if(i?(s=cS(this._driver,e,i,ww,Sw,{},{},n,CS,r),s.forEach(t=>{const e=ow(o,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),s=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);o.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,Kb)})});const a=ew(s.map(t=>{const e=o.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=sw(e,"","","");return rw(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const AS="ng-animate-queued",xS="ng-animate-disabled",kS=".ng-animate-disabled",DS=[],NS={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},OS={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class PS{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=Dw(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const RS="void",LS=new PS(RS);class FS{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,GS(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const s=ow(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);const a=ow(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(GS(t,Ew),GS(t,"ng-trigger-"+e),a[e]=LS),()=>{this._engine.afterFlush(()=>{const t=s.indexOf(o);t>=0&&s.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),s=new VS(this.id,e,t);let o=this._engine.statesByElement.get(t);o||(GS(t,Ew),GS(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,o={}));let a=o[e];const u=new PS(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),o[e]=u,a||(a=LS),u.value!==RS&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{Lw(t,n),Rw(t,r)})}return}const c=ow(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:s,isFallbackTransition:h}),h||(GS(t,AS),s.onStart(()=>{zS(t,AS)})),s.onDone(()=>{let e=this.players.indexOf(s);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(s);t>=0&&n.splice(t,1)}}),this.players.push(s),c.push(s),s}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,Tw,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const s=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,RS,r);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&ew(s).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(e=>{const i=e.name;if(r.has(i))return;r.add(i);const s=this._triggers[i].fallbackTransition,o=n[i]||LS,a=new PS(RS),u=new VS(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:s,fromState:o,toState:a,player:u,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==NS||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){GS(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,s=this._elementListeners.get(i);s&&s.forEach(e=>{if(e.name==n.triggerName){const r=sw(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,rw(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class MS{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new FS(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(jS(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!jS(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),GS(t,xS)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),zS(t,xS))}removeNode(t,e,n,r){if(jS(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return jS(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,Tw,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Iw,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return ew(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=NS,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,kS)&&this.markElementAsDisabled(t,!1),this.driver.query(t,kS,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)GS(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?ew(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new oS,r=[],i=new Map,s=[],o=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=BS(h,this.collectedEnterElements),d=new Map;let p=0;f.forEach((t,e)=>{const n=ww+p++;d.set(e,n),t.forEach(t=>GS(t,n))});const g=[],m=new Set,y=new Set;for(let D=0;D<this.collectedLeaveElements.length;D++){const t=this.collectedLeaveElements[D],e=t.__ng_removed;e&&e.setForRemoval&&(g.push(t),m.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>m.add(t)):y.add(t))}const v=new Map,_=BS(h,Array.from(m));_.forEach((t,e)=>{const n=Sw+p++;v.set(e,n),t.forEach(t=>GS(t,n))}),t.push(()=>{f.forEach((t,e)=>{const n=d.get(e);t.forEach(t=>zS(t,n))}),_.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>zS(t,n))}),g.forEach(t=>{this.processLeaveNode(t)})});const b=[],w=[];for(let D=this._namespaceList.length-1;D>=0;D--)this._namespaceList[D].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(b.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=v.get(i),f=d.get(i),p=this._buildInstruction(t,n,f,h,c);if(p.errors&&p.errors.length)w.push(p);else{if(c)return e.onStart(()=>Lw(i,p.fromStyles)),e.onDestroy(()=>Rw(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>Lw(i,p.fromStyles)),e.onDestroy(()=>Rw(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),s.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>ow(o,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),b.forEach(t=>t.destroy()),this.reportError(t)}const S=new Map,E=new Map;s.forEach(t=>{const e=t.element;n.has(e)&&(E.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,S))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{ow(S,e,[]).push(t),t.destroy()})});const T=g.filter(t=>KS(t,a,u)),C=new Map;qS(C,this.driver,y,u,Kb).forEach(t=>{KS(t,a,u)&&T.push(t)});const I=new Map;f.forEach((t,e)=>{qS(I,this.driver,new Set(t),a,"!")}),T.forEach(t=>{const e=C.get(t),n=I.get(t);C.set(t,Object.assign(Object.assign({},e),n))});const A=[],x=[],k={};s.forEach(t=>{const{element:e,player:s,instruction:o}=t;if(n.has(e)){if(c.has(e))return s.onDestroy(()=>Rw(e,o.toStyles)),s.disabled=!0,s.overrideTotalTime(o.totalTime),void r.push(s);let t=k;if(E.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=E.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>E.set(e,t))}const n=this._buildAnimation(s.namespaceId,o,S,i,I,C);if(s.setRealPlayer(n),t===k)A.push(s);else{const e=this.playersByElement.get(t);e&&e.length&&(s.parentPlayer=ew(e)),r.push(s)}}else Lw(e,o.fromStyles),s.onDestroy(()=>Rw(e,o.toStyles)),x.push(s),c.has(e)&&r.push(s)}),x.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=ew(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let D=0;D<g.length;D++){const t=g[D],e=t.__ng_removed;if(zS(t,Sw),e&&e.hasAnimation)continue;let n=[];if(o.size){let e=o.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,Iw,!0);for(let t=0;t<r.length;t++){let e=o.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?HS(this,t,r):this.processLeaveNode(t)}return g.length=0,A.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),A}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let s=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(s=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==RS;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&s.push(e)})}}return(n||r)&&(s=s.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),s}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:e.triggerName;for(const o of e.timelines){const t=o.element,a=t!==r,u=ow(n,t,[]);this._getPreviousPlayers(t,a,i,s,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}Lw(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,s){const o=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const f=h.__ng_removed;if(f&&f.removedBeforeQueried)return new Jb(e.duration,e.delay);const d=h!==a,p=function(t){const e=[];return $S(t,e),e}((n.get(h)||DS).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),g=i.get(h),m=s.get(h),y=nw(0,this._normalizer,0,e.keyframes,g,m),v=this._buildPlayer(e,y,p);if(e.subTimeline&&r&&l.add(h),d){const e=new VS(t,o,h);e.setRealPlayer(v),u.push(e)}return v});u.forEach(t=>{ow(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>GS(t,Cw));const f=ew(h);return f.onDestroy(()=>{c.forEach(t=>zS(t,Cw)),Rw(a,e.toStyles)}),l.forEach(t=>{ow(r,t,[]).push(f)}),f}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Jb(t.duration,t.delay)}}class VS{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new Jb,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>rw(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){ow(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function jS(t){return t&&1===t.nodeType}function US(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function qS(t,e,n,r,i){const s=[];n.forEach(t=>s.push(US(t)));const o=[];r.forEach((n,r)=>{const s={};n.forEach(t=>{const n=s[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=OS,o.push(r))}),t.set(r,s)});let a=0;return n.forEach(t=>US(t,s[a++])),o}function BS(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;function s(t){if(!t)return 1;let e=i.get(t);if(e)return e;const o=t.parentNode;return e=n.has(o)?o:r.has(o)?1:s(o),i.set(t,e),e}return e.forEach(t=>{const e=s(t);1!==e&&n.get(e).push(t)}),n}function GS(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function zS(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function HS(t,e,n){ew(n).onDone(()=>t.processLeaveNode(e))}function $S(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof Yb?$S(r.players,e):e.push(r)}}function KS(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class QS{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new MS(t,e,n),this._timelineEngine=new IS(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const s=t+"-"+r;let o=this._triggerCache[s];if(!o){const t=[],e=Xw(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);o=function(t,e,n){return new ES(t,e,n)}(r,e,this._normalizer),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(e,r,o)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=aw(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=aw(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function ZS(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=JS(e[0]),e.length>1&&(r=JS(e[e.length-1]))):e&&(n=JS(e)),n||r?new WS(t,n,r):null}class WS{constructor(t,e,n){this._element=t,this._startStyles=e,this._endStyles=n,this._state=0;let r=WS.initialStylesByElement.get(t);r||WS.initialStylesByElement.set(t,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&Rw(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Rw(this._element,this._initialStyles),this._endStyles&&(Rw(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(WS.initialStylesByElement.delete(this._element),this._startStyles&&(Lw(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Lw(this._element,this._endStyles),this._endStyles=null),Rw(this._element,this._initialStyles),this._state=3)}}function JS(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];YS(i)&&(e=e||{},e[i]=t[i])}return e}function YS(t){return"display"===t||"position"===t}WS.initialStylesByElement=new WeakMap;const XS="animation",tE="animationend";class eE{constructor(t,e,n,r,i,s,o){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=aE(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),oE(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),sE(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){nE(this._element,this._name,"paused")}resume(){nE(this._element,this._name,"running")}setPosition(t){const e=rE(this._element,this._name);this._position=t*this._duration,oE(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),sE(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=aE(t,"").split(","),r=iE(n,e);r>=0&&(n.splice(r,1),oE(t,"",n.join(",")))}(this._element,this._name))}}function nE(t,e,n){oE(t,"PlayState",n,rE(t,e))}function rE(t,e){const n=aE(t,"");return n.indexOf(",")>0?iE(n.split(","),e):iE([n],e)}function iE(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function sE(t,e,n){n?t.removeEventListener(tE,e):t.addEventListener(tE,e)}function oE(t,e,n,r){const i=XS+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function aE(t,e){return t.style[XS+e]||""}class uE{constructor(t,e,n,r,i,s,o,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new eE(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:$w(this.element,n))})}this.currentSnapshot=t}}class cE extends Jb{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=vw(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class lE{constructor(){this._count=0}validateStyleProperty(t){return pw(t)}matchesElement(t,e){return gw(t,e)}containsElement(t,e){return mw(t,e)}query(t,e,n){return yw(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>vw(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const s=document.createElement("style");return s.textContent=r,s}animate(t,e,n,r,i,s=[],o){const a=s.filter(t=>t instanceof uE),u={};Gw(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=zw(t,e,u));if(0==n)return new cE(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);(function(t){var e;const n=null===(e=t.getRootNode)||void 0===e?void 0:e.call(t);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(t).appendChild(h);const f=ZS(t,e),d=new uE(t,e,l,n,r,i,c,f);return d.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),d}}class hE{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:$w(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class fE{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(dE().toString()),this._cssKeyframesDriver=new lE}validateStyleProperty(t){return pw(t)}matchesElement(t,e){return gw(t,e)}containsElement(t,e){return mw(t,e)}query(t,e,n){return yw(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,s);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=s.filter(t=>t instanceof hE);Gw(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=ZS(t,e=zw(t,e=e.map(t=>Nw(t,!1)),u));return new hE(t,e,a,l)}}function dE(){return Xb()&&Element.prototype.animate||{}}let pE=(()=>{class t extends $b{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.ifc.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?Qb(t):t;return yE(this._renderer,null,e,"register",[n]),new gE(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.FYo),r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class gE extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new mE(this._id,t,e||{},this._renderer)}}class mE{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return yE(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function yE(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const vE="@",_E="@.disabled";let bE=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new wE("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const s=e=>{Array.isArray(e)?e.forEach(s):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(s),new SE(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.FYo),r.LFG(QS),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class wE{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==vE&&e==_E?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class SE extends wE{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==vE?"."==e.charAt(1)&&e==_E?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==vE){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),s="";return i.charAt(0)!=vE&&([i,s]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,s,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let EE=(()=>{class t extends QS{constructor(t,e,n){super(t.body,e,n)}ngOnDestroy(){this.flush()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o),r.LFG(bw),r.LFG(mS))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const TE=new r.OlP("AnimationModuleType"),CE=[{provide:$b,useClass:pE},{provide:mS,useFactory:function(){return new yS}},{provide:QS,useClass:EE},{provide:r.FYo,useFactory:function(t,e,n){return new bE(t,e,n)},deps:[Dt,QS,r.R0b]}],IE=[{provide:bw,useFactory:function(){return"function"==typeof dE()?new fE:new lE}},{provide:TE,useValue:"BrowserAnimations"},...CE],AE=[{provide:bw,useClass:_w},{provide:TE,useValue:"NoopAnimations"},...CE];let xE=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?AE:IE}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:IE,imports:[Bt]}),t})(),kE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t,bootstrap:[Hb]}),t.\u0275inj=r.cJS({providers:[],imports:[[Bt,zb,Gt.hO.initializeApp(zt),Ub,xE]]}),t})();(0,r.G48)(),Ut().bootstrapModule(kE).catch(t=>console.error(t))},4762:(t,e,n)=>{"use strict";n.d(e,{ZT:()=>i,pi:()=>s,mG:()=>o,Jh:()=>a,XA:()=>u,CR:()=>c,ev:()=>l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function o(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(t){try{u(r.next(t))}catch(e){s(e)}}function a(t){try{u(r.throw(t))}catch(e){s(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(o,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function l(t,e,n){if(n||2===arguments.length)for(var r,i=0,s=e.length;i<s;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}}},t=>{"use strict";t(t.s=5321)}]);